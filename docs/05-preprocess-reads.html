<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title> Workflow part I: Primer and Adapter Removal</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="my.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Microbiomics Workshop</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa-home"></span>
     
    Overview
  </a>
</li>
<li>
  <a href="00-setup.html">
    <span class="fas fa-gear"></span>
     
     Setup
  </a>
</li>
<li>
  <a href="09-references.html">
    <span class="fas fa-info-circle"></span>
     
     References
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Day 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lectures:</li>
    <li>
      <a href="01-microbiomics.html">Intro to Amplicon Sequencing</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Lecture/Code-along:</li>
    <li>
      <a href="02-shell.html">Intro to the Shell</a>
    </li>
    <li>
      <a href="03-OSC.html">Intro to OSC</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Workflow Sessions:</li>
    <li>
      <a href="04-data-overview.html">Overview</a>
    </li>
    <li>
      <a href="05-preprocess-reads.html">I: Adapter and Primer Removal</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Day 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lecture/Code-along:</li>
    <li>
      <a href="06-R.html">Intro to R</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Workflow Sessions:</li>
    <li>
      <a href="07-ASV-inference.html">II: ASV Inference</a>
    </li>
    <li>
      <a href="08-postASV-analysis.html">III: ASV Analysis</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mcic-osu/2020-12-microbiomics-workshop.git">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore"><br>Workflow part I:<br>Primer and Adapter Removal</h1>

</div>


<p><br></p>
<hr />
<div id="goals" class="section level2">
<h2>Goals</h2>
<ul>
<li>Remove primers and adapters from our sequences.</li>
<li>While doing so, we’ll learn:
<ul>
<li>How to load a <code>conda</code> environment.</li>
<li>Some basics of writing a shell script.</li>
<li>How to run <code>cutadapt</code>.</li>
<li>How to submit and monitor a job with the <em>SLURM</em> scheduler.</li>
</ul></li>
</ul>
<hr />
</div>
<div id="before-we-get-started" class="section level2">
<h2>Before We Get Started</h2>
<div id="notes" class="section level3">
<h3>Notes</h3>
<ul>
<li>FYI: You can download this <code>Rmd</code> (R Markdown) file by clicking the <code>Code</code> button in the top-right of this page. To convert an <code>Rmd</code> file to an R script, type the following in an R console: <code>knitr::purl(input="&lt;filename&gt;.Rmd")</code>.</li>
</ul>
</div>
<div id="setup" class="section level3">
<h3>Setup</h3>
<ul>
<li><p>Login to OSC at <a href="https://ondemand.osc.edu" class="uri">https://ondemand.osc.edu</a>.</p></li>
<li><p>Enter a terminal in your browser at OSC by clicking <code>Cluster</code> &gt; <code>Pitzer Shell Access</code>. (Or use <a href="https://ondemand.osc.edu/pun/sys/shell/ssh/pitzer.osc.edu">this direct link</a>.)</p></li>
<li><p>Go to this your directory for this workshop at OSC:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="bu">cd</span> /fs/project/PAS0471/workshops/2020-12_micro/<span class="va">$USER</span></span></code></pre></div></li>
</ul>
<hr />
</div>
</div>
<div id="getting-started" class="section level2">
<h2>Getting Started</h2>
<p><a href="https://cutadapt.readthedocs.io/en/stable/index.html"><code>cutadapt</code></a> is a software package to remove any adapters and primers that may be present in raw sequence data.</p>
<p>We will use the output from <code>cutadapt</code> as input for the next step in our workflow, <a href="07-ASV-inference.html">ASV Infererence and Taxon Assignment</a>.</p>
<div id="primers" class="section level3">
<h3>Primers</h3>
<p>These are the primers that were used in this amplicon sequencing. we want to remove:</p>
<ul>
<li>515F: <em>GAGTGYCAGCMGCCGCGGTAA</em></li>
<li>806R: <em>ACGGACTACNVGGGTWTCTAAT</em></li>
<li>515F reverse complement: <em>TTACCGCGGCKGCTGRCACTC</em></li>
<li>806R reverse complement: <em>ATTAGAWACCCBNGTAGTCCGT</em></li>
</ul>
<p>We will specify these primers when running <code>cutadapt</code>.</p>
</div>
<div id="load-the-conda-environment-with-cutadapt" class="section level3">
<h3>Load the <code>conda</code> environment with <code>cutadapt</code></h3>
<p><code>cutadapt</code> is not available as a module at OSC. However, it can be easily installed there through <code>conda</code>, see this <a href="https://cutadapt.readthedocs.io/en/stable/installation.html#installation-with-conda">webpage</a>. We have already done this for you to save some time during this tutorial, so we just need to load the <code>conda</code> environment.</p>
<p>To work with <code>conda</code> at OSC, we first need to load the <code>conda</code> module:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">module</span> load python/3.6-conda5.2</span></code></pre></div>
<p>Assuming that you haven’t worked with <code>conda</code> at OSC before, we also need to a bit of additional one-time setup:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># This will add a line to your bash config file, which runs every time you start</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co"># a shell, to run the conda setup script:</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="bu">echo</span> <span class="st">&quot;. /apps/python/3.6-conda5.2/etc/profile.d/conda.sh&quot;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># Next, we source (run) the config file in our current shell to also run the conda</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co"># setup script right now:</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div>
<p>Then, we activate our <code>conda</code> environment for <code>cutadapt</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="ex">conda</span> activate /users/PAS0471/osu5685/.conda/envs/cutadaptenv</span></code></pre></div>
<p><br></p>
<p>Now, <code>cutadapt</code> should be in <code>$PATH</code>, i.e. we can simply call it by its name to run it. To test this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">cutadapt</span> --version     <span class="co"># Will just print the version number</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="ex">cutadapt</span> --help        <span class="co"># Will print a whole lot of documentation</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="a-script-to-run-cutadapt" class="section level2">
<h2>A Script to Run <code>cutadapt</code></h2>
<div id="part-a-boilerplate-and-slurm-directives" class="section level3">
<h3>Part A: Boilerplate and <em>SLURM</em> directives</h3>
<ol style="list-style-type: decimal">
<li><p>Our first line, <code>#!/bin/bash</code>, is the <em>“shebang”</em> line that tells us what program (language) our script uses, which is <code>bash</code> in this case.</p></li>
<li><p>We’ll provide the <code>SLURM</code> directives one line at a time, using the <code>#SBATCH</code> keyword followed by an option: <code>nodes</code> for the number of nodes, <code>ntasks-per-node</code> for the number of cores, <code>time</code> for the maximum walltime of the job (here specificed using just minutes), and <code>account</code> for the OSC project that should be billed.</p></li>
<li><p>We’ll set a couple of options with <code>set</code> that make <code>bash</code> run safer, by making it stop the script whenever an error is encountered (by default, the script will keep running.)</p></li>
<li><p>We’ll use an <code>echo</code> statement to print to screen what script we are running, and the <code>date</code> command to keep track of the script’s runtime. (The <code>-e</code> option to <code>echo</code> allows us to print newlines using <code>\n</code>).</p></li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">#!/bin/bash                   # 1. First line should be the shebang line</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#SBATCH --nodes=1             # 2. Provide sbatch directives</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#SBATCH --ntasks-per-node=1</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#SBATCH --time=60</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#SBATCH --account=PAS0471</span></span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># 3. Run bash in &quot;safe mode&quot;, basically</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="kw">set</span> <span class="ex">-e</span> -u -o pipefail    </span>
<span id="cb6-9"><a href="#cb6-9"></a></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co"># 4. Report:</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Starting cutadapt script.&quot;</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="fu">date</span></span></code></pre></div>
</div>
<div id="part-b-parse-arguments-and-set-up-directories" class="section level3">
<h3>Part B: Parse arguments and set up directories</h3>
<ol style="list-style-type: decimal">
<li><p>So-called “positional” arguments that are passed onto a script using the syntax <code>./script.sh arg1 arg2</code> are represented inside a script as the variables <code>$1</code>, <code>$2</code>, etc. First, we will give these variables more informative names.</p></li>
<li><p>We’ll create the output directory if it doesn’t already exist. Using the <code>-p</code> option, <code>mkdir</code> can create multiple levels at once, and will not complain if the dir(s) already exist.</p></li>
<li><p>We’ll report the directory variables to screen, which will be helpful e.g. if we’d need to debug our script.</p></li>
<li><p>We’ll save the primer sequences as variables.</p></li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># SETUP --------------------------------------------------------</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># 1. Command-line arguments:</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="va">indir=$1</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="va">outdir=$2</span></span>
<span id="cb7-5"><a href="#cb7-5"></a></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co"># 2. Create output directory if it doesn&#39;t already exist:</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="fu">mkdir</span> -p <span class="va">$outdir</span></span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co"># 3. Report:</span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="bu">echo</span> <span class="st">&quot;## Input dir:       </span><span class="va">$indir</span><span class="st">&quot;</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="bu">echo</span> <span class="st">&quot;## Output dir:      </span><span class="va">$outdir</span><span class="st">&quot;</span></span>
<span id="cb7-12"><a href="#cb7-12"></a></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co"># 4. Define primers:</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="va">primer_f=</span>GAGTGYCAGCMGCCGCGGTAA</span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="va">primer_r=</span>ACGGACTACNVGGGTWTCTAAT</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="va">primer_f_rc=</span>TTACCGCGGCKGCTGRCACTC</span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="va">primer_r_rc=</span>ATTAGAWACCCBNGTAGTCCGT</span></code></pre></div>
</div>
<div id="part-c-loop-through-fastq-files-and-run-cutadapt-for-each-pair" class="section level3">
<h3>Part C: Loop through <code>fastq</code> files and run <code>cutadapt</code> for each pair:</h3>
<p>We will run <code>cutadapt</code> separately for each sample, using a <code>for</code> loop to cycle through all the files. This is made a little more complicated because we have <strong>two files</strong> for each sample: one with forwards reads (which has “R1” in its filename) and one with reverse reads (“R2”).</p>
<ol style="list-style-type: decimal">
<li><p>We’ll initialize the <code>for</code> loop, which is done using <code>for x in xyz</code> syntax. We’ll loop over all the “R1” fastq files, i.e. the ones with the forward reads. We list all of those by taking advantage of the <code>*</code> wildcard.</p></li>
<li><p>Now, <code>$R1</code> (defined using <code>R1</code> in the loop initiation line) contains, in each rendition of the loop, a single file name. Because it also contains the dir name, we will extract the file name only using the <code>basename command</code>. The <code>$()</code> notation is called <em>command substitution</em>, and simply allows us to assign the output of a command to a variable.</p></li>
<li><p>To get the corresponding file with reverse read (which should always have the exact same name except containing “R2” rather than “R1”), we simply substitute “R1” by “R2” in the file name using a little <em>parameter substitution</em> trick with the syntax <code>${variable_name/pattern/replacement}</code>.</p></li>
<li><p>To make sure all is well, we list the R1 and R2 input files.</p></li>
<li><p>Now, we’ll do the primer removal using <code>cutadapt</code>. We use <code>\</code> just to allow the command to continue across multiple lines for easy of reading (the <code>\</code> “escapes” the return/newline).</p></li>
<li><p>We indicate the end of the loop with the keyword <code>done</code>.</p></li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># RUN CUTADAPT --------------------------------------------------------</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co"># 1. Initialize the loop:</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="kw">for</span> <span class="ex">R1</span> in <span class="va">$indir</span>/*_R1_*.fastq.gz</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="kw">do</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="co"># 2. Get the filenames for the fastq files with forward (R1) and reverse (R2) reads:</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="va">R1=$(</span><span class="fu">basename</span> <span class="va">$R1)</span>   <span class="co"># `basename` will strip the directory from the name</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>  </span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="co"># 3. </span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="va">R2=${R1/</span>_R1_<span class="va">/</span>_R2_<span class="va">}</span>   <span class="co"># This will substitute &quot;_R1_&quot; with &quot;_R2_&quot; in the filename.</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  </span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="co"># 4. Report input files:</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="bu">echo</span> <span class="st">&quot;## R1 input file:&quot;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">ls</span> -lh <span class="va">$indir</span>/<span class="va">$R1</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="bu">echo</span> <span class="st">&quot;## R2 input file:&quot;</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="fu">ls</span> -lh <span class="va">$indir</span>/<span class="va">$R2</span></span>
<span id="cb8-16"><a href="#cb8-16"></a></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="co"># 5. Run cutadapt:</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="bu">echo</span> -e <span class="st">&quot;\n\n## Running cutadapt...&quot;</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>    </span>
<span id="cb8-20"><a href="#cb8-20"></a>  <span class="ex">cutadapt</span> -a <span class="va">$primer_f</span>...<span class="va">$primer_r_rc</span> -A <span class="va">$primer_r</span>...<span class="va">$primer_f_rc</span> \</span>
<span id="cb8-21"><a href="#cb8-21"></a>      --discard-untrimmed --pair-filter=any \</span>
<span id="cb8-22"><a href="#cb8-22"></a>      -o <span class="va">$outdir</span>/<span class="va">$R1</span> -p <span class="va">$outdir</span>/<span class="va">$R2</span> <span class="va">$indir</span>/<span class="va">$R1</span> <span class="va">$indir</span>/<span class="va">$R2</span></span>
<span id="cb8-23"><a href="#cb8-23"></a>    </span>
<span id="cb8-24"><a href="#cb8-24"></a>  <span class="co"># 6. Exit the loop using the `done` keyword</span></span>
<span id="cb8-25"><a href="#cb8-25"></a><span class="kw">done</span></span></code></pre></div>
</div>
<div id="part-d-list-output-files-as-a-check" class="section level3">
<h3>Part D: List output files as a check:</h3>
<p>Finally, we’ll list our output files, as another way to check whether the script has run as it was supposed, and we’ll also print the <code>date</code> again to check the (date and) time that our script finished running.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># REPORT AND FINALIZE --------------------------------------------------------</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Listing output files:&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">ls</span> -lh <span class="va">$outdir</span></span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Done with cutadapt script.&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="fu">date</span></span></code></pre></div>
</div>
<div id="the-entire-script" class="section level3">
<h3>The entire script</h3>
<details>
<p><summary> Click here to see the entire script. </summary></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">#SBATCH --nodes=1</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">#SBATCH --ntasks-per-node=1</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">#SBATCH --time=60</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#SBATCH --account=PAS0471</span></span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="kw">set</span> <span class="ex">-e</span> -u -o pipefail    <span class="co"># Run bash in &quot;safe mode&quot;, basically</span></span>
<span id="cb10-8"><a href="#cb10-8"></a></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co"># Report:</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Starting cutadapt script.&quot;</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="fu">date</span></span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co"># SETUP --------------------------------------------------------</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co"># Command-line arguments:</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="va">indir=$1</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="va">outdir=$2</span></span>
<span id="cb10-17"><a href="#cb10-17"></a></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co"># Create output directory if it doesn&#39;t already exist:</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="fu">mkdir</span> -p <span class="va">$outdir</span></span>
<span id="cb10-20"><a href="#cb10-20"></a></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co"># Report:</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="bu">echo</span> <span class="st">&quot;## Input dir:       </span><span class="va">$indir</span><span class="st">&quot;</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="bu">echo</span> <span class="st">&quot;## Output dir:      </span><span class="va">$outdir</span><span class="st">&quot;</span></span>
<span id="cb10-24"><a href="#cb10-24"></a></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co"># Primers:</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="va">primer_f=</span>GAGTGYCAGCMGCCGCGGTAA</span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="va">primer_r=</span>ACGGACTACNVGGGTWTCTAAT</span>
<span id="cb10-28"><a href="#cb10-28"></a></span>
<span id="cb10-29"><a href="#cb10-29"></a><span class="va">primer_f_rc=</span>TTACCGCGGCKGCTGRCACTC</span>
<span id="cb10-30"><a href="#cb10-30"></a><span class="va">primer_r_rc=</span>ATTAGAWACCCBNGTAGTCCGT</span>
<span id="cb10-31"><a href="#cb10-31"></a></span>
<span id="cb10-32"><a href="#cb10-32"></a><span class="co"># Software - making doubly sure this is all loaded:</span></span>
<span id="cb10-33"><a href="#cb10-33"></a><span class="ex">module</span> load python/3.6-conda5.2                     <span class="co"># Load conda module</span></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="bu">.</span> <span class="ex">/apps/python/3.6-conda5.2/etc/profile.d/conda.sh</span>  <span class="co"># Setup conda (should be superfluous)</span></span>
<span id="cb10-35"><a href="#cb10-35"></a><span class="ex">conda</span> activate /users/PAS0471/osu5685/.conda/envs/cutadaptenv <span class="co"># Activate cutadapt environment</span></span>
<span id="cb10-36"><a href="#cb10-36"></a></span>
<span id="cb10-37"><a href="#cb10-37"></a><span class="co"># RUN CUTADAPT --------------------------------------------------------</span></span>
<span id="cb10-38"><a href="#cb10-38"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Looping through input files...\n&quot;</span></span>
<span id="cb10-39"><a href="#cb10-39"></a></span>
<span id="cb10-40"><a href="#cb10-40"></a><span class="kw">for</span> <span class="ex">R1</span> in <span class="va">$indir</span>/*_R1_*.fastq.gz</span>
<span id="cb10-41"><a href="#cb10-41"></a><span class="kw">do</span></span>
<span id="cb10-42"><a href="#cb10-42"></a>  <span class="va">R1=$(</span><span class="fu">basename</span> <span class="va">$R1)</span></span>
<span id="cb10-43"><a href="#cb10-43"></a>  <span class="va">R2=${R1/</span>_R1_<span class="va">/</span>_R2_<span class="va">}</span></span>
<span id="cb10-44"><a href="#cb10-44"></a>  </span>
<span id="cb10-45"><a href="#cb10-45"></a>  <span class="co"># Report input files:</span></span>
<span id="cb10-46"><a href="#cb10-46"></a>  <span class="bu">echo</span> <span class="st">&quot;## R1 input file:&quot;</span></span>
<span id="cb10-47"><a href="#cb10-47"></a>  <span class="fu">ls</span> -lh <span class="va">$indir</span>/<span class="va">$R1</span></span>
<span id="cb10-48"><a href="#cb10-48"></a>  <span class="bu">echo</span> <span class="st">&quot;## R2 input file:&quot;</span></span>
<span id="cb10-49"><a href="#cb10-49"></a>  <span class="fu">ls</span> -lh <span class="va">$indir</span>/<span class="va">$R2</span></span>
<span id="cb10-50"><a href="#cb10-50"></a></span>
<span id="cb10-51"><a href="#cb10-51"></a>  <span class="co"># Trim:</span></span>
<span id="cb10-52"><a href="#cb10-52"></a>  <span class="bu">echo</span> -e <span class="st">&quot;\n\n## Running cutadapt...&quot;</span></span>
<span id="cb10-53"><a href="#cb10-53"></a>    </span>
<span id="cb10-54"><a href="#cb10-54"></a>  <span class="ex">cutadapt</span> -a <span class="va">$primer_f</span>...<span class="va">$primer_r_rc</span> -A <span class="va">$primer_r</span>...<span class="va">$primer_f_rc</span> \</span>
<span id="cb10-55"><a href="#cb10-55"></a>      --discard-untrimmed --pair-filter=any \</span>
<span id="cb10-56"><a href="#cb10-56"></a>      -o <span class="va">$outdir</span>/<span class="va">$R1</span> -p <span class="va">$outdir</span>/<span class="va">$R2</span> <span class="va">$indir</span>/<span class="va">$R1</span> <span class="va">$indir</span>/<span class="va">$R2</span></span>
<span id="cb10-57"><a href="#cb10-57"></a>    </span>
<span id="cb10-58"><a href="#cb10-58"></a>  <span class="co"># Options:</span></span>
<span id="cb10-59"><a href="#cb10-59"></a>  <span class="co"># &quot;-a&quot;/&quot;-A&quot;: Primers for R1/R2</span></span>
<span id="cb10-60"><a href="#cb10-60"></a>  <span class="co"># &quot;--discard-untrimmed&quot;: Remove pairs with no primer found</span></span>
<span id="cb10-61"><a href="#cb10-61"></a>  <span class="co"># &quot;--pair-filter=any&quot;: Remove pair if one read is filtered (=Default)</span></span>
<span id="cb10-62"><a href="#cb10-62"></a></span>
<span id="cb10-63"><a href="#cb10-63"></a>  <span class="bu">echo</span> -e <span class="st">&quot;\n\n ------------------------------------------------------------\n&quot;</span></span>
<span id="cb10-64"><a href="#cb10-64"></a><span class="kw">done</span></span>
<span id="cb10-65"><a href="#cb10-65"></a></span>
<span id="cb10-66"><a href="#cb10-66"></a><span class="co"># REPORT AND FINALIZE --------------------------------------------------------</span></span>
<span id="cb10-67"><a href="#cb10-67"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Listing output files:&quot;</span></span>
<span id="cb10-68"><a href="#cb10-68"></a><span class="fu">ls</span> -lh <span class="va">$outdir</span></span>
<span id="cb10-69"><a href="#cb10-69"></a></span>
<span id="cb10-70"><a href="#cb10-70"></a><span class="bu">echo</span> -e <span class="st">&quot;\n## Done with cutadapt script.&quot;</span></span>
<span id="cb10-71"><a href="#cb10-71"></a><span class="fu">date</span></span></code></pre></div>
</details>
<hr />
</div>
</div>
<div id="submit-the-script" class="section level2">
<h2>Submit the Script</h2>
<p>We’ll first check whether we are in the correct directory, so that our relative paths will work:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Let&#39;s check we are in the correct directory:</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="bu">pwd</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co"># Should return: /fs/project/PAS0471/workshops/2020-12_micro/&lt;your-username&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co"># If not, run: &quot;cd /fs/project/PAS0471/workshops/2020-12_micro/$USER&quot;</span></span></code></pre></div>
<p><br></p>
<p>Then we assign our input and output directories to the variables <code>indir</code> and <code>outdir</code>, respectively.</p>
<p>We’ll also assign the name we want to give to the <em>SLURM</em> log file to a variable. Here, we’ll also use the <code>%j</code> <em>SLURM</em> keyword to include the <em>SLURM</em> job number.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="va">indir=</span>data/raw/fastq_subsample</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="va">outdir=</span>data/processed/fastq_trimmed</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># Give a name to the SLURM output file:</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co"># (The -o flag sets the SLURM log file name, and `%j` represents the job ID)</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="va">slurm_file=</span>slurm-cutadapt-<span class="va">$USER</span>-<span class="ex">%j.out</span></span></code></pre></div>
<p><br></p>
<p>Finally, we’re ready to <strong>submit the script</strong>!</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">sbatch</span> -o <span class="va">$slurm_file</span> scripts/01-cutadapt.sh <span class="va">$indir</span> <span class="va">$outdir</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co"># Submitted batch job 2526085</span></span></code></pre></div>
<hr />
</div>
<div id="monitor-the-job-and-its-output" class="section level2">
<h2>Monitor the Job and Its Output</h2>
<div id="monitor-the-job" class="section level3">
<h3>Monitor the job</h3>
<p>We can check what’s going on with our job using <code>squeue</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Initially the job may be queued (&quot;PD&quot; in the &quot;ST&quot; (status) column):</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="ex">squeue</span> -u <span class="va">$USER</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># JOBID   PARTITION     NAME       USER    ST      TIME  NODES NODELIST(REASON)</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># 2526085 serial-40     01-cutad   jelmer  PD       0:00      1 (None) </span></span>
<span id="cb14-5"><a href="#cb14-5"></a></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co"># Then the job should be running (&quot;R&quot; in the &quot;ST&quot; column):</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="ex">squeue</span> -u <span class="va">$USER</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co"># JOBID   PARTITION     NAME       USER    ST      TIME  NODES NODELIST(REASON) </span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co"># 2526085 serial-40     01-cutad   jelmer  R       0:02      1 p0002 </span></span>
<span id="cb14-10"><a href="#cb14-10"></a></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co"># When the job has finished, squeue will return nothing (!):</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="ex">squeue</span> -u <span class="va">$USER</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co"># JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON) </span></span></code></pre></div>
<p><br></p>
<p>We could also get more statistics about our job using <code>scontrol</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1"></a><span class="ex">scontrol</span> show job 2526085   <span class="co"># Replace the number with your JOBID</span></span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co"># UserId=jelmer(33227) GroupId=PAS0471(3773) MCS_label=N/A</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co"># Priority=200005206 Nice=0 Account=pas0471 QOS=pitzer-default</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># JobState=RUNNING Reason=None Dependency=(null)</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co"># Requeue=1 Restarts=0 BatchFlag=1 Reboot=0 ExitCode=0:0</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co"># RunTime=00:02:00 TimeLimit=01:00:00 TimeMin=N/A</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co"># SubmitTime=2020-12-14T14:32:44 EligibleTime=2020-12-14T14:32:44</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co"># AccrueTime=2020-12-14T14:32:44</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co"># StartTime=2020-12-14T14:32:47 EndTime=2020-12-14T15:32:47 Deadline=N/A</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co"># SuspendTime=None SecsPreSuspend=0 LastSchedEval=2020-12-14T14:32:47</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co"># Partition=serial-40core AllocNode:Sid=pitzer-login01:57954</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co"># ReqNodeList=(null) ExcNodeList=(null)</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co"># NodeList=p0002</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co"># BatchHost=p0002</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co"># NumNodes=1 NumCPUs=1 NumTasks=1 CPUs/Task=1 ReqB:S:C:T=0:0:*:*</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co"># TRES=cpu=1,mem=4556M,node=1,billing=1,gres/gpfs:project=0</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co"># Socks/Node=* NtasksPerN:B:S:C=1:0:*:1 CoreSpec=*</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co"># MinCPUsNode=1 MinMemoryCPU=4556M MinTmpDiskNode=0</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co"># Features=(null) DelayBoot=00:00:00</span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co"># OverSubscribe=OK Contiguous=0 Licenses=(null) Network=(null)</span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co"># Command=/fs/project/PAS0471/workshops/2020-12_micro/master/scripts/01-cutadapt.sh data/raw/fastq_subsample # da/processed/fastq_trimmed</span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co"># WorkDir=/fs/project/PAS0471/workshops/2020-12_micro/master</span></span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="co"># Comment=stdout=/fs/project/PAS0471/workshops/2020-12_micro/master/slurm-cutadapt-jelmer-2526085.out </span></span>
<span id="cb15-25"><a href="#cb15-25"></a><span class="co"># StdErr=/fs/project/PAS0471/workshops/2020-12_micro/master/slurm-cutadapt-jelmer-2526085.out</span></span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="co"># StdIn=/dev/null</span></span>
<span id="cb15-27"><a href="#cb15-27"></a><span class="co"># StdOut=/fs/project/PAS0471/workshops/2020-12_micro/master/slurm-cutadapt-jelmer-2526085.out</span></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="co"># Power=</span></span>
<span id="cb15-29"><a href="#cb15-29"></a><span class="co"># TresPerNode=gpfs:project:1</span></span>
<span id="cb15-30"><a href="#cb15-30"></a><span class="co"># MailUser=jelmer MailType=NONE</span></span></code></pre></div>
</div>
<div id="check-the-output" class="section level3">
<h3>Check the output</h3>
<p>Let’s see if we have a log file:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">ls</span> slurm*</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co"># slurm-cutadapt-jelmer-2451088.out</span></span></code></pre></div>
<p>Let’s look at the start of the <em>SLURM</em> log file:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">head</span> -n 20 slurm-cutadapt-jelmer-2526085.out</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co"># ## Starting cutadapt script.</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co"># Mon Dec 14 14:32:48 EST 2020</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># ## Input dir:       data/raw/fastq_subsample</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co"># ## Output dir:      data/processed/fastq_trimmed</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co"># </span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co"># ## Looping through input files...</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co"># </span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co"># ## R1 input file:</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 3.1M Dec 13 14:10 data/raw/fastq_subsample/101-S1-V4-V5_S1_L001_R1_001.fastq.gz</span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co"># ## R2 input file:</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 3.8M Dec 13 14:10 data/raw/fastq_subsample/101-S1-V4-V5_S1_L001_R2_001.fastq.gz</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co"># </span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co"># </span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co"># ## Running cutadapt...</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="co"># This is cutadapt 3.1 with Python 3.8.6</span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co"># Command line parameters: -a GAGTGYCAGCMGCCGCGGTAA...ATTAGAWACCCBNGTAGTCCGT -A # ACGGACTACNVGGGTWTCTAAT...TTACCGCGGCKGCTGRCACTC --discard-untrimmed --pair-filter=any -o # data/processed/fastq_trimmed/101-S1-V4-V5_S1_L001_R1_001.fastq.gz -p # data/processed/fastq_trimmed/101-S1-V4-V5_S1_L001_R2_001.fastq.gz # data/raw/fastq_subsample/101-S1-V4-V5_S1_L001_R1_001.fastq.gz # data/raw/fastq_subsample/101-S1-V4-V5_S1_L001_R2_001.fastq.gz</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="co"># Processing reads on 1 core in paired-end mode ...</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="co"># Finished in 2.60 s (113 µs/read; 0.53 M reads/minute).</span></span></code></pre></div>
<p>Let’s also look at the end of the file:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">tail</span> slurm-cutadapt-jelmer-2526085.out</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 2.2M Dec 14 14:35 604-S4-V4-V5_S72_L001_R2_001.fastq.gz</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 398K Dec 14 14:35 blankM-V4-V5_S73_L001_R1_001.fastq.gz</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 486K Dec 14 14:35 blankM-V4-V5_S73_L001_R2_001.fastq.gz</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471  23K Dec 14 14:35 H20-V4-V5_S88_L001_R1_001.fastq.gz</span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471  26K Dec 14 14:35 H20-V4-V5_S88_L001_R2_001.fastq.gz</span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 1.4M Dec 14 14:35 Zymo-V4-V5_S82_L001_R1_001.fastq.gz</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 1.7M Dec 14 14:35 Zymo-V4-V5_S82_L001_R2_001.fastq.gz</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="co"># </span></span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="co"># ## Done with cutadapt script.</span></span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="co"># Mon Dec 14 14:35:19 EST 2020</span></span></code></pre></div>
<p><br></p>
<p>Finally, we can directly check the output dir:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">ls</span> -lh data/processed/fastq_trimmed/    <span class="co"># Or use $outdir</span></span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co"># total 178M</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 3.0M Dec 14 14:32 101-S1-V4-V5_S1_L001_R1_001.fastq.gz</span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 3.6M Dec 14 14:32 101-S1-V4-V5_S1_L001_R2_001.fastq.gz</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 3.7M Dec 14 14:33 101-S4-V4-V5_S49_L001_R1_001.fastq.gz</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 4.5M Dec 14 14:33 101-S4-V4-V5_S49_L001_R2_001.fastq.gz</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 2.6M Dec 14 14:33 102-S4-V4-V5_S50_L001_R1_001.fastq.gz</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 3.1M Dec 14 14:33 102-S4-V4-V5_S50_L001_R2_001.fastq.gz</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co"># -rw-r--r-- 1 jelmer PAS0471 2.4M Dec 14 14:33 103-S4-V4-V5_S51_L001_R1_001.fastq.gz</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="co"># ....[other files not shown]</span></span></code></pre></div>
<p><br></p>
<p>All done! Our <a href="07-ASV-inference.html">next step</a> will be to further process the <code>fastq</code> files with <code>cutadapt</code>.</p>
<p><br> <br> <br></p>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiPGJyPldvcmtmbG93IHBhcnQgSTo8YnI+UHJpbWVyIGFuZCBBZGFwdGVyIFJlbW92YWwiCm91dHB1dDoKICBybWFya2Rvd246Omh0bWxfZG9jdW1lbnQ6CiAgICB0aGVtZTogY2VydWxlYW4KICAgIGhpZ2hsaWdodDogemVuYnVybgogICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgdG9jOiB0cnVlCiAgICB0b2NfZmxvYXQ6IHRydWUKLS0tCgo8YnI+CgpgYGB7ciBrbml0cl9vcHRpb25zLCBlY2hvPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZXZhbCA9IEZBTFNFKQpgYGAKIAotLS0tLQoKIyMgR29hbHMKCi0gUmVtb3ZlIHByaW1lcnMgYW5kIGFkYXB0ZXJzIGZyb20gb3VyIHNlcXVlbmNlcy4KLSBXaGlsZSBkb2luZyBzbywgd2UnbGwgbGVhcm46CiAgLSBIb3cgdG8gbG9hZCBhIGBjb25kYWAgZW52aXJvbm1lbnQuCiAgLSBTb21lIGJhc2ljcyBvZiB3cml0aW5nIGEgc2hlbGwgc2NyaXB0LgogIC0gSG93IHRvIHJ1biBgY3V0YWRhcHRgLgogIC0gSG93IHRvIHN1Ym1pdCBhbmQgbW9uaXRvciBhIGpvYiB3aXRoIHRoZSAqU0xVUk0qIHNjaGVkdWxlci4gCgotLS0tLQoKIyMgQmVmb3JlIFdlIEdldCBTdGFydGVkCgojIyMgTm90ZXMKCi0gRllJOiBZb3UgY2FuIGRvd25sb2FkIHRoaXMgYFJtZGAgKFIgTWFya2Rvd24pIGZpbGUgYnkgY2xpY2tpbmcgdGhlIGBDb2RlYAogIGJ1dHRvbiBpbiB0aGUgdG9wLXJpZ2h0IG9mIHRoaXMgcGFnZS4KICBUbyBjb252ZXJ0IGFuIGBSbWRgIGZpbGUgdG8gYW4gUiBzY3JpcHQsCiAgdHlwZSB0aGUgZm9sbG93aW5nIGluIGFuIFIgY29uc29sZTogYGtuaXRyOjpwdXJsKGlucHV0PSI8ZmlsZW5hbWU+LlJtZCIpYC4KCiMjIyBTZXR1cAoKLSBMb2dpbiB0byBPU0MgYXQgPGh0dHBzOi8vb25kZW1hbmQub3NjLmVkdT4uCgotIEVudGVyIGEgdGVybWluYWwgaW4geW91ciBicm93c2VyIGF0IE9TQyBieSBjbGlja2luZyBgQ2x1c3RlcmAgPiBgUGl0emVyIFNoZWxsIEFjY2Vzc2AuCiAgKE9yIHVzZSBbdGhpcyBkaXJlY3QgbGlua10oaHR0cHM6Ly9vbmRlbWFuZC5vc2MuZWR1L3B1bi9zeXMvc2hlbGwvc3NoL3BpdHplci5vc2MuZWR1KS4pCgotIEdvIHRvIHRoaXMgeW91ciBkaXJlY3RvcnkgZm9yIHRoaXMgd29ya3Nob3AgYXQgT1NDOgoKICBgYGB7YmFzaH0KICBjZCAvZnMvcHJvamVjdC9QQVMwNDcxL3dvcmtzaG9wcy8yMDIwLTEyX21pY3JvLyRVU0VSCiAgYGBgCgotLS0tLQoKIyMgR2V0dGluZyBTdGFydGVkCgpbYGN1dGFkYXB0YF0oaHR0cHM6Ly9jdXRhZGFwdC5yZWFkdGhlZG9jcy5pby9lbi9zdGFibGUvaW5kZXguaHRtbCkgaXMgYSBzb2Z0d2FyZQpwYWNrYWdlIHRvIHJlbW92ZSBhbnkgYWRhcHRlcnMgYW5kIHByaW1lcnMgdGhhdCBtYXkgYmUgcHJlc2VudCBpbiByYXcgc2VxdWVuY2UgZGF0YS4KCldlIHdpbGwgdXNlIHRoZSBvdXRwdXQgZnJvbSBgY3V0YWRhcHRgIGFzIGlucHV0IGZvciB0aGUgbmV4dCBzdGVwIGluIG91ciB3b3JrZmxvdywKW0FTViBJbmZlcmVyZW5jZSBhbmQgVGF4b24gQXNzaWdubWVudF0oMDctQVNWLWluZmVyZW5jZS5odG1sKS4KCgojIyMgUHJpbWVycwoKVGhlc2UgYXJlIHRoZSBwcmltZXJzIHRoYXQgd2VyZSB1c2VkIGluIHRoaXMgYW1wbGljb24gc2VxdWVuY2luZy4Kd2Ugd2FudCB0byByZW1vdmU6CgotIDUxNUY6ICpHQUdUR1lDQUdDTUdDQ0dDR0dUQUEqCi0gODA2UjogKkFDR0dBQ1RBQ05WR0dHVFdUQ1RBQVQqCi0gNTE1RiByZXZlcnNlIGNvbXBsZW1lbnQ6ICpUVEFDQ0dDR0dDS0dDVEdSQ0FDVEMqCi0gODA2UiByZXZlcnNlIGNvbXBsZW1lbnQ6ICpBVFRBR0FXQUNDQ0JOR1RBR1RDQ0dUKgoKV2Ugd2lsbCBzcGVjaWZ5IHRoZXNlIHByaW1lcnMgd2hlbiBydW5uaW5nIGBjdXRhZGFwdGAuCgojIyMgTG9hZCB0aGUgYGNvbmRhYCBlbnZpcm9ubWVudCB3aXRoIGBjdXRhZGFwdGAgCgpgY3V0YWRhcHRgIGlzIG5vdCBhdmFpbGFibGUgYXMgYSBtb2R1bGUgYXQgT1NDLgpIb3dldmVyLCBpdCBjYW4gYmUgZWFzaWx5IGluc3RhbGxlZCB0aGVyZSB0aHJvdWdoIGBjb25kYWAsCnNlZSB0aGlzIFt3ZWJwYWdlXShodHRwczovL2N1dGFkYXB0LnJlYWR0aGVkb2NzLmlvL2VuL3N0YWJsZS9pbnN0YWxsYXRpb24uaHRtbCNpbnN0YWxsYXRpb24td2l0aC1jb25kYSkuIFdlIGhhdmUgYWxyZWFkeSBkb25lIHRoaXMgZm9yIHlvdSB0byBzYXZlIHNvbWUgdGltZSBkdXJpbmcgdGhpcwp0dXRvcmlhbCwgc28gd2UganVzdCBuZWVkIHRvIGxvYWQgdGhlIGBjb25kYWAgZW52aXJvbm1lbnQuCgpUbyB3b3JrIHdpdGggYGNvbmRhYCBhdCBPU0MsIHdlIGZpcnN0IG5lZWQgdG8gbG9hZCB0aGUgYGNvbmRhYCBtb2R1bGU6CgpgYGB7YmFzaH0KbW9kdWxlIGxvYWQgcHl0aG9uLzMuNi1jb25kYTUuMgpgYGAKCkFzc3VtaW5nIHRoYXQgeW91IGhhdmVuJ3Qgd29ya2VkIHdpdGggYGNvbmRhYCBhdCBPU0MgYmVmb3JlLAp3ZSBhbHNvIG5lZWQgdG8gYSBiaXQgb2YgYWRkaXRpb25hbCBvbmUtdGltZSBzZXR1cDoKCmBgYHtiYXNofQojIFRoaXMgd2lsbCBhZGQgYSBsaW5lIHRvIHlvdXIgYmFzaCBjb25maWcgZmlsZSwgd2hpY2ggcnVucyBldmVyeSB0aW1lIHlvdSBzdGFydAojIGEgc2hlbGwsIHRvIHJ1biB0aGUgY29uZGEgc2V0dXAgc2NyaXB0OgplY2hvICIuIC9hcHBzL3B5dGhvbi8zLjYtY29uZGE1LjIvZXRjL3Byb2ZpbGUuZC9jb25kYS5zaCIgPj4gfi8uYmFzaHJjCgojIE5leHQsIHdlIHNvdXJjZSAocnVuKSB0aGUgY29uZmlnIGZpbGUgaW4gb3VyIGN1cnJlbnQgc2hlbGwgdG8gYWxzbyBydW4gdGhlIGNvbmRhCiMgc2V0dXAgc2NyaXB0IHJpZ2h0IG5vdzoKc291cmNlIH4vLmJhc2hyYwpgYGAKClRoZW4sIHdlIGFjdGl2YXRlIG91ciBgY29uZGFgIGVudmlyb25tZW50IGZvciBgY3V0YWRhcHRgOgoKYGBge2Jhc2h9CmNvbmRhIGFjdGl2YXRlIC91c2Vycy9QQVMwNDcxL29zdTU2ODUvLmNvbmRhL2VudnMvY3V0YWRhcHRlbnYKYGBgCgo8YnI+CgpOb3csIGBjdXRhZGFwdGAgc2hvdWxkIGJlIGluIGAkUEFUSGAsIGkuZS4gd2UgY2FuIHNpbXBseSBjYWxsIGl0IGJ5IGl0cyBuYW1lIHRvIHJ1biBpdC4KVG8gdGVzdCB0aGlzOgoKYGBge2Jhc2h9CmN1dGFkYXB0IC0tdmVyc2lvbiAgICAgIyBXaWxsIGp1c3QgcHJpbnQgdGhlIHZlcnNpb24gbnVtYmVyCmN1dGFkYXB0IC0taGVscCAgICAgICAgIyBXaWxsIHByaW50IGEgd2hvbGUgbG90IG9mIGRvY3VtZW50YXRpb24KYGBgCgoKLS0tLS0KCiMjIEEgU2NyaXB0IHRvIFJ1biBgY3V0YWRhcHRgCgojIyMgUGFydCBBOiBCb2lsZXJwbGF0ZSBhbmQgKlNMVVJNKiBkaXJlY3RpdmVzCgoxLiBPdXIgZmlyc3QgbGluZSwgYCMhL2Jpbi9iYXNoYCwgaXMgdGhlICoic2hlYmFuZyIqIGxpbmUgdGhhdCB0ZWxscyB1cyB3aGF0CiAgcHJvZ3JhbSAobGFuZ3VhZ2UpIG91ciBzY3JpcHQgdXNlcywgd2hpY2ggaXMgYGJhc2hgIGluIHRoaXMgY2FzZS4KCjIuIFdlJ2xsIHByb3ZpZGUgdGhlIGBTTFVSTWAgZGlyZWN0aXZlcyBvbmUgbGluZSBhdCBhIHRpbWUsCiAgdXNpbmcgdGhlIGAjU0JBVENIYCBrZXl3b3JkIGZvbGxvd2VkIGJ5IGFuIG9wdGlvbjogYG5vZGVzYCBmb3IgdGhlIG51bWJlciBvZgogIG5vZGVzLCBgbnRhc2tzLXBlci1ub2RlYCBmb3IgdGhlIG51bWJlciBvZiBjb3JlcywgYHRpbWVgIGZvciB0aGUgbWF4aW11bQogIHdhbGx0aW1lIG9mIHRoZSBqb2IgKGhlcmUgc3BlY2lmaWNlZCB1c2luZyBqdXN0IG1pbnV0ZXMpLCBhbmQgYGFjY291bnRgIGZvcgogIHRoZSBPU0MgcHJvamVjdCB0aGF0IHNob3VsZCBiZSBiaWxsZWQuCgozLiBXZSdsbCBzZXQgYSBjb3VwbGUgb2Ygb3B0aW9ucyB3aXRoIGBzZXRgIHRoYXQgbWFrZSBgYmFzaGAgcnVuIHNhZmVyLAogIGJ5IG1ha2luZyBpdCBzdG9wIHRoZSBzY3JpcHQgd2hlbmV2ZXIgYW4gZXJyb3IgaXMgZW5jb3VudGVyZWQgKGJ5IGRlZmF1bHQsCiAgdGhlIHNjcmlwdCB3aWxsIGtlZXAgcnVubmluZy4pCgo0LiBXZSdsbCB1c2UgYW4gYGVjaG9gIHN0YXRlbWVudCB0byBwcmludCB0byBzY3JlZW4gd2hhdCBzY3JpcHQgd2UgYXJlCiAgcnVubmluZywgYW5kIHRoZSBgZGF0ZWAgY29tbWFuZCB0byBrZWVwIHRyYWNrIG9mIHRoZSBzY3JpcHQncyBydW50aW1lLgogIChUaGUgYC1lYCBvcHRpb24gdG8gYGVjaG9gIGFsbG93cyB1cyB0byBwcmludCBuZXdsaW5lcyB1c2luZyBgXG5gKS4KCmBgYHtiYXNofQojIS9iaW4vYmFzaCAgICAgICAgICAgICAgICAgICAjIDEuIEZpcnN0IGxpbmUgc2hvdWxkIGJlIHRoZSBzaGViYW5nIGxpbmUKI1NCQVRDSCAtLW5vZGVzPTEgICAgICAgICAgICAgIyAyLiBQcm92aWRlIHNiYXRjaCBkaXJlY3RpdmVzCiNTQkFUQ0ggLS1udGFza3MtcGVyLW5vZGU9MQojU0JBVENIIC0tdGltZT02MAojU0JBVENIIC0tYWNjb3VudD1QQVMwNDcxCgojIDMuIFJ1biBiYXNoIGluICJzYWZlIG1vZGUiLCBiYXNpY2FsbHkKc2V0IC1lIC11IC1vIHBpcGVmYWlsICAgIAoKIyA0LiBSZXBvcnQ6CmVjaG8gLWUgIlxuIyMgU3RhcnRpbmcgY3V0YWRhcHQgc2NyaXB0LiIKZGF0ZQpgYGAKCiMjIyBQYXJ0IEI6IFBhcnNlIGFyZ3VtZW50cyBhbmQgc2V0IHVwIGRpcmVjdG9yaWVzCgoxLiBTby1jYWxsZWQgInBvc2l0aW9uYWwiIGFyZ3VtZW50cyB0aGF0IGFyZSBwYXNzZWQgb250byBhIHNjcmlwdCB1c2luZyB0aGUKICAgc3ludGF4IGAuL3NjcmlwdC5zaCBhcmcxIGFyZzJgIGFyZSByZXByZXNlbnRlZCBpbnNpZGUgYSBzY3JpcHQgYXMgdGhlCiAgIHZhcmlhYmxlcyBgJDFgLCBgJDJgLCBldGMuIEZpcnN0LCB3ZSB3aWxsIGdpdmUgdGhlc2UgdmFyaWFibGVzIG1vcmUKICAgaW5mb3JtYXRpdmUgbmFtZXMuCgoyLiBXZSdsbCBjcmVhdGUgdGhlIG91dHB1dCBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBhbHJlYWR5IGV4aXN0LgogICBVc2luZyB0aGUgYC1wYCBvcHRpb24sIGBta2RpcmAgY2FuIGNyZWF0ZSBtdWx0aXBsZSBsZXZlbHMgYXQgb25jZSwKICAgYW5kIHdpbGwgbm90IGNvbXBsYWluIGlmIHRoZSBkaXIocykgYWxyZWFkeSBleGlzdC4KCjMuIFdlJ2xsIHJlcG9ydCB0aGUgZGlyZWN0b3J5IHZhcmlhYmxlcyB0byBzY3JlZW4sCiAgIHdoaWNoIHdpbGwgYmUgaGVscGZ1bCBlLmcuIGlmIHdlJ2QgbmVlZCB0byBkZWJ1ZyBvdXIgc2NyaXB0LgoKNC4gV2UnbGwgc2F2ZSB0aGUgcHJpbWVyIHNlcXVlbmNlcyBhcyB2YXJpYWJsZXMuCgpgYGB7YmFzaH0KIyBTRVRVUCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIDEuIENvbW1hbmQtbGluZSBhcmd1bWVudHM6CmluZGlyPSQxCm91dGRpcj0kMgoKIyAyLiBDcmVhdGUgb3V0cHV0IGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3Q6Cm1rZGlyIC1wICRvdXRkaXIKCiMgMy4gUmVwb3J0OgplY2hvICIjIyBJbnB1dCBkaXI6ICAgICAgICRpbmRpciIKZWNobyAiIyMgT3V0cHV0IGRpcjogICAgICAkb3V0ZGlyIgoKIyA0LiBEZWZpbmUgcHJpbWVyczoKcHJpbWVyX2Y9R0FHVEdZQ0FHQ01HQ0NHQ0dHVEFBCnByaW1lcl9yPUFDR0dBQ1RBQ05WR0dHVFdUQ1RBQVQKCnByaW1lcl9mX3JjPVRUQUNDR0NHR0NLR0NUR1JDQUNUQwpwcmltZXJfcl9yYz1BVFRBR0FXQUNDQ0JOR1RBR1RDQ0dUCmBgYAoKIyMjIFBhcnQgQzogTG9vcCB0aHJvdWdoIGBmYXN0cWAgZmlsZXMgYW5kIHJ1biBgY3V0YWRhcHRgIGZvciBlYWNoIHBhaXI6CgpXZSB3aWxsIHJ1biBgY3V0YWRhcHRgIHNlcGFyYXRlbHkgZm9yIGVhY2ggc2FtcGxlLCB1c2luZyBhIGBmb3JgIGxvb3AgdG8gY3ljbGUKdGhyb3VnaCBhbGwgdGhlIGZpbGVzLgpUaGlzIGlzIG1hZGUgYSBsaXR0bGUgbW9yZSBjb21wbGljYXRlZCBiZWNhdXNlIHdlIGhhdmUgKip0d28gZmlsZXMqKiBmb3IgZWFjaCBzYW1wbGU6Cm9uZSB3aXRoIGZvcndhcmRzIHJlYWRzICh3aGljaCBoYXMgIlIxIiBpbiBpdHMgZmlsZW5hbWUpCmFuZCBvbmUgd2l0aCByZXZlcnNlIHJlYWRzICgiUjIiKS4KCjEuIFdlJ2xsIGluaXRpYWxpemUgdGhlIGBmb3JgIGxvb3AsCiAgIHdoaWNoIGlzIGRvbmUgdXNpbmcgYGZvciB4IGluIHh5emAgc3ludGF4LgogICBXZSdsbCBsb29wIG92ZXIgYWxsIHRoZSAiUjEiIGZhc3RxIGZpbGVzLAogICBpLmUuIHRoZSBvbmVzIHdpdGggdGhlIGZvcndhcmQgcmVhZHMuCiAgIFdlIGxpc3QgYWxsIG9mIHRob3NlIGJ5IHRha2luZyBhZHZhbnRhZ2Ugb2YgdGhlIGAqYCB3aWxkY2FyZC4KCjIuIE5vdywgYCRSMWAgKGRlZmluZWQgdXNpbmcgYFIxYCBpbiB0aGUgbG9vcCBpbml0aWF0aW9uIGxpbmUpIGNvbnRhaW5zLAogICBpbiBlYWNoIHJlbmRpdGlvbiBvZiB0aGUgbG9vcCwgYSBzaW5nbGUgZmlsZSBuYW1lLgogICBCZWNhdXNlIGl0IGFsc28gY29udGFpbnMgdGhlIGRpciBuYW1lLCB3ZSB3aWxsIGV4dHJhY3QgdGhlIGZpbGUgbmFtZSBvbmx5CiAgIHVzaW5nIHRoZSBgYmFzZW5hbWUgY29tbWFuZGAuCiAgIFRoZSBgJCgpYCBub3RhdGlvbiBpcyBjYWxsZWQgKmNvbW1hbmQgc3Vic3RpdHV0aW9uKiwKICAgYW5kIHNpbXBseSBhbGxvd3MgdXMgdG8gYXNzaWduIHRoZSBvdXRwdXQgb2YgYSBjb21tYW5kIHRvIGEgdmFyaWFibGUuCiAgIAozLiBUbyBnZXQgdGhlIGNvcnJlc3BvbmRpbmcgZmlsZSB3aXRoIHJldmVyc2UgcmVhZCAod2hpY2ggc2hvdWxkIGFsd2F5cwogICBoYXZlIHRoZSBleGFjdCBzYW1lIG5hbWUgZXhjZXB0IGNvbnRhaW5pbmcgIlIyIiByYXRoZXIgdGhhbiAiUjEiKSwKICAgd2Ugc2ltcGx5IHN1YnN0aXR1dGUgIlIxIiBieSAiUjIiIGluIHRoZSBmaWxlIG5hbWUgdXNpbmcgYSBsaXR0bGUKICAgKnBhcmFtZXRlciBzdWJzdGl0dXRpb24qIHRyaWNrIHdpdGggdGhlIHN5bnRheAogICBgJHt2YXJpYWJsZV9uYW1lL3BhdHRlcm4vcmVwbGFjZW1lbnR9YC4KCjQuIFRvIG1ha2Ugc3VyZSBhbGwgaXMgd2VsbCwgd2UgbGlzdCB0aGUgUjEgYW5kIFIyIGlucHV0IGZpbGVzLgoKNS4gTm93LCB3ZSdsbCBkbyB0aGUgcHJpbWVyIHJlbW92YWwgdXNpbmcgYGN1dGFkYXB0YC4KICAgV2UgdXNlIGBcYCBqdXN0IHRvIGFsbG93IHRoZSBjb21tYW5kIHRvIGNvbnRpbnVlIGFjcm9zcyBtdWx0aXBsZSBsaW5lcyBmb3IKICAgZWFzeSBvZiByZWFkaW5nICh0aGUgYFxgICJlc2NhcGVzIiB0aGUgcmV0dXJuL25ld2xpbmUpLgoKNi4gV2UgaW5kaWNhdGUgdGhlIGVuZCBvZiB0aGUgbG9vcCB3aXRoIHRoZSBrZXl3b3JkIGBkb25lYC4KCmBgYHtiYXNofQojIFJVTiBDVVRBREFQVCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIDEuIEluaXRpYWxpemUgdGhlIGxvb3A6CmZvciBSMSBpbiAkaW5kaXIvKl9SMV8qLmZhc3RxLmd6CmRvCiAgIyAyLiBHZXQgdGhlIGZpbGVuYW1lcyBmb3IgdGhlIGZhc3RxIGZpbGVzIHdpdGggZm9yd2FyZCAoUjEpIGFuZCByZXZlcnNlIChSMikgcmVhZHM6CiAgUjE9JChiYXNlbmFtZSAkUjEpICAgIyBgYmFzZW5hbWVgIHdpbGwgc3RyaXAgdGhlIGRpcmVjdG9yeSBmcm9tIHRoZSBuYW1lCiAgCiAgIyAzLiAKICBSMj0ke1IxL19SMV8vX1IyX30gICAjIFRoaXMgd2lsbCBzdWJzdGl0dXRlICJfUjFfIiB3aXRoICJfUjJfIiBpbiB0aGUgZmlsZW5hbWUuCiAgCiAgIyA0LiBSZXBvcnQgaW5wdXQgZmlsZXM6CiAgZWNobyAiIyMgUjEgaW5wdXQgZmlsZToiCiAgbHMgLWxoICRpbmRpci8kUjEKICBlY2hvICIjIyBSMiBpbnB1dCBmaWxlOiIKICBscyAtbGggJGluZGlyLyRSMgoKICAjIDUuIFJ1biBjdXRhZGFwdDoKICBlY2hvIC1lICJcblxuIyMgUnVubmluZyBjdXRhZGFwdC4uLiIKCQogIGN1dGFkYXB0IC1hICRwcmltZXJfZi4uLiRwcmltZXJfcl9yYyAtQSAkcHJpbWVyX3IuLi4kcHJpbWVyX2ZfcmMgXAoJICAtLWRpc2NhcmQtdW50cmltbWVkIC0tcGFpci1maWx0ZXI9YW55IFwKCSAgLW8gJG91dGRpci8kUjEgLXAgJG91dGRpci8kUjIgJGluZGlyLyRSMSAkaW5kaXIvJFIyCgkKICAjIDYuIEV4aXQgdGhlIGxvb3AgdXNpbmcgdGhlIGBkb25lYCBrZXl3b3JkCmRvbmUKYGBgCgojIyMgUGFydCBEOiBMaXN0IG91dHB1dCBmaWxlcyBhcyBhIGNoZWNrOgoKRmluYWxseSwgd2UnbGwgbGlzdCBvdXIgb3V0cHV0IGZpbGVzLCBhcyBhbm90aGVyIHdheSB0byBjaGVjayB3aGV0aGVyIHRoZSBzY3JpcHQKaGFzIHJ1biBhcyBpdCB3YXMgc3VwcG9zZWQsIGFuZCB3ZSdsbCBhbHNvIHByaW50IHRoZSBgZGF0ZWAgYWdhaW4gdG8gY2hlY2sKdGhlIChkYXRlIGFuZCkgdGltZSB0aGF0IG91ciBzY3JpcHQgZmluaXNoZWQgcnVubmluZy4KCmBgYHtiYXNofQojIFJFUE9SVCBBTkQgRklOQUxJWkUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZWNobyAtZSAiXG4jIyBMaXN0aW5nIG91dHB1dCBmaWxlczoiCmxzIC1saCAkb3V0ZGlyCgplY2hvIC1lICJcbiMjIERvbmUgd2l0aCBjdXRhZGFwdCBzY3JpcHQuIgpkYXRlCmBgYAoKIyMjIFRoZSBlbnRpcmUgc2NyaXB0Cgo8ZGV0YWlscz4KPHN1bW1hcnk+CkNsaWNrIGhlcmUgdG8gc2VlIHRoZSBlbnRpcmUgc2NyaXB0Lgo8L3N1bW1hcnk+CgpgYGBzaAojIS9iaW4vYmFzaAojU0JBVENIIC0tbm9kZXM9MQojU0JBVENIIC0tbnRhc2tzLXBlci1ub2RlPTEKI1NCQVRDSCAtLXRpbWU9NjAKI1NCQVRDSCAtLWFjY291bnQ9UEFTMDQ3MQoKc2V0IC1lIC11IC1vIHBpcGVmYWlsICAgICMgUnVuIGJhc2ggaW4gInNhZmUgbW9kZSIsIGJhc2ljYWxseQoKIyBSZXBvcnQ6CmVjaG8gLWUgIlxuIyMgU3RhcnRpbmcgY3V0YWRhcHQgc2NyaXB0LiIKZGF0ZQoKIyBTRVRVUCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENvbW1hbmQtbGluZSBhcmd1bWVudHM6CmluZGlyPSQxCm91dGRpcj0kMgoKIyBDcmVhdGUgb3V0cHV0IGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3Q6Cm1rZGlyIC1wICRvdXRkaXIKCiMgUmVwb3J0OgplY2hvICIjIyBJbnB1dCBkaXI6ICAgICAgICRpbmRpciIKZWNobyAiIyMgT3V0cHV0IGRpcjogICAgICAkb3V0ZGlyIgoKIyBQcmltZXJzOgpwcmltZXJfZj1HQUdUR1lDQUdDTUdDQ0dDR0dUQUEKcHJpbWVyX3I9QUNHR0FDVEFDTlZHR0dUV1RDVEFBVAoKcHJpbWVyX2ZfcmM9VFRBQ0NHQ0dHQ0tHQ1RHUkNBQ1RDCnByaW1lcl9yX3JjPUFUVEFHQVdBQ0NDQk5HVEFHVENDR1QKCiMgU29mdHdhcmUgLSBtYWtpbmcgZG91Ymx5IHN1cmUgdGhpcyBpcyBhbGwgbG9hZGVkOgptb2R1bGUgbG9hZCBweXRob24vMy42LWNvbmRhNS4yICAgICAgICAgICAgICAgICAgICAgIyBMb2FkIGNvbmRhIG1vZHVsZQouIC9hcHBzL3B5dGhvbi8zLjYtY29uZGE1LjIvZXRjL3Byb2ZpbGUuZC9jb25kYS5zaCAgIyBTZXR1cCBjb25kYSAoc2hvdWxkIGJlIHN1cGVyZmx1b3VzKQpjb25kYSBhY3RpdmF0ZSAvdXNlcnMvUEFTMDQ3MS9vc3U1Njg1Ly5jb25kYS9lbnZzL2N1dGFkYXB0ZW52ICMgQWN0aXZhdGUgY3V0YWRhcHQgZW52aXJvbm1lbnQKCiMgUlVOIENVVEFEQVBUIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmVjaG8gLWUgIlxuIyMgTG9vcGluZyB0aHJvdWdoIGlucHV0IGZpbGVzLi4uXG4iCgpmb3IgUjEgaW4gJGluZGlyLypfUjFfKi5mYXN0cS5negpkbwogIFIxPSQoYmFzZW5hbWUgJFIxKQogIFIyPSR7UjEvX1IxXy9fUjJffQogIAogICMgUmVwb3J0IGlucHV0IGZpbGVzOgogIGVjaG8gIiMjIFIxIGlucHV0IGZpbGU6IgogIGxzIC1saCAkaW5kaXIvJFIxCiAgZWNobyAiIyMgUjIgaW5wdXQgZmlsZToiCiAgbHMgLWxoICRpbmRpci8kUjIKCiAgIyBUcmltOgogIGVjaG8gLWUgIlxuXG4jIyBSdW5uaW5nIGN1dGFkYXB0Li4uIgoJCiAgY3V0YWRhcHQgLWEgJHByaW1lcl9mLi4uJHByaW1lcl9yX3JjIC1BICRwcmltZXJfci4uLiRwcmltZXJfZl9yYyBcCgkgIC0tZGlzY2FyZC11bnRyaW1tZWQgLS1wYWlyLWZpbHRlcj1hbnkgXAoJICAtbyAkb3V0ZGlyLyRSMSAtcCAkb3V0ZGlyLyRSMiAkaW5kaXIvJFIxICRpbmRpci8kUjIKCQogICMgT3B0aW9uczoKICAjICItYSIvIi1BIjogUHJpbWVycyBmb3IgUjEvUjIKICAjICItLWRpc2NhcmQtdW50cmltbWVkIjogUmVtb3ZlIHBhaXJzIHdpdGggbm8gcHJpbWVyIGZvdW5kCiAgIyAiLS1wYWlyLWZpbHRlcj1hbnkiOiBSZW1vdmUgcGFpciBpZiBvbmUgcmVhZCBpcyBmaWx0ZXJlZCAoPURlZmF1bHQpCgogIGVjaG8gLWUgIlxuXG4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iCmRvbmUKCiMgUkVQT1JUIEFORCBGSU5BTElaRSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQplY2hvIC1lICJcbiMjIExpc3Rpbmcgb3V0cHV0IGZpbGVzOiIKbHMgLWxoICRvdXRkaXIKCmVjaG8gLWUgIlxuIyMgRG9uZSB3aXRoIGN1dGFkYXB0IHNjcmlwdC4iCmRhdGUKYGBgCgo8L2RldGFpbHM+CgotLS0tLQoKIyMgU3VibWl0IHRoZSBTY3JpcHQKCldlJ2xsIGZpcnN0IGNoZWNrIHdoZXRoZXIgd2UgYXJlIGluIHRoZSBjb3JyZWN0IGRpcmVjdG9yeSwKc28gdGhhdCBvdXIgcmVsYXRpdmUgcGF0aHMgd2lsbCB3b3JrOgoKYGBge2Jhc2h9CiMgTGV0J3MgY2hlY2sgd2UgYXJlIGluIHRoZSBjb3JyZWN0IGRpcmVjdG9yeToKcHdkCiMgU2hvdWxkIHJldHVybjogL2ZzL3Byb2plY3QvUEFTMDQ3MS93b3Jrc2hvcHMvMjAyMC0xMl9taWNyby88eW91ci11c2VybmFtZT4KIyBJZiBub3QsIHJ1bjogImNkIC9mcy9wcm9qZWN0L1BBUzA0NzEvd29ya3Nob3BzLzIwMjAtMTJfbWljcm8vJFVTRVIiCmBgYAoKPGJyPgoKVGhlbiB3ZSBhc3NpZ24gb3VyIGlucHV0IGFuZCBvdXRwdXQgZGlyZWN0b3JpZXMgdG8gdGhlIHZhcmlhYmxlcwpgaW5kaXJgIGFuZCBgb3V0ZGlyYCwgcmVzcGVjdGl2ZWx5LgoKV2UnbGwgYWxzbyBhc3NpZ24gdGhlIG5hbWUgd2Ugd2FudCB0byBnaXZlIHRvIHRoZSAqU0xVUk0qIGxvZyBmaWxlIHRvIGEgdmFyaWFibGUuCkhlcmUsIHdlJ2xsIGFsc28gdXNlIHRoZSBgJWpgICpTTFVSTSoga2V5d29yZCB0byBpbmNsdWRlIHRoZSAqU0xVUk0qIGpvYiBudW1iZXIuCgpgYGB7YmFzaH0KaW5kaXI9ZGF0YS9yYXcvZmFzdHFfc3Vic2FtcGxlCm91dGRpcj1kYXRhL3Byb2Nlc3NlZC9mYXN0cV90cmltbWVkCgojIEdpdmUgYSBuYW1lIHRvIHRoZSBTTFVSTSBvdXRwdXQgZmlsZToKIyAoVGhlIC1vIGZsYWcgc2V0cyB0aGUgU0xVUk0gbG9nIGZpbGUgbmFtZSwgYW5kIGAlamAgcmVwcmVzZW50cyB0aGUgam9iIElEKQpzbHVybV9maWxlPXNsdXJtLWN1dGFkYXB0LSRVU0VSLSVqLm91dApgYGAKCjxicj4KCkZpbmFsbHksIHdlJ3JlIHJlYWR5IHRvICoqc3VibWl0IHRoZSBzY3JpcHQqKiEKYGBge2Jhc2h9CnNiYXRjaCAtbyAkc2x1cm1fZmlsZSBzY3JpcHRzLzAxLWN1dGFkYXB0LnNoICRpbmRpciAkb3V0ZGlyCiMgU3VibWl0dGVkIGJhdGNoIGpvYiAyNTI2MDg1CmBgYAoKLS0tLS0KCiMjIE1vbml0b3IgdGhlIEpvYiBhbmQgSXRzIE91dHB1dAoKCiMjIyBNb25pdG9yIHRoZSBqb2IKCldlIGNhbiBjaGVjayB3aGF0J3MgZ29pbmcgb24gd2l0aCBvdXIgam9iIHVzaW5nIGBzcXVldWVgOgoKYGBge2Jhc2h9CiMgSW5pdGlhbGx5IHRoZSBqb2IgbWF5IGJlIHF1ZXVlZCAoIlBEIiBpbiB0aGUgIlNUIiAoc3RhdHVzKSBjb2x1bW4pOgpzcXVldWUgLXUgJFVTRVIKIyBKT0JJRCAgIFBBUlRJVElPTiAgICAgTkFNRSAgICAgICBVU0VSICAgIFNUICAgICAgVElNRSAgTk9ERVMgTk9ERUxJU1QoUkVBU09OKQojIDI1MjYwODUgc2VyaWFsLTQwICAgICAwMS1jdXRhZCAgIGplbG1lciAgUEQgICAgICAgMDowMCAgICAgIDEgKE5vbmUpIAoKIyBUaGVuIHRoZSBqb2Igc2hvdWxkIGJlIHJ1bm5pbmcgKCJSIiBpbiB0aGUgIlNUIiBjb2x1bW4pOgpzcXVldWUgLXUgJFVTRVIKIyBKT0JJRCAgIFBBUlRJVElPTiAgICAgTkFNRSAgICAgICBVU0VSICAgIFNUICAgICAgVElNRSAgTk9ERVMgTk9ERUxJU1QoUkVBU09OKSAKIyAyNTI2MDg1IHNlcmlhbC00MCAgICAgMDEtY3V0YWQgICBqZWxtZXIgIFIgICAgICAgMDowMiAgICAgIDEgcDAwMDIgCgojIFdoZW4gdGhlIGpvYiBoYXMgZmluaXNoZWQsIHNxdWV1ZSB3aWxsIHJldHVybiBub3RoaW5nICghKToKc3F1ZXVlIC11ICRVU0VSCiMgSk9CSUQgUEFSVElUSU9OICAgICBOQU1FICAgICBVU0VSIFNUICAgICAgIFRJTUUgIE5PREVTIE5PREVMSVNUKFJFQVNPTikgCgpgYGAKCjxicj4KCldlIGNvdWxkIGFsc28gZ2V0IG1vcmUgc3RhdGlzdGljcyBhYm91dCBvdXIgam9iIHVzaW5nIGBzY29udHJvbGA6CgpgYGB7YmFzaH0Kc2NvbnRyb2wgc2hvdyBqb2IgMjUyNjA4NSAgICMgUmVwbGFjZSB0aGUgbnVtYmVyIHdpdGggeW91ciBKT0JJRAoKIyBVc2VySWQ9amVsbWVyKDMzMjI3KSBHcm91cElkPVBBUzA0NzEoMzc3MykgTUNTX2xhYmVsPU4vQQojIFByaW9yaXR5PTIwMDAwNTIwNiBOaWNlPTAgQWNjb3VudD1wYXMwNDcxIFFPUz1waXR6ZXItZGVmYXVsdAojIEpvYlN0YXRlPVJVTk5JTkcgUmVhc29uPU5vbmUgRGVwZW5kZW5jeT0obnVsbCkKIyBSZXF1ZXVlPTEgUmVzdGFydHM9MCBCYXRjaEZsYWc9MSBSZWJvb3Q9MCBFeGl0Q29kZT0wOjAKIyBSdW5UaW1lPTAwOjAyOjAwIFRpbWVMaW1pdD0wMTowMDowMCBUaW1lTWluPU4vQQojIFN1Ym1pdFRpbWU9MjAyMC0xMi0xNFQxNDozMjo0NCBFbGlnaWJsZVRpbWU9MjAyMC0xMi0xNFQxNDozMjo0NAojIEFjY3J1ZVRpbWU9MjAyMC0xMi0xNFQxNDozMjo0NAojIFN0YXJ0VGltZT0yMDIwLTEyLTE0VDE0OjMyOjQ3IEVuZFRpbWU9MjAyMC0xMi0xNFQxNTozMjo0NyBEZWFkbGluZT1OL0EKIyBTdXNwZW5kVGltZT1Ob25lIFNlY3NQcmVTdXNwZW5kPTAgTGFzdFNjaGVkRXZhbD0yMDIwLTEyLTE0VDE0OjMyOjQ3CiMgUGFydGl0aW9uPXNlcmlhbC00MGNvcmUgQWxsb2NOb2RlOlNpZD1waXR6ZXItbG9naW4wMTo1Nzk1NAojIFJlcU5vZGVMaXN0PShudWxsKSBFeGNOb2RlTGlzdD0obnVsbCkKIyBOb2RlTGlzdD1wMDAwMgojIEJhdGNoSG9zdD1wMDAwMgojIE51bU5vZGVzPTEgTnVtQ1BVcz0xIE51bVRhc2tzPTEgQ1BVcy9UYXNrPTEgUmVxQjpTOkM6VD0wOjA6KjoqCiMgVFJFUz1jcHU9MSxtZW09NDU1Nk0sbm9kZT0xLGJpbGxpbmc9MSxncmVzL2dwZnM6cHJvamVjdD0wCiMgU29ja3MvTm9kZT0qIE50YXNrc1Blck46QjpTOkM9MTowOio6MSBDb3JlU3BlYz0qCiMgTWluQ1BVc05vZGU9MSBNaW5NZW1vcnlDUFU9NDU1Nk0gTWluVG1wRGlza05vZGU9MAojIEZlYXR1cmVzPShudWxsKSBEZWxheUJvb3Q9MDA6MDA6MDAKIyBPdmVyU3Vic2NyaWJlPU9LIENvbnRpZ3VvdXM9MCBMaWNlbnNlcz0obnVsbCkgTmV0d29yaz0obnVsbCkKIyBDb21tYW5kPS9mcy9wcm9qZWN0L1BBUzA0NzEvd29ya3Nob3BzLzIwMjAtMTJfbWljcm8vbWFzdGVyL3NjcmlwdHMvMDEtY3V0YWRhcHQuc2ggZGF0YS9yYXcvZmFzdHFfc3Vic2FtcGxlICMgZGEvcHJvY2Vzc2VkL2Zhc3RxX3RyaW1tZWQKIyBXb3JrRGlyPS9mcy9wcm9qZWN0L1BBUzA0NzEvd29ya3Nob3BzLzIwMjAtMTJfbWljcm8vbWFzdGVyCiMgQ29tbWVudD1zdGRvdXQ9L2ZzL3Byb2plY3QvUEFTMDQ3MS93b3Jrc2hvcHMvMjAyMC0xMl9taWNyby9tYXN0ZXIvc2x1cm0tY3V0YWRhcHQtamVsbWVyLTI1MjYwODUub3V0IAojIFN0ZEVycj0vZnMvcHJvamVjdC9QQVMwNDcxL3dvcmtzaG9wcy8yMDIwLTEyX21pY3JvL21hc3Rlci9zbHVybS1jdXRhZGFwdC1qZWxtZXItMjUyNjA4NS5vdXQKIyBTdGRJbj0vZGV2L251bGwKIyBTdGRPdXQ9L2ZzL3Byb2plY3QvUEFTMDQ3MS93b3Jrc2hvcHMvMjAyMC0xMl9taWNyby9tYXN0ZXIvc2x1cm0tY3V0YWRhcHQtamVsbWVyLTI1MjYwODUub3V0CiMgUG93ZXI9CiMgVHJlc1Blck5vZGU9Z3Bmczpwcm9qZWN0OjEKIyBNYWlsVXNlcj1qZWxtZXIgTWFpbFR5cGU9Tk9ORQpgYGAKCiMjIyBDaGVjayB0aGUgb3V0cHV0CgpMZXQncyBzZWUgaWYgd2UgaGF2ZSBhIGxvZyBmaWxlOgoKYGBge2Jhc2h9CmxzIHNsdXJtKgojIHNsdXJtLWN1dGFkYXB0LWplbG1lci0yNDUxMDg4Lm91dApgYGAKCkxldCdzIGxvb2sgYXQgdGhlIHN0YXJ0IG9mIHRoZSAqU0xVUk0qIGxvZyBmaWxlOgoKYGBge2Jhc2h9CmhlYWQgLW4gMjAgc2x1cm0tY3V0YWRhcHQtamVsbWVyLTI1MjYwODUub3V0CgojICMjIFN0YXJ0aW5nIGN1dGFkYXB0IHNjcmlwdC4KIyBNb24gRGVjIDE0IDE0OjMyOjQ4IEVTVCAyMDIwCiMgIyMgSW5wdXQgZGlyOiAgICAgICBkYXRhL3Jhdy9mYXN0cV9zdWJzYW1wbGUKIyAjIyBPdXRwdXQgZGlyOiAgICAgIGRhdGEvcHJvY2Vzc2VkL2Zhc3RxX3RyaW1tZWQKIyAKIyAjIyBMb29waW5nIHRocm91Z2ggaW5wdXQgZmlsZXMuLi4KIyAKIyAjIyBSMSBpbnB1dCBmaWxlOgojIC1ydy1yLS1yLS0gMSBqZWxtZXIgUEFTMDQ3MSAzLjFNIERlYyAxMyAxNDoxMCBkYXRhL3Jhdy9mYXN0cV9zdWJzYW1wbGUvMTAxLVMxLVY0LVY1X1MxX0wwMDFfUjFfMDAxLmZhc3RxLmd6CiMgIyMgUjIgaW5wdXQgZmlsZToKIyAtcnctci0tci0tIDEgamVsbWVyIFBBUzA0NzEgMy44TSBEZWMgMTMgMTQ6MTAgZGF0YS9yYXcvZmFzdHFfc3Vic2FtcGxlLzEwMS1TMS1WNC1WNV9TMV9MMDAxX1IyXzAwMS5mYXN0cS5negojIAojIAojICMjIFJ1bm5pbmcgY3V0YWRhcHQuLi4KIyBUaGlzIGlzIGN1dGFkYXB0IDMuMSB3aXRoIFB5dGhvbiAzLjguNgojIENvbW1hbmQgbGluZSBwYXJhbWV0ZXJzOiAtYSBHQUdUR1lDQUdDTUdDQ0dDR0dUQUEuLi5BVFRBR0FXQUNDQ0JOR1RBR1RDQ0dUIC1BICMgQUNHR0FDVEFDTlZHR0dUV1RDVEFBVC4uLlRUQUNDR0NHR0NLR0NUR1JDQUNUQyAtLWRpc2NhcmQtdW50cmltbWVkIC0tcGFpci1maWx0ZXI9YW55IC1vICMgZGF0YS9wcm9jZXNzZWQvZmFzdHFfdHJpbW1lZC8xMDEtUzEtVjQtVjVfUzFfTDAwMV9SMV8wMDEuZmFzdHEuZ3ogLXAgIyBkYXRhL3Byb2Nlc3NlZC9mYXN0cV90cmltbWVkLzEwMS1TMS1WNC1WNV9TMV9MMDAxX1IyXzAwMS5mYXN0cS5neiAjIGRhdGEvcmF3L2Zhc3RxX3N1YnNhbXBsZS8xMDEtUzEtVjQtVjVfUzFfTDAwMV9SMV8wMDEuZmFzdHEuZ3ogIyBkYXRhL3Jhdy9mYXN0cV9zdWJzYW1wbGUvMTAxLVMxLVY0LVY1X1MxX0wwMDFfUjJfMDAxLmZhc3RxLmd6CiMgUHJvY2Vzc2luZyByZWFkcyBvbiAxIGNvcmUgaW4gcGFpcmVkLWVuZCBtb2RlIC4uLgojIEZpbmlzaGVkIGluIDIuNjAgcyAoMTEzIMK1cy9yZWFkOyAwLjUzIE0gcmVhZHMvbWludXRlKS4KCmBgYAoKTGV0J3MgYWxzbyBsb29rIGF0IHRoZSBlbmQgb2YgdGhlIGZpbGU6CgpgYGB7YmFzaH0KdGFpbCBzbHVybS1jdXRhZGFwdC1qZWxtZXItMjUyNjA4NS5vdXQKCiMgLXJ3LXItLXItLSAxIGplbG1lciBQQVMwNDcxIDIuMk0gRGVjIDE0IDE0OjM1IDYwNC1TNC1WNC1WNV9TNzJfTDAwMV9SMl8wMDEuZmFzdHEuZ3oKIyAtcnctci0tci0tIDEgamVsbWVyIFBBUzA0NzEgMzk4SyBEZWMgMTQgMTQ6MzUgYmxhbmtNLVY0LVY1X1M3M19MMDAxX1IxXzAwMS5mYXN0cS5negojIC1ydy1yLS1yLS0gMSBqZWxtZXIgUEFTMDQ3MSA0ODZLIERlYyAxNCAxNDozNSBibGFua00tVjQtVjVfUzczX0wwMDFfUjJfMDAxLmZhc3RxLmd6CiMgLXJ3LXItLXItLSAxIGplbG1lciBQQVMwNDcxICAyM0sgRGVjIDE0IDE0OjM1IEgyMC1WNC1WNV9TODhfTDAwMV9SMV8wMDEuZmFzdHEuZ3oKIyAtcnctci0tci0tIDEgamVsbWVyIFBBUzA0NzEgIDI2SyBEZWMgMTQgMTQ6MzUgSDIwLVY0LVY1X1M4OF9MMDAxX1IyXzAwMS5mYXN0cS5negojIC1ydy1yLS1yLS0gMSBqZWxtZXIgUEFTMDQ3MSAxLjRNIERlYyAxNCAxNDozNSBaeW1vLVY0LVY1X1M4Ml9MMDAxX1IxXzAwMS5mYXN0cS5negojIC1ydy1yLS1yLS0gMSBqZWxtZXIgUEFTMDQ3MSAxLjdNIERlYyAxNCAxNDozNSBaeW1vLVY0LVY1X1M4Ml9MMDAxX1IyXzAwMS5mYXN0cS5negojIAojICMjIERvbmUgd2l0aCBjdXRhZGFwdCBzY3JpcHQuCiMgTW9uIERlYyAxNCAxNDozNToxOSBFU1QgMjAyMApgYGAKCgo8YnI+CgpGaW5hbGx5LCB3ZSBjYW4gZGlyZWN0bHkgY2hlY2sgdGhlIG91dHB1dCBkaXI6CgpgYGB7YmFzaH0KbHMgLWxoIGRhdGEvcHJvY2Vzc2VkL2Zhc3RxX3RyaW1tZWQvICAgICMgT3IgdXNlICRvdXRkaXIKCiMgdG90YWwgMTc4TQojIC1ydy1yLS1yLS0gMSBqZWxtZXIgUEFTMDQ3MSAzLjBNIERlYyAxNCAxNDozMiAxMDEtUzEtVjQtVjVfUzFfTDAwMV9SMV8wMDEuZmFzdHEuZ3oKIyAtcnctci0tci0tIDEgamVsbWVyIFBBUzA0NzEgMy42TSBEZWMgMTQgMTQ6MzIgMTAxLVMxLVY0LVY1X1MxX0wwMDFfUjJfMDAxLmZhc3RxLmd6CiMgLXJ3LXItLXItLSAxIGplbG1lciBQQVMwNDcxIDMuN00gRGVjIDE0IDE0OjMzIDEwMS1TNC1WNC1WNV9TNDlfTDAwMV9SMV8wMDEuZmFzdHEuZ3oKIyAtcnctci0tci0tIDEgamVsbWVyIFBBUzA0NzEgNC41TSBEZWMgMTQgMTQ6MzMgMTAxLVM0LVY0LVY1X1M0OV9MMDAxX1IyXzAwMS5mYXN0cS5negojIC1ydy1yLS1yLS0gMSBqZWxtZXIgUEFTMDQ3MSAyLjZNIERlYyAxNCAxNDozMyAxMDItUzQtVjQtVjVfUzUwX0wwMDFfUjFfMDAxLmZhc3RxLmd6CiMgLXJ3LXItLXItLSAxIGplbG1lciBQQVMwNDcxIDMuMU0gRGVjIDE0IDE0OjMzIDEwMi1TNC1WNC1WNV9TNTBfTDAwMV9SMl8wMDEuZmFzdHEuZ3oKIyAtcnctci0tci0tIDEgamVsbWVyIFBBUzA0NzEgMi40TSBEZWMgMTQgMTQ6MzMgMTAzLVM0LVY0LVY1X1M1MV9MMDAxX1IxXzAwMS5mYXN0cS5negojIC4uLi5bb3RoZXIgZmlsZXMgbm90IHNob3duXQpgYGAKCjxicj4KCkFsbCBkb25lISBPdXIgW25leHQgc3RlcF0oMDctQVNWLWluZmVyZW5jZS5odG1sKSB3aWxsIGJlIHRvIGZ1cnRoZXIgcHJvY2VzcyB0aGUgYGZhc3RxYCBmaWxlcyB3aXRoIGBjdXRhZGFwdGAuCgo8YnI+IDxicj4gPGJyPgo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("05-preprocess-reads.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
