<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title> An Introduction to R</title>

<script src="site_libs/header-attrs-2.5/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="my.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Microbiomics Workshop</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Overview
  </a>
</li>
<li>
  <a href="setup.html">
    <span class="fa fa-gear"></span>
     
    Setup
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Day 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lectures:</li>
    <li>
      <a href="01-microbiomics.html">Intro to Microbiomics</a>
    </li>
    <li>
      <a href="02-OSC.html">Intro to OSC</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Hands-on Sessions:</li>
    <li>
      <a href="03-shell.html">Intro to the Shell</a>
    </li>
    <li>
      <a href="04-R.html">Intro to R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Day 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Hands-on Sessions:</li>
    <li>
      <a href="05-reads-to-ASV.html">From Reads to an ASV Table</a>
    </li>
    <li>
      <a href="06-ASV-analysis.html">Analyzing ASV Data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mcic-osu/2020-12-microbiomics-workshop.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore"><br>An Introduction to R</h1>

</div>


<p><br></p>
<blockquote>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Get some basic familiarity with R and RStudio</li>
<li>Learn how and why to use RStudio Projects</li>
<li>Understand objects, functions, and how to use them</li>
<li>Understand the concepts of <code>vector</code> and <code>data.frame</code></li>
<li>Explore the structure and the content of a <code>data.frame</code></li>
<li>Learn about how R handles missing data</li>
</ul>
</blockquote>
<hr />
<div id="before-we-start" class="section level2">
<h2>Before we start</h2>
<div id="attribution" class="section level3">
<h3>Attribution</h3>
<p>This material was modified after material from <a href="https://carpentries.org/">The Carpentries</a>, especially from <a href="http://uw-madison-aci.github.io/2016-06-01-uwmadison/">this Data Carpentry workshop</a> and <a href="https://datacarpentry.org/R-ecology-lesson">this “R for Ecology” workshop</a>.</p>
</div>
<div id="notes-on-terminology" class="section level3">
<h3>Notes on Terminology</h3>
<ul>
<li>The terms “directory” and “folder” are used interchangeably.</li>
</ul>
</div>
<div id="why-r" class="section level3">
<h3>Why R?</h3>
<p>R is a versatile, open source programming/scripting language that’s particularly useful for <em>statistics</em> and <em>data visualization</em>.</p>
<p><strong>Yes, there is a learning curve, and many of us just want to get on with our analysis –<br />
but investing in learning R will pay off:</strong></p>
<ul>
<li><p>R gives you greater flexibility to do anything you want.</p></li>
<li><p>A greater reproducibility of scripting vs clicking.</p></li>
<li><p>R is highly interdisciplinary – e.g. nowadays very useful for <strong>analyzing sequencing data</strong>,<br />
but can also be used to create maps and perform GIS analyses, and so on!</p></li>
<li><p>R is more than a platform to perform analysis. When combined with <em>Markdown</em> (a very simple text markup language), you can easily use R to produce reports that integrate code, results, and text, as well as for websites, slide decks, books, and so on!</p></li>
</ul>
<p>Furthermore, R:</p>
<ul>
<li><p>Is freely available on all platforms, and open source.</p></li>
<li><p>Has a large and welcoming user community.</p></li>
</ul>
</div>
<div id="start-an-rstudio-server-session-at-osc" class="section level3">
<h3>Start an RStudio Server session at OSC</h3>
<ul>
<li>Go to <a href="https://ondemand.osc.edu" class="uri">https://ondemand.osc.edu</a>.</li>
<li>In the blue top bar, click the <code>Interactive Apps</code> dropdown menu.</li>
<li>All the way in the bottom of the dropdown, click <code>RStudio Server (Owens and Pitzer)</code>.</li>
<li>In the submission form, keep all the defaults, unless you want to select a particular project, and then click <code>Launch</code>.</li>
<li>Wait until the top bar of the little job box turns green and says “Running”, and then click the blue <code>Connect to RStudio Server</code> button in the bottom of the Box.</li>
<li>You’re in!</li>
</ul>
</div>
<div id="r-vs.-rstudio" class="section level3">
<h3>R vs. RStudio</h3>
<p>R simply provides a “<em>console</em>” to type your commands. However, because you want to save your sequences of commands in scripts, regularly examine output such a graphics, and so on, you can work much more effectively in an environment that provides all of this side-by-side.</p>
<p>We will use RStudio, an excellent “Integrated Development Environment” (IDE) for R. In RStudio, we have a <em>single interface</em> to write code, navigate the files found on our computer, inspect the objects we create, and visualize the plots we generate.</p>
<p>RStudio is divided into 4 “panes”:</p>
<ul>
<li><strong><em>Top-left</em></strong>: The <strong>editor</strong> for your scripts and documents.</li>
<li><strong><em>Bottom-left</em></strong>: The <strong>R console</strong>.</li>
<li><strong><em>Top-right</em></strong>: Your environment/history.</li>
<li><strong><em>Bottom-left</em></strong>: Your files/plots/packages/help/viewer.</li>
</ul>
<p>The placement of these panes and their content can be customized.</p>
<hr />
</div>
</div>
<div id="interacting-with-r" class="section level2">
<h2>Interacting with R</h2>
<div id="r-as-a-calculator" class="section level3">
<h3>R as a calculator</h3>
<p>The lower-left RStudio pane, i.e. <strong>the R console</strong>, is where you can interact with R directly.</p>
<p>The <code>&gt;</code> sign is the R “prompt”. It indicates that R is ready for you to type something.</p>
<p>Let’s start by performing an amazing division:</p>
<pre class="r r_code"><code>203 / 2.54</code></pre>
<pre class="r_output"><code>## [1] 79.92126</code></pre>
<p>R does the calculation and prints the result, and then you get the <code>&gt;</code> prompt again. (The <code>[1]</code> may look a bit weird when there is only one output element; if there were many, it would keep count of them.)</p>
<p>You can generally use R as a calculator in this way, with standard symbols:</p>
<pre class="r r_code"><code>203 * 2.54   # Multiplication</code></pre>
<pre class="r_output"><code>## [1] 515.62</code></pre>
<pre class="r r_code"><code>203 + 2.54   # Addition</code></pre>
<pre class="r_output"><code>## [1] 205.54</code></pre>
</div>
<div id="lets-try-some-random-things" class="section level3">
<h3>Let’s try some random things!</h3>
<pre class="r r_code"><code>         203                     - 2.54</code></pre>
<pre class="r_output"><code>## [1] 200.46</code></pre>
<p>Okay! So R just ignores any extra spaces.</p>
<p><br></p>
<p>How about:</p>
<pre class="r r_code"><code>203 +</code></pre>
<details>
<p><summary> <strong>Now the prompt is a <code>+</code>. What is going on?</strong> </summary></p>
<p>R is waiting for you to finish the command, since you typed an incomplete command: something has to come after the <code>+</code> to be added to what came before.</p>
<p>OK, so this was easy, but in practice, you will type incomplete commands without realizing you did so. Just remember that when you see the <code>+</code> prompt, you are missing something in your command: oftentimes, you have forgotten a closing parenthesis <code>)</code> or accidentally opened up an unwanted opening parenthesis <code>(</code>.</p>
<p>Note also that RStudio will alert you in the script window when you are making syntax errors:</p>
<p align="center">
<img src="img/Rstudio_error.png" style="width:50%; margin-top: 10px; margin-bottom: 10px;"/>
</p>
</details>
<p><br></p>
<p>Now we just type a number:</p>
<pre class="r r_code"><code>203</code></pre>
<pre class="r_output"><code>## [1] 203</code></pre>
<p>R will print the number back to us! It turns out that the default, implicit action that R will perform on anything you type is to print it back to us (it is calling a function called <code>print()</code> under the hood).</p>
<p><br></p>
<p>What if we try that with some text?</p>
<pre class="r r_code"><code>Awesome</code></pre>
<pre class="r_error"><code>## Error in eval(expr, envir, enclos): object &#39;Awesome&#39; not found</code></pre>
<details>
<p><summary> <strong>What seems to be going wrong here?</strong> </summary></p>
<p>Whenever you type a character string, R expects to find an object with that name. (Or, if you would use parentheses after the string, like <code>string()</code>, it will expect a function.)</p>
</details>
<p><br></p>
<p>We <em>can</em> get R to print character strings back to us, and work with them in other ways, as long as we quote the strings:</p>
<pre class="r r_code"><code>&quot;Well, I&#39;m really liking R so far.&quot;</code></pre>
<pre class="r_output"><code>## [1] &quot;Well, I&#39;m really liking R so far.&quot;</code></pre>
<hr />
</div>
</div>
<div id="getting-organized" class="section level2">
<h2>Getting Organized</h2>
<div id="need-for-scripts" class="section level3">
<h3>Need for Scripts</h3>
<p>We can go along like this, typing commands directly into the R console. But there won’t be an easy way to keep track of what we’ve done.</p>
<p>It’s best to write your code in separate files, i.e. “scripts”. And when we start creating scripts, we need to worry about how we organize the scripts and data for a project.</p>
<p>So let’s pause for a moment and talk about file organization.</p>
</div>
<div id="creating-an-rstudio-project" class="section level3">
<h3>Creating an RStudio Project</h3>
<p>It is good practice to keep a set of related data, analyses, and text self-contained in a single folder, and use that folder as the <strong>working directory</strong>.</p>
<p>Then, all of the scripts within this folder can use <em>relative paths</em> to files that indicate where inside the project a file is located (as opposed to <em>absolute paths</em>, which point to where a file is <em>on a specific computer</em>).</p>
<details>
<p><summary> More on absolute vs relative paths </summary></p>
<p>An absolute path always contains the <em>root element</em> (<code>/</code> on Unix systems such as Linux and Mac; typically <code>C:\</code> on Windows) and the complete directory list to locate file. For that reason, if you move a file around on your computer, or move it to a different computer, an absolute path will practically never work. On the other hand, as long as the files remains in the same location, you can refer to it with an absolute path regardless of where you are on your computer.</p>
<pre class="bash r_code"><code>C:\Documents\2020-12_microbiomics-workshop\scripts\intro-to-R.R  # An absolute path

scripts/intro-to-R.R                                             # A relative path</code></pre>
<p><br></p>
<p>A relative path assumes a certain starting point (the “working directory”), so you need to be at the correct starting point for the path to work. On the other hand, if you keep all files associated with a project within a single parent directory, and keep the internal directory structures constant, a relative path will keep working, even if you move the project directory, open it on a different computer, or share it with a collaborator.</p>
<p><strong>You should avoid using absolute paths as much as possible.</strong></p>
<p><em>P.S.: Another point to note is that in R you can (and should) always use a forward slash <code>/</code> to delimit directories, even if you are on a Windows machine.</em></p>
</details>
<p><br></p>
<p>Working this way makes it a lot easier to move your project around on your computer and share it with others without worrying about whether or not the underlying scripts will still work.</p>
<p>A challenge of using relative paths is that you need to make sure you are always at the same starting point (your <em>working directory</em>). RStudio provides a helpful set of tools to do this through its <strong>“Projects”</strong>. When you use a Project, your working directory will <em>always</em> be the top-level directory of that project, and you can safely use relative paths to point to other files.</p>
<p><br></p>
<p><strong>Let’s create an RStudio Project:</strong></p>
<ul>
<li><p>Under the <code>File</code> menu, click on <code>New project</code>, choose <code>Existing directory</code>, then click the <code>Browse</code> and find your 2020-12_microbiomics-workshop folder.</p></li>
<li><p>Click on <code>Create Project</code>.</p></li>
</ul>
<p>Now, RStudio will reload with the newly created Project open. One consequence of this is that your working directory should be the Project’s directory. Let’s see what our working directory is using <code>getwd()</code>:</p>
<pre class="r"><code>getwd()</code></pre>
<p>From now on, we will avoid the temptation (?) to change our working directory, and refer to all files relative to our project’s top-level directory.</p>
</div>
<div id="creating-an-r-script" class="section level3">
<h3>Creating an R script</h3>
<ul>
<li><p>Create a new R script (<code>File</code> &gt; <code>New File</code> &gt; <code>R Script</code>)</p></li>
<li><p>Click <code>File</code> &gt; <code>Save As</code> to save the script.<br />
Save it in your <code>scripts</code> subfolder (e.g. <code>~/2020-12_microbiomics-workshop/scripts/</code>) using the file name <code>intro-to-R.R</code>.</p></li>
</ul>
</div>
<div id="interacting-with-the-r-console-from-your-script" class="section level3">
<h3>Interacting with the R console from your script</h3>
<p>I recommend always <em>typing your commands into a script</em>, which you’ll save for later reference, and then executing the commands from there.</p>
<p>We want to make sure to save our wonderful subtraction, so start by typing the following into the R script in the top-left pane:</p>
<pre class="r r_code"><code># R intro

203 / 2.54</code></pre>
<p>Now place the cursor on the line with <code>20 - 13</code> and type <kbd><code>Ctrl</code></kbd> + <kbd><code>Enter</code></kbd>. The command will be copied to the R console and executed, and then the cursor will move to the next line. (You can also highlight a bunch of code and execute the block all at once with <kbd><code>Ctrl</code></kbd> + <kbd><code>Enter</code></kbd>.)</p>
</div>
<div id="commenting" class="section level3">
<h3>Commenting</h3>
<p>Use <code>#</code> signs to comment. Anything to the right of a <code>#</code> is ignored by R, meaning it won’t be executed. You can use <code>#</code> both at the start of a line or anywhere in the line, after actual code.</p>
<p>Comments are a great way to describe what your code does within the code itself, so comment liberally in your R scripts!</p>
<hr />
</div>
</div>
<div id="objects" class="section level2">
<h2>Objects</h2>
<div id="assigning-stuff-to-objects" class="section level3">
<h3>Assigning stuff to objects</h3>
<p>We can assign pretty much anything to an object with the assignment operator, <code>&lt;-</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. (This is a smaller-than sign <code>&lt;</code> followed by a dash <code>-</code>.) For example:</p>
<pre class="r r_code"><code>wingspan_in &lt;- 203 / 2.54</code></pre>
<p>Type that into your script, and use <kbd><code>Ctrl</code></kbd> + <kbd><code>Enter</code></kbd> to send it to the console.</p>
<p>If you’ve assigned a number to an object, you can then use it in further calculations:</p>
<pre class="r r_code"><code>wingspan_in * 2.54</code></pre>
<pre class="r_output"><code>## [1] 203</code></pre>
</div>
<div id="object-names" class="section level3">
<h3>Object names</h3>
<p>Objects can be given any name such as <code>x</code>, <code>current_temperature</code>, or <code>subject_id</code>.</p>
<p>Some pointers on object names:</p>
<ul>
<li><p>Make them descriptive yet not too long.</p></li>
<li><p>They cannot start with a number (<code>2x</code> is not valid, but <code>x2</code> is)<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p></li>
<li><p>Note: R is case sensitive (e.g., <code>weight</code> is different from <code>Weight</code>).</p></li>
<li><p>A style recommendation is to avoid capital letters (e.g., <code>totalWeight</code>) and dots (<code>total.weight</code>) to separate words. Instead, stick to lowercase, and use underscores (<code>total_weight</code>) to separate words.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p></li>
</ul>
<div class="alert puzzle">
<div id="challenge" class="section level4">
<h4>Challenge</h4>
<p>What is the value of <code>y</code> after doing all of the following?</p>
<pre class="r r_code"><code>x &lt;- 50
y &lt;- x * 2
x &lt;- 80</code></pre>
<details>
<p><summary> Solution (click here) </summary></p>
<p>Objects don’t get linked to each other, so if you change one, it won’t affect the values of any others. Therefore, <code>y</code> will keep the value <code>100</code>.</p>
</details>
</div>
</div>
</div>
<div id="objects-in-your-workspace" class="section level3">
<h3>Objects in your workspace</h3>
<p>The objects you create get added to your “workspace”. You can list the current objects with <code>ls()</code>. RStudio also shows the objects in the Environment panel.</p>
<hr />
</div>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<p>Earlier, we managed to divide <code>20</code> by <code>13</code> and got 1.5384615, but what if we wanted to go even further and <em>round</em> the result? Like for <em>many</em> things you may want to do in R, there is a <strong>function</strong> for that.</p>
<p>Functions are used by typing their name followed by parentheses:</p>
<pre class="r r_code"><code>round(1.538462)</code></pre>
<pre class="r_output"><code>## [1] 2</code></pre>
<p>Here, <code>round()</code> is a <em>function</em> that rounds a number. The value in the parentheses is called a function “argument”, which is used in the execution of the function (usually, the primary argument is converted by the function, like here).</p>
<div id="using-named-arguments" class="section level3">
<h3>Using named arguments</h3>
<p>Functions can have more than one argument, and some of them may have default values.</p>
<p>There are some functions that take many arguments and you can imagine that it might get confusing trying to keep them in order. In that case, it is often better to explicitly name the arguments.</p>
<p>When you type a function name and pause for a moment, the arguments, their names, and their default values (i.e., the value if the argument is left unspecified) will be shown.</p>
<details>
<p><summary> <strong>What is the second argument for <code>round()</code> and what is it default value?</strong> </summary></p>
<p><code>round</code> has a second argument <code>digits</code> whose default is <code>0</code>, such that numbers will be rounded to whole integers.</p>
</details>
<p><br></p>
<p>Below is an example using named arguments with <code>round()</code>. When the arguments are named, the order doesn’t matter! You might also enter the first few important arguments positionally, and later ones by naming them.</p>
<pre class="r r_code"><code>round(x = 1.538462, digits = 2)

round(digits = 2, x = 1.538462)

round(1.538462, digits = 2)</code></pre>
<p><br></p>
<p>Note that we can also directly plug in objects:</p>
<pre class="r"><code>my_number &lt;- 20 / 13
round(my_number)</code></pre>
<p>Or do the initial division inside the function:</p>
<pre class="r"><code>round(20 / 13)</code></pre>
<p>Or nest functions – here we are adding the <code>log()</code> function:</p>
<pre class="r"><code>log(round(20 / 13 ))</code></pre>
<details>
<p><summary> <strong>What is the order of execution in the last command?</strong> </summary></p>
<p><code>round()</code> is executed first, and the output of <code>round()</code> is used as the input of <code>log()</code>.</p>
</details>
<p><br></p>
<hr />
</div>
</div>
<div id="getting-help" class="section level2">
<h2>Getting help</h2>
<p>As we saw, when we typed <code>round</code> and paused for a moment, we got a pop-up with information about the function.</p>
<p>Alternatively, you could type:</p>
<pre class="r r_code"><code>?round</code></pre>
<p>… and the documentation for the function will show up in the lower-right pane.</p>
<p>This documentation is often a bit <em>too</em> detailed, and can be terse, so it takes some practice to read. I generally focus on <em>Usage</em> and <em>Arguments</em>, and then on <em>Examples</em> at the bottom.</p>
<p>Otherwise, for instance when you don’t know a function’s name, or even whether a function may or may not exist, Google is your friend! Try typing “rounding a number in r”, and see if you get useful results.</p>
<hr />
</div>
<div id="vectors" class="section level2">
<h2>Vectors</h2>
<p>A <strong>vector</strong> is the most common and basic data structure in R, and is composed of a <strong>series of values of the same type</strong>.</p>
<p>We can assign a series of values to a vector using the <code>c()</code> function. For example:</p>
<pre class="r r_code"><code>wingspan_cm &lt;- c(11.8, 203, 18.2, 27.9)</code></pre>
<p>A vector can also contain characters – but again, quoting is important, or R will think the strings are objects:</p>
<pre class="r r_code"><code>birds &lt;- c(&quot;hummingbird&quot;, &quot;bald_eagle&quot;, &quot;chickadee&quot;, &quot;cardinal&quot;)</code></pre>
<p><br></p>
<p>As mentioned, all of a vector’s elements are the same type of data. The function <code>class()</code> indicates what kind of data you are working with:</p>
<pre class="r r_code"><code>class(wingspan_cm)</code></pre>
<pre class="r_output"><code>## [1] &quot;numeric&quot;</code></pre>
<pre class="r r_code"><code>class(birds)</code></pre>
<pre class="r_output"><code>## [1] &quot;character&quot;</code></pre>
<div id="data-types-in-r" class="section level3">
<h3>Data types in R</h3>
<p>These classes are different types of <strong>atomic vectors</strong>, R’s simplest <strong>data type</strong>. The 4 most common atomic vector types are:</p>
<ul>
<li><strong><code>"numeric"</code></strong> (or <code>"double"</code>) – floating point numbers</li>
<li><strong><code>"character"</code></strong> – character strings</li>
<li><strong><code>"logical"</code></strong> – <code>TRUE</code> and <code>FALSE</code> (also known as boolean)</li>
<li><strong><code>"integer"</code></strong> – integer numbers</li>
</ul>
<details>
<p><summary> <strong>Vector coercion: when not all elements are of the same type.</strong> </summary></p>
<p>What happens if we try to mix vector types (e.g., “character and numeric”) in a single vector? <strong>R converts them to all be the same type, and it does so without telling us about it.</strong></p>
<p>What will happen in each of the following examples?<br />
(Hint: use <code>class()</code> to check the data type of your objects)</p>
<pre class="r"><code>num_char &lt;- c(1, 2, 3, &quot;a&quot;)

num_logical &lt;- c(1, 2, 3, TRUE)

char_logical &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, TRUE)

tricky &lt;- c(1, 2, 3, &quot;4&quot;)</code></pre>
<p>You’ve probably noticed that objects of different types get converted into a single, shared type within a vector. In R, we call converting objects from one class into another class <em>coercion</em>. These conversions happen according to a hierarchy, whereby some types get preferentially coerced into other types.</p>
</details>
<p><br></p>
</div>
<div id="vectorization" class="section level3">
<h3>Vectorization!</h3>
<p>Let’s say we wanted to convert our wingspans to inches, which means that we need to divide each length in centimeters by 2.54.</p>
<p>How could we do this quickly?</p>
<pre class="r r_code"><code># wingspan_cm &lt;- c(11.8, 203, 18.2, 27.9)  # Still working with the same wingspan vector

wingspan_in &lt;- wingspan_cm / 2.54
wingspan_in</code></pre>
<pre class="r_output"><code>## [1]  4.645669 79.921260  7.165354 10.984252</code></pre>
<details>
<p><summary> <strong>Why does this work?</strong> </summary></p>
<p>R “vectorizes” operations whenever it can. This means that in this case, each element in the vector <code>weights_cm</code> will be divided by 2.54 – this number is “vectorized” or recycled to match the number of weights.</p>
<p>For a programming language, this is unusual behavior – but it is very useful!</p>
</details>
<p><br></p>
<p>Similarly, we can use two vectors of equal length to quickly operate on each element of the vector:</p>
<pre class="r r_code"><code>size_cm &lt;- c(7.62, 90, 13.1, 21.8)

ratio &lt;- wingspan_cm / size_cm
ratio</code></pre>
<pre class="r_output"><code>## [1] 1.548556 2.255556 1.389313 1.279817</code></pre>
<p><br></p>
</div>
<div id="data-structures-in-r" class="section level3">
<h3>Data structures in R</h3>
<p>While vectors can be composed of one of several <em>data types</em>, they, in turn, are one of several <strong>data structures</strong> that R uses. Other important ones are:</p>
<ul>
<li><strong><code>data.frame</code></strong> – A rectangular data structure where each column can be a different data type.</li>
<li><strong><code>matrix</code></strong> – A rectangular data structure of a single data type.</li>
<li><strong><code>list</code></strong> – A very flexible data structure that we will not further discuss here.</li>
<li><strong><code>factor</code></strong> – Character strings with a discrete set of possible values, used mostly for statistical tests and when plotting.</li>
</ul>
<hr />
</div>
</div>
<div id="data-frames" class="section level2">
<h2>Data Frames</h2>
<p>A data frame (formal object type: <code>data.frame</code>) is a rectangular data structure in which rows are observations and columns are variables. Each column can be of a different type (numeric, character, etc.), but since each column is a vector, all the cells within a column are of the same type. Also, due to the rectangular structure, all columns have the same length.</p>
<div id="create-write-and-read-a-data-frame" class="section level3">
<h3>Create, write, and read a data frame</h3>
<p>We can easily create a data frame by hand using the <code>data.frame()</code> function and a <code>column_name = column_vector</code> notation for each column:</p>
<pre class="r r_code"><code>birds_df &lt;- data.frame(species = birds,
                       wingspan = wingspan_cm,
                       size = size_cm,
                       n_eggs = c(2, 2, 7, 4)) </code></pre>
<p>Most often, however, you’ll be reading your data frames from files. And you’ll also want to save your modified data frames.</p>
<p>So let’s practice writing and reading a data frame:</p>
<pre class="r r_code"><code># Write a data frame to CSV format:
write.csv(x = birds_df, file = &quot;bird-data.csv&quot;, row.names = FALSE)</code></pre>
<p>Now we read our data frame back in:</p>
<pre class="r r_code"><code>birds_df_2 &lt;- read.csv(&#39;bird-data.csv&#39;)

## Let&#39;s compare the two data frames:
birds_df

birds_df_2</code></pre>
</div>
<div id="inspecting-a-data-frame" class="section level3">
<h3>Inspecting a Data Frame</h3>
<p>Use <code>str()</code> to look at the structure of the data.</p>
<pre class="r r_code"><code>str(birds_df)</code></pre>
<p>This shows that there are 34,786 rows and 13 columns, and then for each column, it gives information about the data type and shows the first few values.</p>
<p>Another useful function is <code>summary()</code>.</p>
<pre class="r r_code"><code>summary(birds_df)</code></pre>
<p>Finally, in RStudio, we can click on an object in the <code>Files</code> pane, or equivalently, type:</p>
<pre class="r r_code"><code>View(birds_df)</code></pre>
</div>
<div id="an-overview-of-functions-to-get-an-overview" class="section level3">
<h3>An Overview of Functions to Get an Overview</h3>
<ul>
<li><strong>Size:</strong>
<ul>
<li><code>dim()</code> – returns a vector with the number of rows in the first element, and the number of columns as the second element (the __dim__ensions of the object)</li>
<li><code>nrow()</code> – returns the number of rows</li>
<li><code>ncol()</code> – returns the number of columns</li>
<li><code>length()</code> – for a dataframe, returns the number of columns. Very commonly used for vectors, for which it will return the number of elements.</li>
</ul></li>
<li><strong>Content:</strong>
<ul>
<li><code>head()</code> – shows the first 6 rows</li>
<li><code>tail()</code> – shows the last 6 rows</li>
</ul></li>
<li><strong>Names:</strong>
<ul>
<li><code>names()</code> – returns the column names (synonym of <code>colnames()</code> for <code>data.frame</code> objects)</li>
<li><code>rownames()</code> – returns the row names</li>
</ul></li>
<li><strong>Summary:</strong>
<ul>
<li><code>str()</code> – structure of the object and information about the class, length and content of each column</li>
<li><code>summary()</code> – summary statistics for each column</li>
<li><code>skimr::skim()</code> – very nice summary, need to install <em>skimr</em> with <code>install.packages(skimr)</code>.</li>
</ul></li>
</ul>
<hr />
</div>
</div>
<div id="miscellaneous" class="section level2">
<h2>Miscellaneous</h2>
<div id="missing-data" class="section level3">
<h3>Missing data</h3>
<p>As R was designed to analyze datasets, it includes the concept of missing data (which is uncommon in other programming languages). Missing data are represented as <code>NA</code> (for “Not Available”).</p>
<pre class="r r_code"><code>heights &lt;- c(2, 4, 4, NA, 6)</code></pre>
<p>When doing operations on numbers, most functions will return <code>NA</code> if the data you are working with include missing values. It is a safer behavior as otherwise you may overlook that you are dealing with missing data. You can add the argument <code>na.rm=TRUE</code> to calculate the result while ignoring the missing values.</p>
<pre class="r r_code"><code>mean(heights)

mean(heights, na.rm = TRUE)</code></pre>
<p><br></p>
<p>If your data includes missing values, you may want to become familiar with the functions <code>is.na()</code> and <code>na.omit()</code>.</p>
<pre class="r r_code"><code>## Extract those elements which are not missing values:
heights[!is.na(heights)]

## Shortcut to do the same:
na.omit(heights)</code></pre>
</div>
<div id="packages" class="section level3">
<h3>Packages</h3>
<p>The functions that we have been using so far (and <em>many</em>, <em>many</em> more) are available in any R session as soon as you start R (we refer to this functionality as <em>“base R”</em>). However, when doing specialized analyses such as in microbiomics, rather than coding up everything using the basic building blocks in R, we can load add-on code that will allow us to use <em>“high-level”</em> functions specifically geared towards the effective analyses of such data.</p>
<p>This type of add-on code is distributed in R <em>packages</em>. The default <em>repository</em> for R packages is <strong>CRAN</strong>. The packages on CRAN have undergone a certain level of vetting, and can be easily installed with <code>install.packages()</code> function, for instance:</p>
<pre class="r r_code"><code>install.packages(&quot;tidyverse&quot;)</code></pre>
<p>If you’re doing bioinformatic analyses in R, as we will be doing, you will encounter packages that are not on CRAN but are on “Bioconductor”. To install a package from Bioconductor, use the BiocManager package – for example:</p>
<pre class="r r_code"><code>install.packages(&quot;BiocManager&quot;)  # Install the BiocManager package
BiocManager::install(&quot;dada2&quot;)    # Install the edgeR package from Bioconductor</code></pre>
</div>
<div id="s4-objects" class="section level3">
<h3>S4 Objects</h3>
<p>“S4” objects are most certainly an advanced R topic, but because many bioinformatics packages use them, we will briefly discuss them here. In a nutshell, S4 objects allow for complicated, multifaceted datasets (such as multiple dataframes with distinct but related data as well as with metadata) to be represented in a single object.</p>
<p><span style="color: #eb4034">TODO: EXPAND</span></p>
</div>
<div id="saving-your-data" class="section level3">
<h3>Saving your data</h3>
<p>Some very brief notes on saving your data in R:</p>
<ul>
<li><p>We already saw the use of <code>write.csv()</code> to save data frames, and you can also use one of <em>readr</em>’s <a href="https://readr.tidyverse.org/reference/write_delim.html">writing functions</a>.</p></li>
<li><p>To save R objects “as is”, which can be useful when you’re working with complex S4 objects that may have taken a long time to generate, like a <em>phyloseq object</em>, you can use:</p>
<pre class="r r_code"><code># Save an object:
saveRDS(my_phyloseq_object, &quot;my_phyloseq_object.RDS&quot;)

# Load it again in a new R session:
my_phyloseq_object &lt;- readRDS(&quot;my_phyloseq_object.RDS&quot;)</code></pre></li>
<li><p>A general recommendation is to not rely on your R session to keep things around, especially “overnight”. Devise your workflow such that you are always saving important objects and results outside of R, and can always use your R script to restart from where you left off.</p></li>
</ul>
<hr />
</div>
</div>
<div id="where-to-go-from-here" class="section level2">
<h2>Where to go from here</h2>
<p>This document only scratched the surface of R, but it has hopefully provided a good starting point for working with R.</p>
<p>My recommendations on where to go from here would be exactly the same regardless of whether you just wanted to make general progress with R, or wanted learn R things that you can apply when working with microbiomics packages. They are:</p>
<ol style="list-style-type: decimal">
<li><p>Learn about data wrangling with tidyverse packages, especially <em>dplyr</em> and <em>tidyr</em>. Start <a href="https://datacarpentry.org/R-ecology-lesson/03-dplyr.html">here</a></p></li>
<li><p>Learn about plotting with <em>ggplot2</em>. Start <a href="https://datacarpentry.org/R-ecology-lesson/04-visualization-ggplot2.html">here</a></p></li>
</ol>
<p>Both of those topics and some other material are also covered in this excellent Carpentries workshop <a href="https://swcarpentry.github.io/r-novice-gapminder/">R for Reproducible Scientific Analysis</a>.</p>
<p>If you want to start with a book, I would recommend Wickham &amp; Grolemund’s “R for Data Science”, which is freely available on the web in a really nice format <a href="https://r4ds.had.co.nz/">here</a>.</p>
<hr />
</div>
<div id="bonus-material-subsetting" class="section level2">
<h2>Bonus Material: Subsetting</h2>
<div id="basic-subsetting-of-data-frames-and-vectors" class="section level3">
<h3>Basic subsetting of data frames and vectors</h3>
<p>We can pull out parts of a data frame using square brackets. We need to provide two values: row and column, with a comma between them.</p>
<p>For example, to get the element in the 1st row, 1st column:</p>
<pre class="r r_code"><code>surveys[1, 1]</code></pre>
<p>To get the element in the 2nd row, 7th column:</p>
<pre class="r r_code"><code>surveys[2, 7]</code></pre>
<p>To get the entire 2nd row, leave the column part blank:</p>
<pre class="r r_code"><code>surveys[2, ]</code></pre>
<p>And to get the entire 7th column, leave the row part blank:</p>
<pre class="r r_code"><code>sex &lt;- surveys[, 7]</code></pre>
<p>You can also refer to columns by name, in multiple ways:</p>
<pre class="r r_code"><code>sex &lt;- surveys$sex       # Very commonly used syntax!

sex &lt;- surveys[, &quot;sex&quot;]</code></pre>
<p>When we pull out a single column, the result is a <em>vector</em>. To pull out individual values from a vector, we can again use square brackets, but now we only provide a single number:</p>
<pre class="r r_code"><code>sex[1]
sex[10000]</code></pre>
</div>
<div id="slicing" class="section level3">
<h3>Slicing</h3>
<p>You can pull out larger slices from the vector by providing vectors of indices:</p>
<pre class="r r_code"><code>sex[c(1,3,5)]</code></pre>
<p>The <code>:</code> operator gives you a sequence of consecutive values, which you can also using for slicing:</p>
<pre class="r r_code"><code>surveys[1:3, ]        # First three rows, all columns
surveys[1, 1:3]       # First row, first three columns
surveys[2:4, c(6, 8)] # Rows 2-4, columns 6 and 8</code></pre>
</div>
<div id="conditional-subsetting" class="section level3">
<h3>Conditional subsetting</h3>
<p>Another common way of subsetting is by using a logical vector. <code>TRUE</code> will select the element with the same index, while <code>FALSE</code> will not:</p>
<pre class="r r_code"><code>weight_g &lt;- c(21, 34, 39, 54, 55)
weight_g[c(TRUE, FALSE, FALSE, TRUE, TRUE)]</code></pre>
<p>Typically, these logical vectors are not typed by hand, but are the output of other functions or logical tests. For instance, if you wanted to select only the values above 50:</p>
<pre class="r r_code"><code>weight_g &gt; 50    # will return logicals with TRUE for the indices that meet the condition
## so we can use this to select only the values above 50
weight_g[weight_g &gt; 50]</code></pre>
<p>You can combine multiple tests using <code>&amp;</code> (both conditions are true, AND) or <code>|</code> (at least one of the conditions is true, OR):</p>
<pre class="r r_code"><code>weight_g[weight_g &gt; 30 &amp; weight_g &lt; 50]
weight_g[weight_g &lt;= 30 | weight_g == 55]
weight_g[weight_g &gt;= 30 &amp; weight_g == 21]</code></pre>
<p>Here, <code>&gt;</code> for “greater than”, <code>&lt;</code> stands for “less than”, <code>&lt;=</code> for “less than or equal to”, and <code>==</code> for “equal to”. The double equal sign <code>==</code> is a test for numerical equality between the left and right hand sides, and should not be confused with the single <code>=</code> sign, which performs variable assignment (similar to <code>&lt;-</code>).</p>
<p>A common task is to search for certain strings in a vector. One could use the “or” operator <code>|</code> to test for equality to multiple values, but this can quickly become tedious. The function <code>%in%</code> allows you to test if any of the elements of a search vector are found:</p>
<pre class="r r_code"><code>animals &lt;- c(&quot;mouse&quot;, &quot;rat&quot;, &quot;dog&quot;, &quot;cat&quot;, &quot;cat&quot;)

# return both rat and cat
animals[animals == &quot;cat&quot; | animals == &quot;rat&quot;] 
animals[animals %in% c(&quot;cat&quot;, &quot;rat&quot;)] </code></pre>
<p><br> <br></p>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>In RStudio, typing <kbd>Alt</kbd> + <kbd>-</kbd> will write <code>&lt;-</code> in a single keystroke. You can also use <code>=</code> as assignment, but that symbol can have other meanings, and so I recommend sticking with the <code>&lt;-</code> combination.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>There are some names that cannot be used because they are the names of fundamental functions in R (e.g., <code>if</code>, <code>else</code>, <code>for</code>, see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html">here</a> for a complete list). In general, even if it’s allowed, it’s best to not use other function names (e.g., <code>c</code>, <code>T</code>, <code>mean</code>, <code>data</code>, <code>df</code>, <code>weights</code>). In doubt check the help to see if the name is already in use.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>It is also recommended to use nouns for variable names, and verbs for function names. It’s important to be consistent in the styling of your code (where you put spaces, how you name variables, etc.). In R, two popular style guides are <a href="http://adv-r.had.co.nz/Style.html">Hadley Wickham’s</a> and <a href="https://google.github.io/styleguide/Rguide.xml">Google’s</a>.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiPGJyPkFuIEludHJvZHVjdGlvbiB0byBSIgpvdXRwdXQ6CiAgcm1hcmtkb3duOjpodG1sX2RvY3VtZW50OgogICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgdGhlbWU6IGNlcnVsZWFuCiAgICB0b2M6IHRydWUKICAgIHRvY19mbG9hdDogdHJ1ZQogICAgY3NzOiBteS5jc3MKLS0tCgpgYGB7ciBrbml0cl9vcHRpb25zLCBlY2hvPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQocmVzdWx0cz0naGlkZScsCiAgICAgICAgICAgICAgICAgICAgICBldmFsID0gRkFMU0UsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzcy5zb3VyY2U9InJfY29kZSIsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzcy5vdXRwdXQ9InJfb3V0cHV0IiwKICAgICAgICAgICAgICAgICAgICAgIGNsYXNzLndhcm5pbmc9InJfd2FybmluZyIsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzcy5tZXNzYWdlPSJyX3dhcm5pbmciLAogICAgICAgICAgICAgICAgICAgICAgY2xhc3MuZXJyb3I9InJfZXJyb3IiKQoKZm9sZGVyX25hbWUgPC0gIjIwMjAtMTJfbWljcm9iaW9taWNzLXdvcmtzaG9wIgpgYGAKCmBgYHtyIGtsaXBweSwgZWNobz1GQUxTRSwgaW5jbHVkZT1UUlVFfQprbGlwcHk6OmtsaXBweShwb3NpdGlvbiA9ICdyaWdodCcsCiAgICAgICAgICAgICAgIHRvb2x0aXBfbWVzc2FnZSA9ICJDb3B5IGNvZGUgdG8gY2xpcGJvYXJkIiwKICAgICAgICAgICAgICAgdG9vbHRpcF9zdWNjZXNzID0gIkNvcGllZCEiKQpgYGAKCjxicj4KCj4gIyMgTGVhcm5pbmcgT2JqZWN0aXZlcwo+Cj4gKiBHZXQgc29tZSBiYXNpYyBmYW1pbGlhcml0eSB3aXRoIFIgYW5kIFJTdHVkaW8KPiAqIExlYXJuIGhvdyBhbmQgd2h5IHRvIHVzZSBSU3R1ZGlvIFByb2plY3RzCj4gKiBVbmRlcnN0YW5kIG9iamVjdHMsIGZ1bmN0aW9ucywgYW5kIGhvdyB0byB1c2UgdGhlbQo+ICogVW5kZXJzdGFuZCB0aGUgY29uY2VwdHMgb2YgYHZlY3RvcmAgYW5kIGBkYXRhLmZyYW1lYAo+ICogRXhwbG9yZSB0aGUgc3RydWN0dXJlIGFuZCB0aGUgY29udGVudCBvZiBhIGBkYXRhLmZyYW1lYAo+ICogTGVhcm4gYWJvdXQgaG93IFIgaGFuZGxlcyBtaXNzaW5nIGRhdGEKCi0tLS0tLS0tLS0tLQoKIyMgQmVmb3JlIHdlIHN0YXJ0CgojIyMgQXR0cmlidXRpb24KClRoaXMgbWF0ZXJpYWwgd2FzIG1vZGlmaWVkIGFmdGVyIG1hdGVyaWFsIGZyb20gW1RoZSBDYXJwZW50cmllc10oaHR0cHM6Ly9jYXJwZW50cmllcy5vcmcvKSwKZXNwZWNpYWxseSBmcm9tIFt0aGlzIERhdGEgQ2FycGVudHJ5IHdvcmtzaG9wXShodHRwOi8vdXctbWFkaXNvbi1hY2kuZ2l0aHViLmlvLzIwMTYtMDYtMDEtdXdtYWRpc29uLykKYW5kIFt0aGlzICJSIGZvciBFY29sb2d5IiB3b3Jrc2hvcF0oaHR0cHM6Ly9kYXRhY2FycGVudHJ5Lm9yZy9SLWVjb2xvZ3ktbGVzc29uKS4KCiMjIyBOb3RlcyBvbiBUZXJtaW5vbG9neQoKLSBUaGUgdGVybXMgImRpcmVjdG9yeSIgYW5kICJmb2xkZXIiIGFyZSB1c2VkIGludGVyY2hhbmdlYWJseS4KCiMjIyBXaHkgUj8KClIgaXMgYSB2ZXJzYXRpbGUsIG9wZW4gc291cmNlIHByb2dyYW1taW5nL3NjcmlwdGluZyBsYW5ndWFnZSB0aGF0J3MgcGFydGljdWxhcmx5CnVzZWZ1bCBmb3IgKnN0YXRpc3RpY3MqIGFuZCAqZGF0YSB2aXN1YWxpemF0aW9uKi4KCioqWWVzLCB0aGVyZSBpcyBhIGxlYXJuaW5nIGN1cnZlLCBhbmQgbWFueSBvZiB1cyBqdXN0IHdhbnQgdG8gZ2V0IG9uIHdpdGggb3VyIGFuYWx5c2lzIC0tICAgIApidXQgaW52ZXN0aW5nIGluIGxlYXJuaW5nIFIgd2lsbCBwYXkgb2ZmOioqCgotIFIgZ2l2ZXMgeW91IGdyZWF0ZXIgZmxleGliaWxpdHkgdG8gZG8gYW55dGhpbmcgeW91IHdhbnQuCgotIEEgZ3JlYXRlciByZXByb2R1Y2liaWxpdHkgb2Ygc2NyaXB0aW5nIHZzIGNsaWNraW5nLgoKLSBSIGlzIGhpZ2hseSBpbnRlcmRpc2NpcGxpbmFyeSAtLSBlLmcuIG5vd2FkYXlzIHZlcnkgdXNlZnVsIGZvciAqKmFuYWx5emluZyBzZXF1ZW5jaW5nIGRhdGEqKiwgIAogIGJ1dCBjYW4gYWxzbyBiZSB1c2VkIHRvIGNyZWF0ZSBtYXBzIGFuZCBwZXJmb3JtIEdJUyBhbmFseXNlcywgYW5kIHNvIG9uIQoKLSBSIGlzIG1vcmUgdGhhbiBhIHBsYXRmb3JtIHRvIHBlcmZvcm0gYW5hbHlzaXMuCiAgV2hlbiBjb21iaW5lZCB3aXRoICpNYXJrZG93biogKGEgdmVyeSBzaW1wbGUgdGV4dCBtYXJrdXAgbGFuZ3VhZ2UpLAogIHlvdSBjYW4gZWFzaWx5IHVzZSBSIHRvIHByb2R1Y2UgcmVwb3J0cyB0aGF0IGludGVncmF0ZSBjb2RlLCByZXN1bHRzLCBhbmQgdGV4dCwKICBhcyB3ZWxsIGFzIGZvciB3ZWJzaXRlcywgc2xpZGUgZGVja3MsIGJvb2tzLCBhbmQgc28gb24hCgpGdXJ0aGVybW9yZSwgUjoKCi0gSXMgZnJlZWx5IGF2YWlsYWJsZSBvbiBhbGwgcGxhdGZvcm1zLCBhbmQgb3BlbiBzb3VyY2UuCgotIEhhcyBhIGxhcmdlIGFuZCB3ZWxjb21pbmcgdXNlciBjb21tdW5pdHkuCgojIyMgU3RhcnQgYW4gUlN0dWRpbyBTZXJ2ZXIgc2Vzc2lvbiBhdCBPU0MKCi0gR28gdG8gPGh0dHBzOi8vb25kZW1hbmQub3NjLmVkdT4uCi0gSW4gdGhlIGJsdWUgdG9wIGJhciwgY2xpY2sgdGhlIGBJbnRlcmFjdGl2ZSBBcHBzYCBkcm9wZG93biBtZW51LgotIEFsbCB0aGUgd2F5IGluIHRoZSBib3R0b20gb2YgdGhlIGRyb3Bkb3duLCBjbGljayBgUlN0dWRpbyBTZXJ2ZXIgKE93ZW5zIGFuZCBQaXR6ZXIpYC4KLSBJbiB0aGUgc3VibWlzc2lvbiBmb3JtLCBrZWVwIGFsbCB0aGUgZGVmYXVsdHMsIHVubGVzcyB5b3Ugd2FudCB0byBzZWxlY3QKICBhIHBhcnRpY3VsYXIgcHJvamVjdCwgYW5kIHRoZW4gY2xpY2sgYExhdW5jaGAuCi0gV2FpdCB1bnRpbCB0aGUgdG9wIGJhciBvZiB0aGUgbGl0dGxlIGpvYiBib3ggdHVybnMgZ3JlZW4gYW5kIHNheXMgIlJ1bm5pbmciLAogIGFuZCB0aGVuIGNsaWNrIHRoZSBibHVlIGBDb25uZWN0IHRvIFJTdHVkaW8gU2VydmVyYCBidXR0b24gaW4gdGhlIGJvdHRvbSBvZiB0aGUgQm94LgotIFlvdSdyZSBpbiEKCiMjIyBSIHZzLiBSU3R1ZGlvCgpSIHNpbXBseSBwcm92aWRlcyBhICIqY29uc29sZSoiIHRvIHR5cGUgeW91ciBjb21tYW5kcy4KSG93ZXZlciwgYmVjYXVzZSB5b3Ugd2FudCB0byBzYXZlIHlvdXIgc2VxdWVuY2VzIG9mIGNvbW1hbmRzIGluIHNjcmlwdHMsCnJlZ3VsYXJseSBleGFtaW5lIG91dHB1dCBzdWNoIGEgZ3JhcGhpY3MsIGFuZCBzbyBvbiwKeW91IGNhbiB3b3JrIG11Y2ggbW9yZSBlZmZlY3RpdmVseSBpbiBhbiBlbnZpcm9ubWVudCB0aGF0IHByb3ZpZGVzIGFsbCBvZiB0aGlzCnNpZGUtYnktc2lkZS4KCldlIHdpbGwgdXNlIFJTdHVkaW8sIGFuIGV4Y2VsbGVudCAiSW50ZWdyYXRlZCBEZXZlbG9wbWVudCBFbnZpcm9ubWVudCIgKElERSkgZm9yIFIuCkluIFJTdHVkaW8sIHdlIGhhdmUgYSAqc2luZ2xlIGludGVyZmFjZSogdG8gd3JpdGUgY29kZSwgbmF2aWdhdGUgdGhlIGZpbGVzIGZvdW5kIG9uIG91ciBjb21wdXRlciwKaW5zcGVjdCB0aGUgb2JqZWN0cyB3ZSBjcmVhdGUsIGFuZCB2aXN1YWxpemUgdGhlIHBsb3RzIHdlIGdlbmVyYXRlLgoKUlN0dWRpbyBpcyBkaXZpZGVkIGludG8gNCAicGFuZXMiOgoKLSAqKl9Ub3AtbGVmdF8qKjogVGhlICoqZWRpdG9yKiogZm9yIHlvdXIgc2NyaXB0cyBhbmQgZG9jdW1lbnRzLgotICoqX0JvdHRvbS1sZWZ0XyoqOiBUaGUgKipSIGNvbnNvbGUqKi4KLSAqKl9Ub3AtcmlnaHRfKio6IFlvdXIgZW52aXJvbm1lbnQvaGlzdG9yeS4KLSAqKl9Cb3R0b20tbGVmdF8qKjogWW91ciBmaWxlcy9wbG90cy9wYWNrYWdlcy9oZWxwL3ZpZXdlci4KICAKVGhlIHBsYWNlbWVudCBvZiB0aGVzZSBwYW5lcyBhbmQgdGhlaXIgY29udGVudCBjYW4gYmUgY3VzdG9taXplZC4KCgotLS0tLQoKIyMgSW50ZXJhY3Rpbmcgd2l0aCBSCgojIyMgUiBhcyBhIGNhbGN1bGF0b3IKClRoZSBsb3dlci1sZWZ0IFJTdHVkaW8gcGFuZSwgaS5lLiAqKnRoZSBSIGNvbnNvbGUqKiwKaXMgd2hlcmUgeW91IGNhbiBpbnRlcmFjdCB3aXRoIFIgZGlyZWN0bHkuCgpUaGUgYD5gIHNpZ24gaXMgdGhlIFIgInByb21wdCIuCkl0IGluZGljYXRlcyB0aGF0IFIgaXMgcmVhZHkgZm9yIHlvdSB0byB0eXBlIHNvbWV0aGluZy4KCkxldCdzIHN0YXJ0IGJ5IHBlcmZvcm1pbmcgYW4gYW1hemluZyBkaXZpc2lvbjoKCmBgYHtyIGFkZCwgZXZhbD1UUlVFLCByZXN1bHRzPSdzaG93J30KMjAzIC8gMi41NApgYGAKClIgZG9lcyB0aGUgY2FsY3VsYXRpb24gYW5kIHByaW50cyB0aGUgcmVzdWx0LCBhbmQgdGhlbiB5b3UgZ2V0IHRoZSBgPmAgcHJvbXB0IGFnYWluLgooVGhlIGBbMV1gIG1heSBsb29rIGEgYml0IHdlaXJkIHdoZW4gdGhlcmUgaXMgb25seSBvbmUgb3V0cHV0IGVsZW1lbnQ7IAppZiB0aGVyZSB3ZXJlIG1hbnksIGl0IHdvdWxkIGtlZXAgY291bnQgb2YgdGhlbS4pCgpZb3UgY2FuIGdlbmVyYWxseSB1c2UgUiBhcyBhIGNhbGN1bGF0b3IgaW4gdGhpcyB3YXksIHdpdGggc3RhbmRhcmQgc3ltYm9sczoKCmBgYHtyIGNhbGN1bGF0aW9ucywgZXZhbCA9IFRSVUUsIHJlc3VsdHM9J3Nob3cnfQoyMDMgKiAyLjU0ICAgIyBNdWx0aXBsaWNhdGlvbgoyMDMgKyAyLjU0ICAgIyBBZGRpdGlvbgpgYGAKCgojIyMgTGV0J3MgdHJ5IHNvbWUgcmFuZG9tIHRoaW5ncyEKCmBgYHtyIHNwYWNlLCBldmFsPVRSVUUsIHJlc3VsdHM9InNob3cifQogICAgICAgICAyMDMgICAgICAgICAgICAgICAgICAgICAtIDIuNTQKYGBgCgpPa2F5ISBTbyBSIGp1c3QgaWdub3JlcyBhbnkgZXh0cmEgc3BhY2VzLgoKPGJyPgoKSG93IGFib3V0OgoKYGBge3IgaGFuZ2luZ19wcm9tcHR9CjIwMyArCmBgYAoKPGRldGFpbHM+Cgo8c3VtbWFyeT4KKipOb3cgdGhlIHByb21wdCBpcyBhIGArYC4gV2hhdCBpcyBnb2luZyBvbj8qKgo8L3N1bW1hcnk+CgpSIGlzIHdhaXRpbmcgZm9yIHlvdSB0byBmaW5pc2ggdGhlIGNvbW1hbmQsIHNpbmNlIHlvdSB0eXBlZCBhbiBpbmNvbXBsZXRlIGNvbW1hbmQ6CnNvbWV0aGluZyBoYXMgdG8gY29tZSBhZnRlciB0aGUgYCtgIHRvIGJlIGFkZGVkIHRvIHdoYXQgY2FtZSBiZWZvcmUuCgpPSywgc28gdGhpcyB3YXMgZWFzeSwgYnV0IGluIHByYWN0aWNlLAp5b3Ugd2lsbCB0eXBlIGluY29tcGxldGUgY29tbWFuZHMgd2l0aG91dCByZWFsaXppbmcgeW91IGRpZCBzby4KSnVzdCByZW1lbWJlciB0aGF0IHdoZW4geW91IHNlZSB0aGUgYCtgIHByb21wdCwKeW91IGFyZSBtaXNzaW5nIHNvbWV0aGluZyBpbiB5b3VyIGNvbW1hbmQ6Cm9mdGVudGltZXMsIHlvdSBoYXZlIGZvcmdvdHRlbiBhIGNsb3NpbmcgcGFyZW50aGVzaXMgYClgCm9yIGFjY2lkZW50YWxseSBvcGVuZWQgdXAgYW4gdW53YW50ZWQgb3BlbmluZyBwYXJlbnRoZXNpcyBgKGAuCgpOb3RlIGFsc28gdGhhdCBSU3R1ZGlvIHdpbGwgYWxlcnQgeW91IGluIHRoZSBzY3JpcHQgd2luZG93IHdoZW4geW91IGFyZSBtYWtpbmcgc3ludGF4IGVycm9yczoKCjxwIGFsaWduPSJjZW50ZXIiPgo8aW1nIHNyYz0iaW1nL1JzdHVkaW9fZXJyb3IucG5nIiBzdHlsZT0id2lkdGg6NTAlOyBtYXJnaW4tdG9wOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyIvPgo8L3A+Cgo8L2RldGFpbHM+Cgo8YnI+CgpOb3cgd2UganVzdCB0eXBlIGEgbnVtYmVyOgoKYGBge3IgbnVtYmVyLCBldmFsPVRSVUUsIHJlc3VsdHM9J3Nob3cnfQoyMDMKYGBgCgpSIHdpbGwgcHJpbnQgdGhlIG51bWJlciBiYWNrIHRvIHVzIQpJdCB0dXJucyBvdXQgdGhhdCB0aGUgZGVmYXVsdCwgaW1wbGljaXQgYWN0aW9uIHRoYXQgUiB3aWxsIHBlcmZvcm0Kb24gYW55dGhpbmcgeW91IHR5cGUgaXMgdG8gcHJpbnQgaXQgYmFjayB0byB1cwooaXQgaXMgY2FsbGluZyBhIGZ1bmN0aW9uIGNhbGxlZCBgcHJpbnQoKWAgdW5kZXIgdGhlIGhvb2QpLgoKPGJyPgoKV2hhdCBpZiB3ZSB0cnkgdGhhdCB3aXRoIHNvbWUgdGV4dD8KCmBgYHtyIGdpYmJlcmlzaCwgZXZhbD1UUlVFLCByZXN1bHRzPSdzaG93JywgZXJyb3I9VFJVRX0KQXdlc29tZQpgYGAKCgo8ZGV0YWlscz4KPHN1bW1hcnk+CioqV2hhdCBzZWVtcyB0byBiZSBnb2luZyB3cm9uZyBoZXJlPyoqCjwvc3VtbWFyeT4KCldoZW5ldmVyIHlvdSB0eXBlIGEgY2hhcmFjdGVyIHN0cmluZywgUiBleHBlY3RzIHRvIGZpbmQgYW4gb2JqZWN0IHdpdGggdGhhdCBuYW1lLgooT3IsIGlmIHlvdSB3b3VsZCB1c2UgcGFyZW50aGVzZXMgYWZ0ZXIgdGhlIHN0cmluZywgbGlrZSBgc3RyaW5nKClgLAppdCB3aWxsIGV4cGVjdCBhIGZ1bmN0aW9uLikKCjwvZGV0YWlscz4KCjxicj4KCgpXZSAqY2FuKiBnZXQgUiB0byBwcmludCBjaGFyYWN0ZXIgc3RyaW5ncyBiYWNrIHRvIHVzLAphbmQgd29yayB3aXRoIHRoZW0gaW4gb3RoZXIgd2F5cywgYXMgbG9uZyBhcyB3ZSBxdW90ZSB0aGUgc3RyaW5nczoKCmBgYHtyIHByaW50X2NoYXIsIGV2YWw9VFJVRSwgcmVzdWx0cz0nc2hvdyd9CiJXZWxsLCBJJ20gcmVhbGx5IGxpa2luZyBSIHNvIGZhci4iCmBgYAoKLS0tLQoKIyMgR2V0dGluZyBPcmdhbml6ZWQKCiMjIyBOZWVkIGZvciBTY3JpcHRzCgpXZSBjYW4gZ28gYWxvbmcgbGlrZSB0aGlzLCB0eXBpbmcgY29tbWFuZHMgZGlyZWN0bHkgaW50byB0aGUgUiBjb25zb2xlLgpCdXQgdGhlcmUgd29uJ3QgYmUgYW4gZWFzeSB3YXkgdG8ga2VlcCB0cmFjayBvZiB3aGF0IHdlJ3ZlIGRvbmUuCgpJdCdzIGJlc3QgdG8gd3JpdGUgeW91ciBjb2RlIGluIHNlcGFyYXRlIGZpbGVzLCBpLmUuICJzY3JpcHRzIi4KQW5kIHdoZW4gd2Ugc3RhcnQgY3JlYXRpbmcgc2NyaXB0cywgd2UgbmVlZCB0byB3b3JyeSBhYm91dCBob3cgd2UKb3JnYW5pemUgdGhlIHNjcmlwdHMgYW5kIGRhdGEgZm9yIGEgcHJvamVjdC4KClNvIGxldCdzIHBhdXNlIGZvciBhIG1vbWVudCBhbmQgdGFsayBhYm91dCBmaWxlIG9yZ2FuaXphdGlvbi4KCiMjIyBDcmVhdGluZyBhbiBSU3R1ZGlvIFByb2plY3QKCkl0IGlzIGdvb2QgcHJhY3RpY2UgdG8ga2VlcCBhIHNldCBvZiByZWxhdGVkIGRhdGEsIGFuYWx5c2VzLCBhbmQgdGV4dApzZWxmLWNvbnRhaW5lZCBpbiBhIHNpbmdsZSBmb2xkZXIsCmFuZCB1c2UgdGhhdCBmb2xkZXIgYXMgdGhlICoqd29ya2luZyBkaXJlY3RvcnkqKi4KClRoZW4sIGFsbCBvZiB0aGUgc2NyaXB0cyB3aXRoaW4gdGhpcyBmb2xkZXIgY2FuIHVzZSAqcmVsYXRpdmUgcGF0aHMqIHRvIGZpbGVzCnRoYXQgaW5kaWNhdGUgd2hlcmUgaW5zaWRlIHRoZSBwcm9qZWN0IGEgZmlsZSBpcyBsb2NhdGVkCihhcyBvcHBvc2VkIHRvICphYnNvbHV0ZSBwYXRocyosCndoaWNoIHBvaW50IHRvIHdoZXJlIGEgZmlsZSBpcyAqb24gYSBzcGVjaWZpYyBjb21wdXRlciopLgoKPGRldGFpbHM+CjxzdW1tYXJ5PgpNb3JlIG9uIGFic29sdXRlIHZzIHJlbGF0aXZlIHBhdGhzCjwvc3VtbWFyeT4KCkFuIGFic29sdXRlIHBhdGggYWx3YXlzIGNvbnRhaW5zIHRoZSAqcm9vdCBlbGVtZW50KiAoYC9gIG9uIFVuaXggc3lzdGVtcyBzdWNoIGFzCkxpbnV4IGFuZCBNYWM7IHR5cGljYWxseSBgQzpcYCBvbiBXaW5kb3dzKSBhbmQgdGhlIGNvbXBsZXRlIGRpcmVjdG9yeSBsaXN0CnRvIGxvY2F0ZSBmaWxlLiBGb3IgdGhhdCByZWFzb24sIGlmIHlvdSBtb3ZlIGEgZmlsZSBhcm91bmQgb24geW91ciBjb21wdXRlciwKb3IgbW92ZSBpdCB0byBhIGRpZmZlcmVudCBjb21wdXRlciwgYW4gYWJzb2x1dGUgcGF0aCB3aWxsIHByYWN0aWNhbGx5IG5ldmVyIHdvcmsuCk9uIHRoZSBvdGhlciBoYW5kLCBhcyBsb25nIGFzIHRoZSBmaWxlcyByZW1haW5zIGluIHRoZSBzYW1lIGxvY2F0aW9uLAp5b3UgY2FuIHJlZmVyIHRvIGl0IHdpdGggYW4gYWJzb2x1dGUgcGF0aCByZWdhcmRsZXNzIG9mIHdoZXJlIHlvdSBhcmUgb24geW91ciBjb21wdXRlci4KCmBgYHtiYXNoLCBldmFsPUZBTFNFfQpDOlxEb2N1bWVudHNcMjAyMC0xMl9taWNyb2Jpb21pY3Mtd29ya3Nob3Bcc2NyaXB0c1xpbnRyby10by1SLlIgICMgQW4gYWJzb2x1dGUgcGF0aAoKc2NyaXB0cy9pbnRyby10by1SLlIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEEgcmVsYXRpdmUgcGF0aApgYGAKCjxicj4KCkEgcmVsYXRpdmUgcGF0aCBhc3N1bWVzIGEgY2VydGFpbiBzdGFydGluZyBwb2ludCAodGhlICJ3b3JraW5nIGRpcmVjdG9yeSIpLApzbyB5b3UgbmVlZCB0byBiZSBhdCB0aGUgY29ycmVjdCBzdGFydGluZyBwb2ludCBmb3IgdGhlIHBhdGggdG8gd29yay4KT24gdGhlIG90aGVyIGhhbmQsIGlmIHlvdSBrZWVwIGFsbCBmaWxlcyBhc3NvY2lhdGVkIHdpdGggYSBwcm9qZWN0IHdpdGhpbgphIHNpbmdsZSBwYXJlbnQgZGlyZWN0b3J5LCBhbmQga2VlcCB0aGUgaW50ZXJuYWwgZGlyZWN0b3J5IHN0cnVjdHVyZXMgY29uc3RhbnQsCmEgcmVsYXRpdmUgcGF0aCB3aWxsIGtlZXAgd29ya2luZywgZXZlbiBpZiB5b3UgbW92ZSB0aGUgcHJvamVjdCBkaXJlY3RvcnksCm9wZW4gaXQgb24gYSBkaWZmZXJlbnQgY29tcHV0ZXIsIG9yIHNoYXJlIGl0IHdpdGggYSBjb2xsYWJvcmF0b3IuCgoqKllvdSBzaG91bGQgYXZvaWQgdXNpbmcgYWJzb2x1dGUgcGF0aHMgYXMgbXVjaCBhcyBwb3NzaWJsZS4qKgoKKlAuUy46IEFub3RoZXIgcG9pbnQgdG8gbm90ZSBpcyB0aGF0IGluIFIgeW91IGNhbiAoYW5kIHNob3VsZCkgYWx3YXlzIHVzZSBhCmZvcndhcmQgc2xhc2ggYC9gIHRvIGRlbGltaXQgZGlyZWN0b3JpZXMsIGV2ZW4gaWYgeW91IGFyZSBvbiBhIFdpbmRvd3MgbWFjaGluZS4qCgo8L2RldGFpbHM+Cgo8YnI+CgpXb3JraW5nIHRoaXMgd2F5IG1ha2VzIGl0IGEgbG90IGVhc2llciB0byBtb3ZlIHlvdXIgcHJvamVjdCBhcm91bmQgb24geW91ciBjb21wdXRlcgphbmQgc2hhcmUgaXQgd2l0aCBvdGhlcnMgd2l0aG91dCB3b3JyeWluZyBhYm91dCB3aGV0aGVyIG9yIG5vdCB0aGUgdW5kZXJseWluZyBzY3JpcHRzCndpbGwgc3RpbGwgd29yay4KCkEgY2hhbGxlbmdlIG9mIHVzaW5nIHJlbGF0aXZlIHBhdGhzIGlzIHRoYXQgeW91IG5lZWQgdG8gbWFrZSBzdXJlIHlvdSBhcmUKYWx3YXlzIGF0IHRoZSBzYW1lIHN0YXJ0aW5nIHBvaW50ICh5b3VyICp3b3JraW5nIGRpcmVjdG9yeSopLgpSU3R1ZGlvIHByb3ZpZGVzIGEgaGVscGZ1bCBzZXQgb2YgdG9vbHMgdG8gZG8gdGhpcyB0aHJvdWdoIGl0cyAqKiJQcm9qZWN0cyIqKi4KV2hlbiB5b3UgdXNlIGEgUHJvamVjdCwgeW91ciB3b3JraW5nIGRpcmVjdG9yeSB3aWxsICphbHdheXMqIGJlIHRoZSB0b3AtbGV2ZWwKZGlyZWN0b3J5IG9mIHRoYXQgcHJvamVjdCwKYW5kIHlvdSBjYW4gc2FmZWx5IHVzZSByZWxhdGl2ZSBwYXRocyB0byBwb2ludCB0byBvdGhlciBmaWxlcy4KCjxicj4KCioqTGV0J3MgY3JlYXRlIGFuIFJTdHVkaW8gUHJvamVjdDoqKgoKKiBVbmRlciB0aGUgYEZpbGVgIG1lbnUsCiAgY2xpY2sgb24gYE5ldyBwcm9qZWN0YCwKICBjaG9vc2UgYEV4aXN0aW5nIGRpcmVjdG9yeWAsIHRoZW4KICBjbGljayB0aGUgYEJyb3dzZWAgYW5kIGZpbmQgeW91ciBgciBmb2xkZXJfbmFtZWAgZm9sZGVyLgoKKiBDbGljayBvbiBgQ3JlYXRlIFByb2plY3RgLgoKTm93LCBSU3R1ZGlvIHdpbGwgcmVsb2FkIHdpdGggdGhlIG5ld2x5IGNyZWF0ZWQgUHJvamVjdCBvcGVuLgpPbmUgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHlvdXIgd29ya2luZyBkaXJlY3Rvcnkgc2hvdWxkIGJlIHRoZSBQcm9qZWN0J3MKZGlyZWN0b3J5LiBMZXQncyBzZWUgd2hhdCBvdXIgd29ya2luZyBkaXJlY3RvcnkgaXMgdXNpbmcgYGdldHdkKClgOgoKYGBgcgpnZXR3ZCgpCmBgYAoKRnJvbSBub3cgb24sIHdlIHdpbGwgYXZvaWQgdGhlIHRlbXB0YXRpb24gKD8pIHRvIGNoYW5nZSBvdXIgd29ya2luZyBkaXJlY3RvcnksCmFuZCByZWZlciB0byBhbGwgZmlsZXMgcmVsYXRpdmUgdG8gb3VyIHByb2plY3QncyB0b3AtbGV2ZWwgZGlyZWN0b3J5LgoKCiMjIyBDcmVhdGluZyBhbiBSIHNjcmlwdAoKLSBDcmVhdGUgYSBuZXcgUiBzY3JpcHQgKGBGaWxlYCA+IGBOZXcgRmlsZWAgPiBgUiBTY3JpcHRgKQoKLSBDbGljayBgRmlsZWAgPiBgU2F2ZSBBc2AgdG8gc2F2ZSB0aGUgc2NyaXB0LiAgIAogIFNhdmUgaXQgaW4geW91ciBgc2NyaXB0c2Agc3ViZm9sZGVyCiAgKGUuZy4gYH4vMjAyMC0xMl9taWNyb2Jpb21pY3Mtd29ya3Nob3Avc2NyaXB0cy9gKQogIHVzaW5nIHRoZSBmaWxlIG5hbWUgYGludHJvLXRvLVIuUmAuCiAgCgojIyMgSW50ZXJhY3Rpbmcgd2l0aCB0aGUgUiBjb25zb2xlIGZyb20geW91ciBzY3JpcHQKCkkgcmVjb21tZW5kIGFsd2F5cyAqdHlwaW5nIHlvdXIgY29tbWFuZHMgaW50byBhIHNjcmlwdCosCndoaWNoIHlvdSdsbCBzYXZlIGZvciBsYXRlciByZWZlcmVuY2UsCmFuZCB0aGVuIGV4ZWN1dGluZyB0aGUgY29tbWFuZHMgZnJvbSB0aGVyZS4KCldlIHdhbnQgdG8gbWFrZSBzdXJlIHRvIHNhdmUgb3VyIHdvbmRlcmZ1bCBzdWJ0cmFjdGlvbiwKc28gc3RhcnQgYnkgdHlwaW5nIHRoZSBmb2xsb3dpbmcgaW50byB0aGUgUiBzY3JpcHQgaW4gdGhlIHRvcC1sZWZ0IHBhbmU6CgpgYGB7ciByc2NyaXB0fQojIFIgaW50cm8KCjIwMyAvIDIuNTQKYGBgCgpOb3cgcGxhY2UgdGhlIGN1cnNvciBvbiB0aGUgbGluZSB3aXRoIGAyMCAtIDEzYCBhbmQgdHlwZQo8a2JkPmBDdHJsYDwva2JkPiArIDxrYmQ+YEVudGVyYDwva2JkPi4KVGhlIGNvbW1hbmQgd2lsbCBiZSBjb3BpZWQgdG8gdGhlIFIgY29uc29sZSBhbmQgZXhlY3V0ZWQsCmFuZCB0aGVuIHRoZSBjdXJzb3Igd2lsbCBtb3ZlIHRvIHRoZSBuZXh0IGxpbmUuCihZb3UgY2FuIGFsc28gaGlnaGxpZ2h0IGEgYnVuY2ggb2YgY29kZSBhbmQgZXhlY3V0ZSB0aGUgYmxvY2sgYWxsIGF0Cm9uY2Ugd2l0aCA8a2JkPmBDdHJsYDwva2JkPiArIDxrYmQ+YEVudGVyYDwva2JkPi4pCgojIyMgQ29tbWVudGluZwoKVXNlIGAjYCBzaWducyB0byBjb21tZW50LgpBbnl0aGluZyB0byB0aGUgcmlnaHQgb2YgYSBgI2AgaXMgaWdub3JlZCBieSBSLCBtZWFuaW5nIGl0IHdvbid0IGJlIGV4ZWN1dGVkLgpZb3UgY2FuIHVzZSBgI2AgYm90aCBhdCB0aGUgc3RhcnQgb2YgYSBsaW5lIG9yIGFueXdoZXJlIGluIHRoZSBsaW5lLCBhZnRlciBhY3R1YWwgY29kZS4KCkNvbW1lbnRzIGFyZSBhIGdyZWF0IHdheSB0byBkZXNjcmliZSB3aGF0IHlvdXIgY29kZSBkb2VzIHdpdGhpbiB0aGUgY29kZSBpdHNlbGYsCnNvIGNvbW1lbnQgbGliZXJhbGx5IGluIHlvdXIgUiBzY3JpcHRzIQoKLS0tLQoKIyMgT2JqZWN0cwoKIyMjIEFzc2lnbmluZyBzdHVmZiB0byBvYmplY3RzCgpXZSBjYW4gYXNzaWduIHByZXR0eSBtdWNoIGFueXRoaW5nIHRvIGFuIG9iamVjdCB3aXRoIHRoZSBhc3NpZ25tZW50Cm9wZXJhdG9yLCBgPC1gXltJbiBSU3R1ZGlvLCB0eXBpbmcgPGtiZD5BbHQ8L2tiZD4gKyA8a2JkPi08L2tiZD4gd2lsbCB3cml0ZSBgIDwtIGAgaW4KYSBzaW5nbGUga2V5c3Ryb2tlLiBZb3UgY2FuIGFsc28gdXNlIGA9YCBhcyBhc3NpZ25tZW50LCBidXQgdGhhdCBzeW1ib2wgY2FuIGhhdmUgb3RoZXIKbWVhbmluZ3MsIGFuZCBzbyBJIHJlY29tbWVuZCBzdGlja2luZyB3aXRoIHRoZSBgPC1gIGNvbWJpbmF0aW9uLl0uCihUaGlzIGlzIGEgc21hbGxlci10aGFuIHNpZ24gYDxgIGZvbGxvd2VkIGJ5IGEgZGFzaCBgLWAuKQpGb3IgZXhhbXBsZToKCmBgYHtyIGFzc2lnbiwgZXZhbD1UUlVFfQp3aW5nc3Bhbl9pbiA8LSAyMDMgLyAyLjU0CmBgYAoKVHlwZSB0aGF0IGludG8geW91ciBzY3JpcHQsCmFuZCB1c2UgPGtiZD5gQ3RybGA8L2tiZD4gKyA8a2JkPmBFbnRlcmA8L2tiZD4gdG8gc2VuZCBpdCB0byB0aGUgY29uc29sZS4KCklmIHlvdSd2ZSBhc3NpZ25lZCBhIG51bWJlciB0byBhbiBvYmplY3QsIHlvdSBjYW4gdGhlbiB1c2UgaXQgaW4KZnVydGhlciBjYWxjdWxhdGlvbnM6CgpgYGB7ciBzcXJ0LCBldmFsPVRSVUUsIHJlc3VsdHM9J3Nob3cnfQp3aW5nc3Bhbl9pbiAqIDIuNTQKYGBgCgojIyMgT2JqZWN0IG5hbWVzCgpPYmplY3RzIGNhbiBiZSBnaXZlbiBhbnkgbmFtZSBzdWNoIGFzIGB4YCwgYGN1cnJlbnRfdGVtcGVyYXR1cmVgLCBvcgpgc3ViamVjdF9pZGAuCgpTb21lIHBvaW50ZXJzIG9uIG9iamVjdCBuYW1lczoKCi0gTWFrZSB0aGVtIGRlc2NyaXB0aXZlIHlldCBub3QgdG9vIGxvbmcuCgotIFRoZXkgY2Fubm90IHN0YXJ0IHdpdGggYSBudW1iZXIgKGAyeGAgaXMgbm90IHZhbGlkLCBidXQgYHgyYCBpcyleW1RoZXJlIGFyZSBzb21lIG5hbWVzIHRoYXQKY2Fubm90IGJlIHVzZWQgYmVjYXVzZSB0aGV5IGFyZSB0aGUgbmFtZXMgb2YgZnVuZGFtZW50YWwgZnVuY3Rpb25zIGluIFIgKGUuZy4sCmBpZmAsIGBlbHNlYCwgYGZvcmAsIHNlZQpbaGVyZV0oaHR0cHM6Ly9zdGF0LmV0aHouY2gvUi1tYW51YWwvUi1kZXZlbC9saWJyYXJ5L2Jhc2UvaHRtbC9SZXNlcnZlZC5odG1sKQpmb3IgYSBjb21wbGV0ZSBsaXN0KS4gSW4gZ2VuZXJhbCwgZXZlbiBpZiBpdCdzIGFsbG93ZWQsIGl0J3MgYmVzdCB0byBub3QgdXNlCm90aGVyIGZ1bmN0aW9uIG5hbWVzIChlLmcuLCBgY2AsIGBUYCwgYG1lYW5gLCBgZGF0YWAsIGBkZmAsIGB3ZWlnaHRzYCkuIEluIGRvdWJ0CmNoZWNrIHRoZSBoZWxwIHRvIHNlZSBpZiB0aGUgbmFtZSBpcyBhbHJlYWR5IGluIHVzZS5dLgoKLSBOb3RlOiBSIGlzIGNhc2Ugc2Vuc2l0aXZlIChlLmcuLCBgd2VpZ2h0YCBpcyBkaWZmZXJlbnQgZnJvbSBgV2VpZ2h0YCkuCgotIEEgc3R5bGUgcmVjb21tZW5kYXRpb24gaXMgdG8gYXZvaWQgY2FwaXRhbCBsZXR0ZXJzIChlLmcuLCBgdG90YWxXZWlnaHRgKQogIGFuZCBkb3RzIChgdG90YWwud2VpZ2h0YCkgdG8gc2VwYXJhdGUgd29yZHMuIEluc3RlYWQsIHN0aWNrIHRvIGxvd2VyY2FzZSwKICBhbmQgdXNlIHVuZGVyc2NvcmVzIChgdG90YWxfd2VpZ2h0YCkgdG8gc2VwYXJhdGUgd29yZHMuXltJdCBpcyBhbHNvIHJlY29tbWVuZGVkCiAgdG8gdXNlIG5vdW5zIGZvciB2YXJpYWJsZSBuYW1lcywgYW5kIHZlcmJzIGZvciBmdW5jdGlvbiBuYW1lcy4KICBJdCdzIGltcG9ydGFudCB0byBiZSBjb25zaXN0ZW50IGluIHRoZSBzdHlsaW5nIG9mIHlvdXIgY29kZQogICh3aGVyZSB5b3UgcHV0IHNwYWNlcywgaG93IHlvdSBuYW1lIHZhcmlhYmxlcywgZXRjLikuCiAgSW4gUiwgdHdvIHBvcHVsYXIgc3R5bGUgZ3VpZGVzIGFyZSBbSGFkbGV5IFdpY2toYW0nc10oaHR0cDovL2Fkdi1yLmhhZC5jby5uei9TdHlsZS5odG1sKQogIGFuZCBbR29vZ2xlJ3NdKGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9zdHlsZWd1aWRlL1JndWlkZS54bWwpLl0KCjxkaXYgY2xhc3M9ImFsZXJ0IHB1enpsZSI+CjxkaXY+CgojIyMjIENoYWxsZW5nZQoKV2hhdCBpcyB0aGUgdmFsdWUgb2YgYHlgIGFmdGVyIGRvaW5nIGFsbCBvZiB0aGUgZm9sbG93aW5nPwoKYGBge3IsIGV2YWw9RkFMU0V9CnggPC0gNTAKeSA8LSB4ICogMgp4IDwtIDgwCmBgYAoKPGRldGFpbHM+Cgo8c3VtbWFyeT4KU29sdXRpb24gKGNsaWNrIGhlcmUpCjwvc3VtbWFyeT4KCk9iamVjdHMgZG9uJ3QgZ2V0IGxpbmtlZCB0byBlYWNoIG90aGVyLCBzbyBpZiB5b3UgY2hhbmdlIG9uZSwKaXQgd29uJ3QgYWZmZWN0IHRoZSB2YWx1ZXMgb2YgYW55IG90aGVycy4KVGhlcmVmb3JlLCBgeWAgd2lsbCBrZWVwIHRoZSB2YWx1ZSBgMTAwYC4KCjwvZGV0YWlscz4KCjwvZGl2Pgo8L2Rpdj4KCiMjIyBPYmplY3RzIGluIHlvdXIgd29ya3NwYWNlCgpUaGUgb2JqZWN0cyB5b3UgY3JlYXRlIGdldCBhZGRlZCB0byB5b3VyICJ3b3Jrc3BhY2UiLiBZb3UgY2FuIGxpc3QgdGhlCmN1cnJlbnQgb2JqZWN0cyB3aXRoIGBscygpYC4gUlN0dWRpbyBhbHNvIHNob3dzIHRoZSBvYmplY3RzIGluIHRoZSBFbnZpcm9ubWVudCBwYW5lbC4KCgotLS0tCgojIyBGdW5jdGlvbnMKCkVhcmxpZXIsIHdlIG1hbmFnZWQgdG8gZGl2aWRlIGAyMGAgYnkgYDEzYCBhbmQgZ290IGByIDIwLzEzYCwKYnV0IHdoYXQgaWYgd2Ugd2FudGVkIHRvIGdvIGV2ZW4gZnVydGhlciBhbmQgKnJvdW5kKiB0aGUgcmVzdWx0PwpMaWtlIGZvciAqbWFueSogdGhpbmdzIHlvdSBtYXkgd2FudCB0byBkbyBpbiBSLCB0aGVyZSBpcyBhICoqZnVuY3Rpb24qKiBmb3IgdGhhdC4KCkZ1bmN0aW9ucyBhcmUgdXNlZCBieSB0eXBpbmcgdGhlaXIgbmFtZSBmb2xsb3dlZCBieSBwYXJlbnRoZXNlczoKCmBgYHtyIGxvZywgZXZhbD1UUlVFLCByZXN1bHRzPSdzaG93J30Kcm91bmQoMS41Mzg0NjIpCmBgYAoKSGVyZSwgYHJvdW5kKClgIGlzIGEgX2Z1bmN0aW9uXyB0aGF0IHJvdW5kcyBhIG51bWJlci4KVGhlIHZhbHVlIGluIHRoZSBwYXJlbnRoZXNlcyBpcyBjYWxsZWQgYSBmdW5jdGlvbiAiYXJndW1lbnQiLAp3aGljaCBpcyB1c2VkIGluIHRoZSBleGVjdXRpb24gb2YgdGhlIGZ1bmN0aW9uCih1c3VhbGx5LCB0aGUgcHJpbWFyeSBhcmd1bWVudCBpcyBjb252ZXJ0ZWQgYnkgdGhlIGZ1bmN0aW9uLCBsaWtlIGhlcmUpLgoKIyMjIFVzaW5nIG5hbWVkIGFyZ3VtZW50cwoKRnVuY3Rpb25zIGNhbiBoYXZlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCBzb21lIG9mIHRoZW0gbWF5IGhhdmUgZGVmYXVsdCB2YWx1ZXMuCgpUaGVyZSBhcmUgc29tZSBmdW5jdGlvbnMgdGhhdCB0YWtlIG1hbnkgYXJndW1lbnRzIGFuZCB5b3UgY2FuIGltYWdpbmUgdGhhdCBpdCBtaWdodApnZXQgY29uZnVzaW5nIHRyeWluZyB0byBrZWVwIHRoZW0gaW4gb3JkZXIuCkluIHRoYXQgY2FzZSwgaXQgaXMgb2Z0ZW4gYmV0dGVyIHRvIGV4cGxpY2l0bHkgbmFtZSB0aGUgYXJndW1lbnRzLgoKV2hlbiB5b3UgdHlwZSBhIGZ1bmN0aW9uIG5hbWUgYW5kIHBhdXNlIGZvciBhIG1vbWVudCwKdGhlIGFyZ3VtZW50cywgdGhlaXIgbmFtZXMsIGFuZCB0aGVpciBkZWZhdWx0IHZhbHVlcwooaS5lLiwgdGhlIHZhbHVlIGlmIHRoZSBhcmd1bWVudCBpcyBsZWZ0IHVuc3BlY2lmaWVkKSB3aWxsIGJlIHNob3duLgoKPGRldGFpbHM+CjxzdW1tYXJ5PgoqKldoYXQgaXMgdGhlIHNlY29uZCBhcmd1bWVudCBmb3IgYHJvdW5kKClgIGFuZCB3aGF0IGlzIGl0IGRlZmF1bHQgdmFsdWU/KioKPC9zdW1tYXJ5PgoKYHJvdW5kYCBoYXMgYSBzZWNvbmQgYXJndW1lbnQgYGRpZ2l0c2Agd2hvc2UgZGVmYXVsdCAKaXMgYDBgLCBzdWNoIHRoYXQgbnVtYmVycyB3aWxsIGJlIHJvdW5kZWQgdG8gd2hvbGUgaW50ZWdlcnMuCgo8L2RldGFpbHM+Cgo8YnI+CgpCZWxvdyBpcyBhbiBleGFtcGxlIHVzaW5nIG5hbWVkIGFyZ3VtZW50cyB3aXRoIGByb3VuZCgpYC4KV2hlbiB0aGUgYXJndW1lbnRzIGFyZSBuYW1lZCwgdGhlIG9yZGVyIGRvZXNuJ3QgbWF0dGVyIQpZb3UgbWlnaHQgYWxzbyBlbnRlciB0aGUgZmlyc3QgZmV3IGltcG9ydGFudCBhcmd1bWVudHMgcG9zaXRpb25hbGx5LAphbmQgbGF0ZXIgb25lcyBieSBuYW1pbmcgdGhlbS4KCmBgYHtyIHJvdW5kX3dfbmFtZWRfYXJnc30Kcm91bmQoeCA9IDEuNTM4NDYyLCBkaWdpdHMgPSAyKQoKcm91bmQoZGlnaXRzID0gMiwgeCA9IDEuNTM4NDYyKQoKcm91bmQoMS41Mzg0NjIsIGRpZ2l0cyA9IDIpCmBgYAoKPGJyPgoKTm90ZSB0aGF0IHdlIGNhbiBhbHNvIGRpcmVjdGx5IHBsdWcgaW4gb2JqZWN0czoKCmBgYHIKbXlfbnVtYmVyIDwtIDIwIC8gMTMKcm91bmQobXlfbnVtYmVyKQpgYGAKCk9yIGRvIHRoZSBpbml0aWFsIGRpdmlzaW9uIGluc2lkZSB0aGUgZnVuY3Rpb246CgpgYGByCnJvdW5kKDIwIC8gMTMpCmBgYAoKT3IgbmVzdCBmdW5jdGlvbnMgLS0gaGVyZSB3ZSBhcmUgYWRkaW5nIHRoZSBgbG9nKClgIGZ1bmN0aW9uOgoKYGBgcgpsb2cocm91bmQoMjAgLyAxMyApKQpgYGAKCjxkZXRhaWxzPgoKPHN1bW1hcnk+CioqV2hhdCBpcyB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIGluIHRoZSBsYXN0IGNvbW1hbmQ/KioKPC9zdW1tYXJ5PgoKYHJvdW5kKClgIGlzIGV4ZWN1dGVkIGZpcnN0LAphbmQgdGhlIG91dHB1dCBvZiBgcm91bmQoKWAgaXMgdXNlZCBhcyB0aGUgaW5wdXQgb2YgYGxvZygpYC4KCjwvZGV0YWlscz4KCjxicj4KCi0tLS0tCgojIyBHZXR0aW5nIGhlbHAKCkFzIHdlIHNhdywgd2hlbiB3ZSB0eXBlZCBgcm91bmRgIGFuZCBwYXVzZWQgZm9yIGEgbW9tZW50LAp3ZSBnb3QgYSBwb3AtdXAgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZnVuY3Rpb24uCgpBbHRlcm5hdGl2ZWx5LCB5b3UgY291bGQgdHlwZToKCmBgYHtyIGhlbHAsIGV2YWw9RkFMU0V9Cj9yb3VuZApgYGAKCi4uLiBhbmQgdGhlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBmdW5jdGlvbiB3aWxsIHNob3cgdXAgaW4gdGhlIGxvd2VyLXJpZ2h0IHBhbmUuCgpUaGlzIGRvY3VtZW50YXRpb24gaXMgb2Z0ZW4gYSBiaXQgX3Rvb18gZGV0YWlsZWQsIGFuZCBjYW4gYmUgdGVyc2UsCnNvIGl0IHRha2VzIHNvbWUgcHJhY3RpY2UgdG8gcmVhZC4KSSBnZW5lcmFsbHkgZm9jdXMgb24gKlVzYWdlKiBhbmQgKkFyZ3VtZW50cyosIGFuZCB0aGVuIG9uICpFeGFtcGxlcyogYXQgdGhlIGJvdHRvbS4KCk90aGVyd2lzZSwgZm9yIGluc3RhbmNlIHdoZW4geW91IGRvbid0IGtub3cgYSBmdW5jdGlvbidzIG5hbWUsIG9yIGV2ZW4gd2hldGhlcgphIGZ1bmN0aW9uIG1heSBvciBtYXkgbm90IGV4aXN0LCBHb29nbGUgaXMgeW91ciBmcmllbmQhClRyeSB0eXBpbmcgInJvdW5kaW5nIGEgbnVtYmVyIGluIHIiLCBhbmQgc2VlIGlmIHlvdSBnZXQgdXNlZnVsIHJlc3VsdHMuCgotLS0tCgojIyBWZWN0b3JzCgpBICoqdmVjdG9yKiogaXMgdGhlIG1vc3QgY29tbW9uIGFuZCBiYXNpYyBkYXRhIHN0cnVjdHVyZSBpbiBSLAphbmQgaXMgY29tcG9zZWQgb2YgYSAqKnNlcmllcyBvZiB2YWx1ZXMgb2YgdGhlIHNhbWUgdHlwZSoqLgoKV2UgY2FuIGFzc2lnbiBhIHNlcmllcyBvZiB2YWx1ZXMgdG8gYSB2ZWN0b3IgdXNpbmcgdGhlIGBjKClgIGZ1bmN0aW9uLgpGb3IgZXhhbXBsZToKCmBgYHtyLCBldmFsID0gVFJVRX0Kd2luZ3NwYW5fY20gPC0gYygxMS44LCAyMDMsIDE4LjIsIDI3LjkpCmBgYAoKQSB2ZWN0b3IgY2FuIGFsc28gY29udGFpbiBjaGFyYWN0ZXJzIC0tIGJ1dCBhZ2FpbiwgcXVvdGluZyBpcyBpbXBvcnRhbnQsCm9yIFIgd2lsbCB0aGluayB0aGUgc3RyaW5ncyBhcmUgb2JqZWN0czoKCmBgYHtyLCBldmFsID0gVFJVRX0KYmlyZHMgPC0gYygiaHVtbWluZ2JpcmQiLCAiYmFsZF9lYWdsZSIsICJjaGlja2FkZWUiLCAiY2FyZGluYWwiKQpgYGAKCjxicj4KCkFzIG1lbnRpb25lZCwgYWxsIG9mIGEgdmVjdG9yJ3MgZWxlbWVudHMgYXJlIHRoZSBzYW1lIHR5cGUgb2YgZGF0YS4KVGhlIGZ1bmN0aW9uIGBjbGFzcygpYCBpbmRpY2F0ZXMgd2hhdCBraW5kIG9mIGRhdGEgeW91IGFyZSB3b3JraW5nIHdpdGg6CgpgYGB7ciwgZXZhbCA9IFRSVUUsIHJlc3VsdHM9J3Nob3cnfQpjbGFzcyh3aW5nc3Bhbl9jbSkKY2xhc3MoYmlyZHMpCmBgYAoKIyMjIERhdGEgdHlwZXMgaW4gUgoKVGhlc2UgY2xhc3NlcyBhcmUgZGlmZmVyZW50IHR5cGVzIG9mICoqYXRvbWljIHZlY3RvcnMqKiwgUidzIHNpbXBsZXN0ICoqZGF0YSB0eXBlKiouClRoZSA0IG1vc3QgY29tbW9uIGF0b21pYyB2ZWN0b3IgdHlwZXMgYXJlOgoKLSAqKmAibnVtZXJpYyJgKiogKG9yIGAiZG91YmxlImApIC0tIGZsb2F0aW5nIHBvaW50IG51bWJlcnMKLSAqKmAiY2hhcmFjdGVyImAqKiAtLSBjaGFyYWN0ZXIgc3RyaW5ncwotICoqYCJsb2dpY2FsImAqKiAtLSBgVFJVRWAgYW5kIGBGQUxTRWAgKGFsc28ga25vd24gYXMgYm9vbGVhbikKLSAqKmAiaW50ZWdlciJgKiogLS0gaW50ZWdlciBudW1iZXJzCgo8ZGV0YWlscz4KPHN1bW1hcnk+CioqVmVjdG9yIGNvZXJjaW9uOiB3aGVuIG5vdCBhbGwgZWxlbWVudHMgYXJlIG9mIHRoZSBzYW1lIHR5cGUuKioKPC9zdW1tYXJ5PgoKV2hhdCBoYXBwZW5zIGlmIHdlIHRyeSB0byBtaXggdmVjdG9yIHR5cGVzIChlLmcuLCAiY2hhcmFjdGVyIGFuZCBudW1lcmljIikKaW4gYSBzaW5nbGUgdmVjdG9yPwoqKlIgY29udmVydHMgdGhlbSB0byBhbGwgYmUgdGhlIHNhbWUgdHlwZSwgYW5kIGl0IGRvZXMgc28gd2l0aG91dCB0ZWxsaW5nIHVzIGFib3V0IGl0LioqCgpXaGF0IHdpbGwgaGFwcGVuIGluIGVhY2ggb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlcz8gICAgCihIaW50OiB1c2UgYGNsYXNzKClgIHRvIGNoZWNrIHRoZSBkYXRhIHR5cGUgb2YgeW91ciBvYmplY3RzKQoKYGBgcgpudW1fY2hhciA8LSBjKDEsIDIsIDMsICJhIikKCm51bV9sb2dpY2FsIDwtIGMoMSwgMiwgMywgVFJVRSkKCmNoYXJfbG9naWNhbCA8LSBjKCJhIiwgImIiLCAiYyIsIFRSVUUpCgp0cmlja3kgPC0gYygxLCAyLCAzLCAiNCIpCmBgYAoKWW91J3ZlIHByb2JhYmx5IG5vdGljZWQgdGhhdCBvYmplY3RzIG9mIGRpZmZlcmVudCB0eXBlcyBnZXQKY29udmVydGVkIGludG8gYSBzaW5nbGUsIHNoYXJlZCB0eXBlIHdpdGhpbiBhIHZlY3Rvci4gSW4gUiwgd2UKY2FsbCBjb252ZXJ0aW5nIG9iamVjdHMgZnJvbSBvbmUgY2xhc3MgaW50byBhbm90aGVyIGNsYXNzCl9jb2VyY2lvbl8uIFRoZXNlIGNvbnZlcnNpb25zIGhhcHBlbiBhY2NvcmRpbmcgdG8gYSBoaWVyYXJjaHksCndoZXJlYnkgc29tZSB0eXBlcyBnZXQgcHJlZmVyZW50aWFsbHkgY29lcmNlZCBpbnRvIG90aGVyCnR5cGVzLgoKPC9kZXRhaWxzPgoKPGJyPgoKIyMjIFZlY3Rvcml6YXRpb24hCgpMZXQncyBzYXkgd2Ugd2FudGVkIHRvIGNvbnZlcnQgb3VyIHdpbmdzcGFucyB0byBpbmNoZXMsCndoaWNoIG1lYW5zIHRoYXQgd2UgbmVlZCB0byBkaXZpZGUgZWFjaCBsZW5ndGggaW4gY2VudGltZXRlcnMgYnkgMi41NC4KCkhvdyBjb3VsZCB3ZSBkbyB0aGlzIHF1aWNrbHk/CgpgYGB7ciwgZXZhbCA9IFRSVUUsIHJlc3VsdHMgPSAic2hvdyJ9CiMgd2luZ3NwYW5fY20gPC0gYygxMS44LCAyMDMsIDE4LjIsIDI3LjkpICAjIFN0aWxsIHdvcmtpbmcgd2l0aCB0aGUgc2FtZSB3aW5nc3BhbiB2ZWN0b3IKCndpbmdzcGFuX2luIDwtIHdpbmdzcGFuX2NtIC8gMi41NAp3aW5nc3Bhbl9pbgpgYGAKCjxkZXRhaWxzPgoKPHN1bW1hcnk+CioqV2h5IGRvZXMgdGhpcyB3b3JrPyoqCjwvc3VtbWFyeT4KClIgInZlY3Rvcml6ZXMiIG9wZXJhdGlvbnMgd2hlbmV2ZXIgaXQgY2FuLgpUaGlzIG1lYW5zIHRoYXQgaW4gdGhpcyBjYXNlLCBlYWNoIGVsZW1lbnQgaW4gdGhlIHZlY3RvciBgd2VpZ2h0c19jbWAgd2lsbCBiZSBkaXZpZGVkCmJ5IDIuNTQgLS0gdGhpcyBudW1iZXIgaXMgInZlY3Rvcml6ZWQiIG9yIHJlY3ljbGVkIHRvIG1hdGNoIHRoZSBudW1iZXIgb2Ygd2VpZ2h0cy4KCkZvciBhIHByb2dyYW1taW5nIGxhbmd1YWdlLCB0aGlzIGlzIHVudXN1YWwgYmVoYXZpb3IgLS0gYnV0IGl0IGlzIHZlcnkgdXNlZnVsIQoKPC9kZXRhaWxzPgoKPGJyPgoKU2ltaWxhcmx5LCB3ZSBjYW4gdXNlIHR3byB2ZWN0b3JzIG9mIGVxdWFsIGxlbmd0aCB0byBxdWlja2x5IG9wZXJhdGUgb24gZWFjaCBlbGVtZW50Cm9mIHRoZSB2ZWN0b3I6CgpgYGB7ciBldmFsID0gVFJVRSwgcmVzdWx0cyA9ICAic2hvdyJ9CnNpemVfY20gPC0gYyg3LjYyLCA5MCwgMTMuMSwgMjEuOCkKCnJhdGlvIDwtIHdpbmdzcGFuX2NtIC8gc2l6ZV9jbQpyYXRpbwoKYGBgCjxicj4KCgojIyMgRGF0YSBzdHJ1Y3R1cmVzIGluIFIKCldoaWxlIHZlY3RvcnMgY2FuIGJlIGNvbXBvc2VkIG9mIG9uZSBvZiBzZXZlcmFsICpkYXRhIHR5cGVzKiwgdGhleSwgaW4gdHVybiwKYXJlIG9uZSBvZiBzZXZlcmFsICoqZGF0YSBzdHJ1Y3R1cmVzKiogdGhhdCBSIHVzZXMuCk90aGVyIGltcG9ydGFudCBvbmVzIGFyZToKCi0gKipgZGF0YS5mcmFtZWAqKiAtLSBBIHJlY3Rhbmd1bGFyIGRhdGEgc3RydWN0dXJlIHdoZXJlIGVhY2ggY29sdW1uIGNhbiBiZSBhIGRpZmZlcmVudCBkYXRhIHR5cGUuCi0gKipgbWF0cml4YCoqIC0tIEEgcmVjdGFuZ3VsYXIgZGF0YSBzdHJ1Y3R1cmUgb2YgYSBzaW5nbGUgZGF0YSB0eXBlLgotICoqYGxpc3RgKiogLS0gQSB2ZXJ5IGZsZXhpYmxlIGRhdGEgc3RydWN0dXJlIHRoYXQgd2Ugd2lsbCBub3QgZnVydGhlciBkaXNjdXNzIGhlcmUuCi0gKipgZmFjdG9yYCoqIC0tIENoYXJhY3RlciBzdHJpbmdzIHdpdGggYSBkaXNjcmV0ZSBzZXQgb2YgcG9zc2libGUgdmFsdWVzLAp1c2VkIG1vc3RseSBmb3Igc3RhdGlzdGljYWwgdGVzdHMgYW5kIHdoZW4gcGxvdHRpbmcuCgoKLS0tLQoKIyMgRGF0YSBGcmFtZXMKCkEgZGF0YSBmcmFtZSAoZm9ybWFsIG9iamVjdCB0eXBlOiBgZGF0YS5mcmFtZWApIGlzIGEgcmVjdGFuZ3VsYXIgZGF0YSBzdHJ1Y3R1cmUKaW4gd2hpY2ggcm93cyBhcmUgb2JzZXJ2YXRpb25zIGFuZCBjb2x1bW5zIGFyZSB2YXJpYWJsZXMuCkVhY2ggY29sdW1uIGNhbiBiZSBvZiBhIGRpZmZlcmVudCB0eXBlIChudW1lcmljLCBjaGFyYWN0ZXIsIGV0Yy4pLApidXQgc2luY2UgZWFjaCBjb2x1bW4gaXMgYSB2ZWN0b3IsIGFsbCB0aGUgY2VsbHMgd2l0aGluIGEgY29sdW1uIGFyZSBvZiB0aGUgc2FtZSB0eXBlLgpBbHNvLCBkdWUgdG8gdGhlIHJlY3Rhbmd1bGFyIHN0cnVjdHVyZSwgYWxsIGNvbHVtbnMgaGF2ZSB0aGUgc2FtZSBsZW5ndGguCgojIyMgQ3JlYXRlLCB3cml0ZSwgYW5kIHJlYWQgYSBkYXRhIGZyYW1lCgpXZSBjYW4gZWFzaWx5IGNyZWF0ZSBhIGRhdGEgZnJhbWUgYnkgaGFuZCB1c2luZyB0aGUgYGRhdGEuZnJhbWUoKWAgZnVuY3Rpb24gYW5kIGEKYGNvbHVtbl9uYW1lID0gY29sdW1uX3ZlY3RvcmAgbm90YXRpb24gZm9yIGVhY2ggY29sdW1uOgoKYGBge3IgZXZhbD1UUlVFLCByZXN1bHRzPSdzaG93J30KYmlyZHNfZGYgPC0gZGF0YS5mcmFtZShzcGVjaWVzID0gYmlyZHMsCiAgICAgICAgICAgICAgICAgICAgICAgd2luZ3NwYW4gPSB3aW5nc3Bhbl9jbSwKICAgICAgICAgICAgICAgICAgICAgICBzaXplID0gc2l6ZV9jbSwKICAgICAgICAgICAgICAgICAgICAgICBuX2VnZ3MgPSBjKDIsIDIsIDcsIDQpKSAKYGBgCgpNb3N0IG9mdGVuLCBob3dldmVyLCB5b3UnbGwgYmUgcmVhZGluZyB5b3VyIGRhdGEgZnJhbWVzIGZyb20gZmlsZXMuCkFuZCB5b3UnbGwgYWxzbyB3YW50IHRvIHNhdmUgeW91ciBtb2RpZmllZCBkYXRhIGZyYW1lcy4KClNvIGxldCdzIHByYWN0aWNlIHdyaXRpbmcgYW5kIHJlYWRpbmcgYSBkYXRhIGZyYW1lOgoKYGBge3J9CiMgV3JpdGUgYSBkYXRhIGZyYW1lIHRvIENTViBmb3JtYXQ6CndyaXRlLmNzdih4ID0gYmlyZHNfZGYsIGZpbGUgPSAiYmlyZC1kYXRhLmNzdiIsIHJvdy5uYW1lcyA9IEZBTFNFKQpgYGAKCk5vdyB3ZSByZWFkIG91ciBkYXRhIGZyYW1lIGJhY2sgaW46CgpgYGB7cn0KYmlyZHNfZGZfMiA8LSByZWFkLmNzdignYmlyZC1kYXRhLmNzdicpCgojIyBMZXQncyBjb21wYXJlIHRoZSB0d28gZGF0YSBmcmFtZXM6CmJpcmRzX2RmCgpiaXJkc19kZl8yCmBgYAoKIyMjIEluc3BlY3RpbmcgYSBEYXRhIEZyYW1lCgpVc2UgYHN0cigpYCB0byBsb29rIGF0IHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGRhdGEuCgpgYGB7ciBzdHIsIGV2YWw9RkFMU0V9CnN0cihiaXJkc19kZikKYGBgCgpUaGlzIHNob3dzIHRoYXQgdGhlcmUgYXJlIDM0LDc4NiByb3dzIGFuZCAxMyBjb2x1bW5zLAphbmQgdGhlbiBmb3IgZWFjaCBjb2x1bW4sIGl0IGdpdmVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBkYXRhCnR5cGUgYW5kIHNob3dzIHRoZSBmaXJzdCBmZXcgdmFsdWVzLgoKQW5vdGhlciB1c2VmdWwgZnVuY3Rpb24gaXMgYHN1bW1hcnkoKWAuCgpgYGB7ciBzdW1tYXJ5LCBldmFsPUZBTFNFfQpzdW1tYXJ5KGJpcmRzX2RmKQpgYGAKCkZpbmFsbHksIGluIFJTdHVkaW8sIHdlIGNhbiBjbGljayBvbiBhbiBvYmplY3QgaW4gdGhlIGBGaWxlc2AgcGFuZSwgb3IKZXF1aXZhbGVudGx5LCB0eXBlOgogIAogIGBgYHtyIFZpZXcsIGV2YWw9RkFMU0V9ClZpZXcoYmlyZHNfZGYpCmBgYAoKIyMjIEFuIE92ZXJ2aWV3IG9mIEZ1bmN0aW9ucyB0byBHZXQgYW4gT3ZlcnZpZXcKCiogKipTaXplOioqCiAgKiBgZGltKClgIC0tIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIGZpcnN0IGVsZW1lbnQsIGFuZCB0aGUgbnVtYmVyIG9mIGNvbHVtbnMgYXMgdGhlIHNlY29uZCBlbGVtZW50ICh0aGUgX19kaW1fX2Vuc2lvbnMgb2YgdGhlIG9iamVjdCkKICAqIGBucm93KClgIC0tIHJldHVybnMgdGhlIG51bWJlciBvZiByb3dzCiAgKiBgbmNvbCgpYCAtLSByZXR1cm5zIHRoZSBudW1iZXIgb2YgY29sdW1ucwogICogYGxlbmd0aCgpYCAtLSBmb3IgYSBkYXRhZnJhbWUsIHJldHVybnMgdGhlIG51bWJlciBvZiBjb2x1bW5zLiBWZXJ5IGNvbW1vbmx5IHVzZWQgZm9yIHZlY3RvcnMsIGZvciB3aGljaCBpdCB3aWxsIHJldHVybiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzLgoKKiAqKkNvbnRlbnQ6KioKICAqIGBoZWFkKClgIC0tIHNob3dzIHRoZSBmaXJzdCA2IHJvd3MKICAqIGB0YWlsKClgIC0tIHNob3dzIHRoZSBsYXN0IDYgcm93cwoKKiAqKk5hbWVzOioqCiAgKiBgbmFtZXMoKWAgLS0gcmV0dXJucyB0aGUgY29sdW1uIG5hbWVzIChzeW5vbnltIG9mIGBjb2xuYW1lcygpYCBmb3IgYGRhdGEuZnJhbWVgIG9iamVjdHMpCiAgKiBgcm93bmFtZXMoKWAgLS0gcmV0dXJucyB0aGUgcm93IG5hbWVzCgoqICoqU3VtbWFyeToqKgogICogYHN0cigpYCAtLSBzdHJ1Y3R1cmUgb2YgdGhlIG9iamVjdCBhbmQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNsYXNzLCBsZW5ndGggYW5kIGNvbnRlbnQgb2YgZWFjaCBjb2x1bW4KICAqIGBzdW1tYXJ5KClgIC0tIHN1bW1hcnkgc3RhdGlzdGljcyBmb3IgZWFjaCBjb2x1bW4KICAqIGBza2ltcjo6c2tpbSgpYCAtLSB2ZXJ5IG5pY2Ugc3VtbWFyeSwgbmVlZCB0byBpbnN0YWxsICpza2ltciogd2l0aCBgaW5zdGFsbC5wYWNrYWdlcyhza2ltcilgLgoKCi0tLS0KCiMjIE1pc2NlbGxhbmVvdXMKCiMjIyBNaXNzaW5nIGRhdGEKCkFzIFIgd2FzIGRlc2lnbmVkIHRvIGFuYWx5emUgZGF0YXNldHMsIGl0IGluY2x1ZGVzIHRoZSBjb25jZXB0IG9mIG1pc3NpbmcgZGF0YQood2hpY2ggaXMgdW5jb21tb24gaW4gb3RoZXIgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzKS4KTWlzc2luZyBkYXRhIGFyZSByZXByZXNlbnRlZCBhcyBgTkFgIChmb3IgIk5vdCBBdmFpbGFibGUiKS4KCmBgYHtyIGNyZWF0ZV92ZWNfd2l0aF9taXNzaW5nfQpoZWlnaHRzIDwtIGMoMiwgNCwgNCwgTkEsIDYpCmBgYAoKV2hlbiBkb2luZyBvcGVyYXRpb25zIG9uIG51bWJlcnMsIG1vc3QgZnVuY3Rpb25zIHdpbGwgcmV0dXJuIGBOQWAgaWYgdGhlIGRhdGEKeW91IGFyZSB3b3JraW5nIHdpdGggaW5jbHVkZSBtaXNzaW5nIHZhbHVlcy4gSXQgaXMgYSBzYWZlciBiZWhhdmlvciBhcyBvdGhlcndpc2UKeW91IG1heSBvdmVybG9vayB0aGF0IHlvdSBhcmUgZGVhbGluZyB3aXRoIG1pc3NpbmcgZGF0YS4KWW91IGNhbiBhZGQgdGhlIGFyZ3VtZW50IGBuYS5ybT1UUlVFYCB0byBjYWxjdWxhdGUgdGhlIHJlc3VsdCB3aGlsZSBpZ25vcmluZyB0aGUgbWlzc2luZyB2YWx1ZXMuCgpgYGB7ciBuYV9ybX0KbWVhbihoZWlnaHRzKQoKbWVhbihoZWlnaHRzLCBuYS5ybSA9IFRSVUUpCmBgYAoKPGJyPgoKSWYgeW91ciBkYXRhIGluY2x1ZGVzIG1pc3NpbmcgdmFsdWVzLCB5b3UgbWF5IHdhbnQgdG8gYmVjb21lIGZhbWlsaWFyIHdpdGggdGhlCmZ1bmN0aW9ucyBgaXMubmEoKWAgYW5kIGBuYS5vbWl0KClgLgoKYGBge3IgZXh0cmFjdF9ub25fbWlzc2luZ30KIyMgRXh0cmFjdCB0aG9zZSBlbGVtZW50cyB3aGljaCBhcmUgbm90IG1pc3NpbmcgdmFsdWVzOgpoZWlnaHRzWyFpcy5uYShoZWlnaHRzKV0KCiMjIFNob3J0Y3V0IHRvIGRvIHRoZSBzYW1lOgpuYS5vbWl0KGhlaWdodHMpCmBgYAoKIyMjIFBhY2thZ2VzCgpUaGUgZnVuY3Rpb25zIHRoYXQgd2UgaGF2ZSBiZWVuIHVzaW5nIHNvIGZhciAoYW5kICptYW55KiwgKm1hbnkqIG1vcmUpIGFyZSBhdmFpbGFibGUKaW4gYW55IFIgc2Vzc2lvbiBhcyBzb29uIGFzIHlvdSBzdGFydCBSICh3ZSByZWZlciB0byB0aGlzIGZ1bmN0aW9uYWxpdHkgYXMgKiJiYXNlIFIiKikuCkhvd2V2ZXIsIHdoZW4gZG9pbmcgc3BlY2lhbGl6ZWQgYW5hbHlzZXMgc3VjaCBhcyBpbiBtaWNyb2Jpb21pY3MsCnJhdGhlciB0aGFuIGNvZGluZyB1cCBldmVyeXRoaW5nIHVzaW5nIHRoZSBiYXNpYyBidWlsZGluZyBibG9ja3MgaW4gUiwKd2UgY2FuIGxvYWQgYWRkLW9uIGNvZGUgdGhhdCB3aWxsIGFsbG93IHVzIHRvIHVzZSAqImhpZ2gtbGV2ZWwiKiBmdW5jdGlvbnMKc3BlY2lmaWNhbGx5IGdlYXJlZCB0b3dhcmRzIHRoZSBlZmZlY3RpdmUgYW5hbHlzZXMgb2Ygc3VjaCBkYXRhLgoKVGhpcyB0eXBlIG9mIGFkZC1vbiBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIFIgKnBhY2thZ2VzKi4KVGhlIGRlZmF1bHQgKnJlcG9zaXRvcnkqIGZvciBSIHBhY2thZ2VzIGlzICoqQ1JBTioqLgpUaGUgcGFja2FnZXMgb24gQ1JBTiBoYXZlIHVuZGVyZ29uZSBhIGNlcnRhaW4gbGV2ZWwgb2YgdmV0dGluZywKYW5kIGNhbiBiZSBlYXNpbHkgaW5zdGFsbGVkIHdpdGggYGluc3RhbGwucGFja2FnZXMoKWAgZnVuY3Rpb24sIGZvciBpbnN0YW5jZToKCmBgYHtyLCBldmFsPUZBTFNFfQppbnN0YWxsLnBhY2thZ2VzKCJ0aWR5dmVyc2UiKQpgYGAKCklmIHlvdeKAmXJlIGRvaW5nIGJpb2luZm9ybWF0aWMgYW5hbHlzZXMgaW4gUiwgYXMgd2Ugd2lsbCBiZSBkb2luZywKeW91IHdpbGwgZW5jb3VudGVyIHBhY2thZ2VzIHRoYXQgYXJlIG5vdCBvbiBDUkFOIGJ1dCBhcmUgb24gIkJpb2NvbmR1Y3RvciIuClRvIGluc3RhbGwgYSBwYWNrYWdlIGZyb20gQmlvY29uZHVjdG9yLCB1c2UgdGhlIEJpb2NNYW5hZ2VyIHBhY2thZ2Ug4oCTIGZvciBleGFtcGxlOgoKYGBge3IsIGV2YWw9RkFMU0V9Cmluc3RhbGwucGFja2FnZXMoIkJpb2NNYW5hZ2VyIikgICMgSW5zdGFsbCB0aGUgQmlvY01hbmFnZXIgcGFja2FnZQpCaW9jTWFuYWdlcjo6aW5zdGFsbCgiZGFkYTIiKSAgICAjIEluc3RhbGwgdGhlIGVkZ2VSIHBhY2thZ2UgZnJvbSBCaW9jb25kdWN0b3IKYGBgCgojIyMgUzQgT2JqZWN0cwoKIlM0IiBvYmplY3RzIGFyZSBtb3N0IGNlcnRhaW5seSBhbiBhZHZhbmNlZCBSIHRvcGljLApidXQgYmVjYXVzZSBtYW55IGJpb2luZm9ybWF0aWNzIHBhY2thZ2VzIHVzZSB0aGVtLAp3ZSB3aWxsIGJyaWVmbHkgZGlzY3VzcyB0aGVtIGhlcmUuCkluIGEgbnV0c2hlbGwsIFM0IG9iamVjdHMgYWxsb3cgZm9yIGNvbXBsaWNhdGVkLCBtdWx0aWZhY2V0ZWQgZGF0YXNldHMKKHN1Y2ggYXMgbXVsdGlwbGUgZGF0YWZyYW1lcyB3aXRoIGRpc3RpbmN0IGJ1dCByZWxhdGVkIGRhdGEgYXMgd2VsbCBhcyB3aXRoIG1ldGFkYXRhKQp0byBiZSByZXByZXNlbnRlZCBpbiBhIHNpbmdsZSBvYmplY3QuCgo8c3BhbiBzdHlsZT0iY29sb3I6ICNlYjQwMzQiPlRPRE86IEVYUEFORDwvc3Bhbj4KCiMjIyBTYXZpbmcgeW91ciBkYXRhCgpTb21lIHZlcnkgYnJpZWYgbm90ZXMgb24gc2F2aW5nIHlvdXIgZGF0YSBpbiBSOgoKLSBXZSBhbHJlYWR5IHNhdyB0aGUgdXNlIG9mIGB3cml0ZS5jc3YoKWAgdG8gc2F2ZSBkYXRhIGZyYW1lcywKICBhbmQgeW91IGNhbiBhbHNvIHVzZSBvbmUgb2YgKnJlYWRyKidzIFt3cml0aW5nICAgICBmdW5jdGlvbnNdKGh0dHBzOi8vcmVhZHIudGlkeXZlcnNlLm9yZy9yZWZlcmVuY2Uvd3JpdGVfZGVsaW0uaHRtbCkuCiAgCi0gVG8gc2F2ZSBSIG9iamVjdHMgImFzIGlzIiwKICB3aGljaCBjYW4gYmUgdXNlZnVsIHdoZW4geW91J3JlIHdvcmtpbmcgd2l0aCBjb21wbGV4IFM0IG9iamVjdHMgdGhhdCBtYXkgaGF2ZQogIHRha2VuIGEgbG9uZyB0aW1lIHRvIGdlbmVyYXRlLCBsaWtlIGEgKnBoeWxvc2VxIG9iamVjdCosIHlvdSBjYW4gdXNlOgogIAogIGBgYHtyLCBldmFsPUZBTFNFfQogICMgU2F2ZSBhbiBvYmplY3Q6CiAgc2F2ZVJEUyhteV9waHlsb3NlcV9vYmplY3QsICJteV9waHlsb3NlcV9vYmplY3QuUkRTIikKICAKICAjIExvYWQgaXQgYWdhaW4gaW4gYSBuZXcgUiBzZXNzaW9uOgogIG15X3BoeWxvc2VxX29iamVjdCA8LSByZWFkUkRTKCJteV9waHlsb3NlcV9vYmplY3QuUkRTIikKICBgYGAKCi0gQSBnZW5lcmFsIHJlY29tbWVuZGF0aW9uIGlzIHRvIG5vdCByZWx5IG9uIHlvdXIgUiBzZXNzaW9uIHRvIGtlZXAgdGhpbmdzIGFyb3VuZCwKICBlc3BlY2lhbGx5ICJvdmVybmlnaHQiLiBEZXZpc2UgeW91ciB3b3JrZmxvdyBzdWNoIHRoYXQgeW91IGFyZSBhbHdheXMgc2F2aW5nCiAgaW1wb3J0YW50IG9iamVjdHMgYW5kIHJlc3VsdHMgb3V0c2lkZSBvZiBSLAogIGFuZCBjYW4gYWx3YXlzIHVzZSB5b3VyIFIgc2NyaXB0IHRvIHJlc3RhcnQgZnJvbSB3aGVyZSB5b3UgbGVmdCBvZmYuCgotLS0tCgojIyBXaGVyZSB0byBnbyBmcm9tIGhlcmUKClRoaXMgZG9jdW1lbnQgb25seSBzY3JhdGNoZWQgdGhlIHN1cmZhY2Ugb2YgUiwKYnV0IGl0IGhhcyBob3BlZnVsbHkgcHJvdmlkZWQgYSBnb29kIHN0YXJ0aW5nIHBvaW50IGZvciB3b3JraW5nIHdpdGggUi4KCk15IHJlY29tbWVuZGF0aW9ucyBvbiB3aGVyZSB0byBnbyBmcm9tIGhlcmUgd291bGQgYmUgZXhhY3RseSB0aGUgc2FtZQpyZWdhcmRsZXNzIG9mIHdoZXRoZXIgeW91IGp1c3Qgd2FudGVkIHRvIG1ha2UgZ2VuZXJhbCBwcm9ncmVzcyB3aXRoIFIsCm9yIHdhbnRlZCBsZWFybiBSIHRoaW5ncyB0aGF0IHlvdSBjYW4gYXBwbHkgd2hlbiB3b3JraW5nIHdpdGggbWljcm9iaW9taWNzIHBhY2thZ2VzLgpUaGV5IGFyZToKCjEuIExlYXJuIGFib3V0IGRhdGEgd3JhbmdsaW5nIHdpdGggdGlkeXZlcnNlIHBhY2thZ2VzLCBlc3BlY2lhbGx5ICpkcGx5ciogYW5kICp0aWR5ciouIFN0YXJ0IFtoZXJlXShodHRwczovL2RhdGFjYXJwZW50cnkub3JnL1ItZWNvbG9neS1sZXNzb24vMDMtZHBseXIuaHRtbCkKCjIuIExlYXJuIGFib3V0IHBsb3R0aW5nIHdpdGggKmdncGxvdDIqLiBTdGFydCBbaGVyZV0oaHR0cHM6Ly9kYXRhY2FycGVudHJ5Lm9yZy9SLWVjb2xvZ3ktbGVzc29uLzA0LXZpc3VhbGl6YXRpb24tZ2dwbG90Mi5odG1sKQoKQm90aCBvZiB0aG9zZSB0b3BpY3MgYW5kIHNvbWUgb3RoZXIgbWF0ZXJpYWwgYXJlIGFsc28gY292ZXJlZCBpbiB0aGlzIGV4Y2VsbGVudApDYXJwZW50cmllcyB3b3Jrc2hvcCBbUiBmb3IgUmVwcm9kdWNpYmxlIFNjaWVudGlmaWMgQW5hbHlzaXNdKGh0dHBzOi8vc3djYXJwZW50cnkuZ2l0aHViLmlvL3Itbm92aWNlLWdhcG1pbmRlci8pLgoKSWYgeW91IHdhbnQgdG8gc3RhcnQgd2l0aCBhIGJvb2ssIEkgd291bGQgcmVjb21tZW5kIFdpY2toYW0gJiBHcm9sZW11bmQncwoiUiBmb3IgRGF0YSBTY2llbmNlIiwgd2hpY2ggaXMgZnJlZWx5IGF2YWlsYWJsZSBvbiB0aGUgd2ViIGluIGEgcmVhbGx5IG5pY2UgZm9ybWF0CltoZXJlXShodHRwczovL3I0ZHMuaGFkLmNvLm56LykuCgotLS0tCgojIyBCb251cyBNYXRlcmlhbDogU3Vic2V0dGluZwoKIyMjIEJhc2ljIHN1YnNldHRpbmcgb2YgZGF0YSBmcmFtZXMgYW5kIHZlY3RvcnMKCldlIGNhbiBwdWxsIG91dCBwYXJ0cyBvZiBhIGRhdGEgZnJhbWUgdXNpbmcgc3F1YXJlIGJyYWNrZXRzLgpXZSBuZWVkIHRvIHByb3ZpZGUgdHdvIHZhbHVlczogcm93IGFuZCBjb2x1bW4sIHdpdGggYSBjb21tYSBiZXR3ZWVuIHRoZW0uCgpGb3IgZXhhbXBsZSwgdG8gZ2V0IHRoZSBlbGVtZW50IGluIHRoZSAxc3Qgcm93LCAxc3QgY29sdW1uOgoKYGBge3Igb25lX29uZV9lbGVtZW50fQpzdXJ2ZXlzWzEsIDFdCmBgYAoKVG8gZ2V0IHRoZSBlbGVtZW50IGluIHRoZSAybmQgcm93LCA3dGggY29sdW1uOgoKYGBge3IgdHdvX3NldmVuX2VsZW1lbnR9CnN1cnZleXNbMiwgN10KYGBgCgpUbyBnZXQgdGhlIGVudGlyZSAybmQgcm93LCBsZWF2ZSB0aGUgY29sdW1uIHBhcnQgYmxhbms6CgpgYGB7ciBzZWNvbmRfcm93fQpzdXJ2ZXlzWzIsIF0KYGBgCgpBbmQgdG8gZ2V0IHRoZSBlbnRpcmUgN3RoIGNvbHVtbiwgbGVhdmUgdGhlIHJvdyBwYXJ0IGJsYW5rOgoKYGBge3Igc2V2ZW50aF9jb2x1bW59CnNleCA8LSBzdXJ2ZXlzWywgN10KYGBgCgpZb3UgY2FuIGFsc28gcmVmZXIgdG8gY29sdW1ucyBieSBuYW1lLCBpbiBtdWx0aXBsZSB3YXlzOgoKYGBge3IgZ3JhYl9zZXgsIGV2YWwgPSBGQUxTRX0Kc2V4IDwtIHN1cnZleXMkc2V4ICAgICAgICMgVmVyeSBjb21tb25seSB1c2VkIHN5bnRheCEKCnNleCA8LSBzdXJ2ZXlzWywgInNleCJdCmBgYAoKV2hlbiB3ZSBwdWxsIG91dCBhIHNpbmdsZSBjb2x1bW4sIHRoZSByZXN1bHQgaXMgYSAqdmVjdG9yKi4KVG8gcHVsbCBvdXQgaW5kaXZpZHVhbCB2YWx1ZXMgZnJvbSBhIHZlY3Rvciwgd2UgY2FuIGFnYWluIHVzZSBzcXVhcmUgYnJhY2tldHMsCmJ1dCBub3cgd2Ugb25seSBwcm92aWRlIGEgc2luZ2xlIG51bWJlcjoKCmBgYHtyIGdyYWJfaW5kaXZpZHVhbF9zZXhlc30Kc2V4WzFdCnNleFsxMDAwMF0KYGBgCgoKIyMjIFNsaWNpbmcKCllvdSBjYW4gcHVsbCBvdXQgbGFyZ2VyIHNsaWNlcyBmcm9tIHRoZSB2ZWN0b3IgYnkgcHJvdmlkaW5nIHZlY3RvcnMgb2YgaW5kaWNlczoKCmBgYHtyIGdyYWJfc29tZV9zZXhlc30Kc2V4W2MoMSwzLDUpXQpgYGAKClRoZSBgOmAgb3BlcmF0b3IgZ2l2ZXMgeW91IGEgc2VxdWVuY2Ugb2YgY29uc2VjdXRpdmUgdmFsdWVzLAp3aGljaCB5b3UgY2FuIGFsc28gdXNpbmcgZm9yIHNsaWNpbmc6CgpgYGB7cn0Kc3VydmV5c1sxOjMsIF0gICAgICAgICMgRmlyc3QgdGhyZWUgcm93cywgYWxsIGNvbHVtbnMKc3VydmV5c1sxLCAxOjNdICAgICAgICMgRmlyc3Qgcm93LCBmaXJzdCB0aHJlZSBjb2x1bW5zCnN1cnZleXNbMjo0LCBjKDYsIDgpXSAjIFJvd3MgMi00LCBjb2x1bW5zIDYgYW5kIDgKYGBgCgojIyMgQ29uZGl0aW9uYWwgc3Vic2V0dGluZwoKQW5vdGhlciBjb21tb24gd2F5IG9mIHN1YnNldHRpbmcgaXMgYnkgdXNpbmcgYSBsb2dpY2FsIHZlY3Rvci4gYFRSVUVgIHdpbGwKc2VsZWN0IHRoZSBlbGVtZW50IHdpdGggdGhlIHNhbWUgaW5kZXgsIHdoaWxlIGBGQUxTRWAgd2lsbCBub3Q6CgpgYGB7ciwgcmVzdWx0cyA9ICdzaG93JywgcHVybCA9IEZBTFNFfQp3ZWlnaHRfZyA8LSBjKDIxLCAzNCwgMzksIDU0LCA1NSkKd2VpZ2h0X2dbYyhUUlVFLCBGQUxTRSwgRkFMU0UsIFRSVUUsIFRSVUUpXQpgYGAKClR5cGljYWxseSwgdGhlc2UgbG9naWNhbCB2ZWN0b3JzIGFyZSBub3QgdHlwZWQgYnkgaGFuZCwgYnV0IGFyZSB0aGUgb3V0cHV0IG9mCm90aGVyIGZ1bmN0aW9ucyBvciBsb2dpY2FsIHRlc3RzLiBGb3IgaW5zdGFuY2UsIGlmIHlvdSB3YW50ZWQgdG8gc2VsZWN0IG9ubHkgdGhlCnZhbHVlcyBhYm92ZSA1MDoKCmBgYHtyLCByZXN1bHRzID0gJ3Nob3cnLCBwdXJsID0gRkFMU0V9CndlaWdodF9nID4gNTAgICAgIyB3aWxsIHJldHVybiBsb2dpY2FscyB3aXRoIFRSVUUgZm9yIHRoZSBpbmRpY2VzIHRoYXQgbWVldCB0aGUgY29uZGl0aW9uCiMjIHNvIHdlIGNhbiB1c2UgdGhpcyB0byBzZWxlY3Qgb25seSB0aGUgdmFsdWVzIGFib3ZlIDUwCndlaWdodF9nW3dlaWdodF9nID4gNTBdCmBgYAoKWW91IGNhbiBjb21iaW5lIG11bHRpcGxlIHRlc3RzIHVzaW5nIGAmYCAoYm90aCBjb25kaXRpb25zIGFyZSB0cnVlLCBBTkQpIG9yIGB8YAooYXQgbGVhc3Qgb25lIG9mIHRoZSBjb25kaXRpb25zIGlzIHRydWUsIE9SKToKCmBgYHtyLCByZXN1bHRzID0gJ3Nob3cnLCBwdXJsID0gRkFMU0V9CndlaWdodF9nW3dlaWdodF9nID4gMzAgJiB3ZWlnaHRfZyA8IDUwXQp3ZWlnaHRfZ1t3ZWlnaHRfZyA8PSAzMCB8IHdlaWdodF9nID09IDU1XQp3ZWlnaHRfZ1t3ZWlnaHRfZyA+PSAzMCAmIHdlaWdodF9nID09IDIxXQpgYGAKCkhlcmUsIGA+YCBmb3IgImdyZWF0ZXIgdGhhbiIsIGA8YCBzdGFuZHMgZm9yICJsZXNzIHRoYW4iLCBgPD1gIGZvciAibGVzcyB0aGFuCm9yIGVxdWFsIHRvIiwgYW5kIGA9PWAgZm9yICJlcXVhbCB0byIuIFRoZSBkb3VibGUgZXF1YWwgc2lnbiBgPT1gIGlzIGEgdGVzdCBmb3IKbnVtZXJpY2FsIGVxdWFsaXR5IGJldHdlZW4gdGhlIGxlZnQgYW5kIHJpZ2h0IGhhbmQgc2lkZXMsIGFuZCBzaG91bGQgbm90IGJlCmNvbmZ1c2VkIHdpdGggdGhlIHNpbmdsZSBgPWAgc2lnbiwgd2hpY2ggcGVyZm9ybXMgdmFyaWFibGUgYXNzaWdubWVudCAoc2ltaWxhcgp0byBgPC1gKS4KCkEgY29tbW9uIHRhc2sgaXMgdG8gc2VhcmNoIGZvciBjZXJ0YWluIHN0cmluZ3MgaW4gYSB2ZWN0b3IuICBPbmUgY291bGQgdXNlIHRoZQoib3IiIG9wZXJhdG9yIGB8YCB0byB0ZXN0IGZvciBlcXVhbGl0eSB0byBtdWx0aXBsZSB2YWx1ZXMsIGJ1dCB0aGlzIGNhbiBxdWlja2x5CmJlY29tZSB0ZWRpb3VzLiBUaGUgZnVuY3Rpb24gYCVpbiVgIGFsbG93cyB5b3UgdG8gdGVzdCBpZiBhbnkgb2YgdGhlIGVsZW1lbnRzIG9mCmEgc2VhcmNoIHZlY3RvciBhcmUgZm91bmQ6CgpgYGB7ciwgcmVzdWx0cyA9ICdzaG93JywgcHVybCA9IEZBTFNFfQphbmltYWxzIDwtIGMoIm1vdXNlIiwgInJhdCIsICJkb2ciLCAiY2F0IiwgImNhdCIpCgojIHJldHVybiBib3RoIHJhdCBhbmQgY2F0CmFuaW1hbHNbYW5pbWFscyA9PSAiY2F0IiB8IGFuaW1hbHMgPT0gInJhdCJdIAphbmltYWxzW2FuaW1hbHMgJWluJSBjKCJjYXQiLCAicmF0IildIApgYGAKCgo8YnI+IDxicj4KCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("04-R.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
